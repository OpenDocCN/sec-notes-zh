# i春秋学院 进阶篇 PHP代码审计 - P1：第一节 代码审计环境准备 - 老网恋教父了 - BV1D7411S7vf

。大家好，我是万。这节课给大家带来的是环境准备。如何准备一个良好的代码审计环境？本节课有4个内容，一PT study2W test two3by forth birth4、其他工具。

首先我们来看一下PH study，这是一款windows下比较优秀的PT集成环境。它有多个PT版本供我们切换使用。它还有mysq服务端以及图形化的客户端。这款程序还有一个专门的控制面板。

方便我们进行各种配置。然后是star blank test two，这是一款强大的编辑器，它有众多的辅助插件。首先我们需要安装packy controll，这是一款管理其他插件的插件。然后基于paKr。

我们可以安装C以t。K去台底com to UTS8。C它是一款为函数建立索引的插件，方便我们进行代码的阅读。KT泰dy是一款。对PT代码整进行整理的插件。他可以把一些比较乱的代码简单的进行整理。

然后让我们看的更方便。com to UTF8，这是一款把非UTF8编码文件转化为UTF8编码文件的插件。然后我们需要配置but system。好。

这个可以让我们在呃s test to直接执行PHP的脚本。然后是浏览器fin force，我们需要安装一些黑客必备插件。代理插件以及hiker bar等。啊 birth。这是一款不需要解释的神器。

稍后呢我就为大家简单的演示一下如何进行抓包以及改包。my circle执行语句监控。然后我们这款小工具可以让我们很直观的看到我们访问一个页面，它执行了哪些呃seQ语句。好，可以方便我们进行对注入。

得注入进行调试。好，外边编码转换工具是集成了多种编码转换的一个小工具。嗯，Notote pad加加也是一款比较好的编辑器，呃，配合 test two可。一起方便审计。

现在我就来为大家简单去演示一下如何部署这样的一个环境。

![](img/c821ae87cd5f5355551c8215ae4e8256_1.png)

首先我们需要安装PHT study。确定。呃，因为我们的 fleet，它需要是java环境。然后也就是GDK我们这里就已经先安装好了。而s test two它需要的是pathon2。7版本的环境。

我这里也已经安装好了。呃，PHT基本上就安装好，呃，这个3D环境就基本上安装好了。然后因为我们是第一次安装，我们需要初始化。



![](img/c821ae87cd5f5355551c8215ae4e8256_3.png)

点确认就可以了。PT的环境启动成功。好，现在我来为大家演示添加站点。嗯，打开站点管理。好，我们添加一个虚拟站点。然后添加网站目录。现在新增好保存并修改配置。重启成功，我们现在就可以直接去访问了。哦。

不我们还需要修改host文件。然，把这个站点绑定到本地本地IP。保存现在就可以去访问了。成功去访问到了然需要我们初始安装。



![](img/c821ae87cd5f5355551c8215ae4e8256_5.png)

我们再来看一看srcle管理。他这里是。也有基础的几个数据库。嗯，现在我们同时安安装它新一建一个数据库。



![](img/c821ae87cd5f5355551c8215ae4e8256_7.png)

![](img/c821ae87cd5f5355551c8215ae4e8256_8.png)

安装成功，我们再来看。刷新。他多了一个。C节扣也就我们刚刚安装的。好，在这里我们可以很方便。系。很方便进行修改。然，现在。嗯，同时。需要嗯同时在这里就安装几个。火活的插件。啊，每现在用到的。代理。嗯。

黑客霸。基本上我们火狐的插件都可以在这里直接搜索并安装。好，现在。

![](img/c821ae87cd5f5355551c8215ae4e8256_10.png)

到我们的编辑器s test two。

![](img/c821ae87cd5f5355551c8215ae4e8256_12.png)

首先我们需要去安装party control。然后我们用快捷键调出它的。命令端口。conttrol加撇。就可以调出它的命令端口，我们把字体放大一点，按住ctl滚轮，那就可以把字体放大。



![](img/c821ae87cd5f5355551c8215ae4e8256_14.png)

嗯去。安装party controll，把这一串代码复制下来，然放在命令行回车执行。

![](img/c821ae87cd5f5355551c8215ae4e8256_16.png)

安装成功，现在要重启。火狐这边也是要重启。现在我们来看他可以conrl这样一个插件已经安装好了。然后我们基于他cl就可以安装其他需要的插件了。他可以control然后ins。



![](img/c821ae87cd5f5355551c8215ae4e8256_18.png)

呃，第一个选项就是安装插件，它需要进行一定的缓存。缓存插件的信息。啊，现在我们就可以去找到我们需要的插件，只要输入名字就好了。好如。谁太解。回车等待他安装。好，继续。

我们就可以用快捷键ctrl P调出这样的一个。命令端口我们。输入page control。呃，缩写。PC然后ins package。回车。就调出他的安装插件的界面，然后继续是PP胎底。啊。继续。

然后找到coverward。我们这里是com toUTF8比较长，我们并不需要完全的把它输输进来。然要是。相似或者是缩缩写。部分。哎。哦，我们需要先一TC。老屁。对，康ward。2e。UTF8。

第一个就是我们需要的插件。

![](img/c821ae87cd5f5355551c8215ae4e8256_20.png)

我们这里。看插件33四个四个插件已经都安装好了。好，现在我们还并不能使用Cta，因为他要调用一个程序C。我们需要把这个。



![](img/c821ae87cd5f5355551c8215ae4e8256_22.png)

工具把它放到C盘windows。就也就是系统环境配置里面的目录。让那去可以直接调用。

![](img/c821ae87cd5f5355551c8215ae4e8256_24.png)

好，我们现在。先把边栏显示出来。

![](img/c821ae87cd5f5355551c8215ae4e8256_26.png)

嗯后。打开我们的源码目录。第一盘。

![](img/c821ae87cd5f5355551c8215ae4e8256_28.png)

这样我们把目录把源码的目录载入成功。现在我们对源码跟目录右键。然后选择C tags。就。建立索引。这样太举和这个两个文件生成了，也就我们的索引就建立好了。现在我们来随便找一个自定义的函数。

C input。我们现在并不知道他在哪个。原文件里面，但是我们用C太极就可以很方便的找到双击选中这样一个函数右键。然后导航到他定义的文件，就直接就跳到了他所在的文店Lb点PP。这样很方便。

不需要每一个一个源码去找。呃，现在我们需要是配置。build system环境。他这是一个呃怎么说是一个比较好用的系统，但是这里是一般是没有PP的。



![](img/c821ae87cd5f5355551c8215ae4e8256_30.png)

那我们要新建一个。

![](img/c821ae87cd5f5355551c8215ae4e8256_32.png)

![](img/c821ae87cd5f5355551c8215ae4e8256_33.png)

我打开。把这一段复制过来。

![](img/c821ae87cd5f5355551c8215ae4e8256_35.png)

啊，保存。保存到他的配置目录里面。名字就PHP。

![](img/c821ae87cd5f5355551c8215ae4e8256_37.png)

配置完还并不能使用，我们需要把PP的执行文件嗯添加到系统环境变量里面。

![](img/c821ae87cd5f5355551c8215ae4e8256_39.png)

我们PT执行文件我们用的是5。5版本，也就是在这样一个目录。

![](img/c821ae87cd5f5355551c8215ae4e8256_41.png)

我们把它复制下来。然后把它添加到系统的环境变量里。

![](img/c821ae87cd5f5355551c8215ae4e8256_43.png)

然后在最后加上这个路径。

![](img/c821ae87cd5f5355551c8215ae4e8256_45.png)

是。哦后现在我们需要重启一下。

![](img/c821ae87cd5f5355551c8215ae4e8256_47.png)

他重新载入环境变量。那我们新建一个文件。用来测试。然后就简单的输出。一句话。T。

![](img/c821ae87cd5f5355551c8215ae4e8256_49.png)

然后保存。

![](img/c821ae87cd5f5355551c8215ae4e8256_51.png)

现在我们就可以直接就运行它了工具bud。

![](img/c821ae87cd5f5355551c8215ae4e8256_53.png)

也就是contrl B啊。他就输出了这，他就成功。用1。9秒的时间运行了这个脚本，然后输出了test。



![](img/c821ae87cd5f5355551c8215ae4e8256_55.png)

编辑器就讲到这里。好，现在我们来。讲一下pro straight和my circle监视。

![](img/c821ae87cd5f5355551c8215ae4e8256_57.png)

买fi语这的监视，在这里要。输入配置好在我们的。呃，数据库的用户密码。哦，初始化。好，我们这里去搜索。搜索留言。ABC。回车。然后我们再去获取它的语句。好，他先执行了一个设置制符集，然后再去执行搜索。

成功搜索AABC。这样我们注入的话，就很容易看到它是执行了怎么样的语句，有没有进行过滤等。我们来再来看。A state。抓抓包也是它配一个简单的代理。从。在里里面去索取数据。找到代理我看他的配置。啊。

他把本地8080端口。进行了代理，然后我们需要配置代理。哦，新建一个代理。127。0。0。1然是8080端口。我们来选择用用这个代理。好，继续搜索ABC。然，这里就已经成功的抓到他了包。

用get抓取ABC。搜索啊，这里就。改成XYZ。好，继续。他这里搜索的就是XYZ。

![](img/c821ae87cd5f5355551c8215ae4e8256_59.png)

有这样的简单的进行。

![](img/c821ae87cd5f5355551c8215ae4e8256_61.png)

抓取改包。然，最后就是外b编码转换工具。

![](img/c821ae87cd5f5355551c8215ae4e8256_63.png)

它集成了多种编码转换加密呀，以及各种绕过的一种一些常常用的配置。啊，我们要ABC然后。黑64编码。呃，编码还可以解码。



![](img/c821ae87cd5f5355551c8215ae4e8256_65.png)

也是比较方便的。然后坏基本上就讲到这里了。

![](img/c821ae87cd5f5355551c8215ae4e8256_67.png)

啊，这节课结束了。

![](img/c821ae87cd5f5355551c8215ae4e8256_69.png)