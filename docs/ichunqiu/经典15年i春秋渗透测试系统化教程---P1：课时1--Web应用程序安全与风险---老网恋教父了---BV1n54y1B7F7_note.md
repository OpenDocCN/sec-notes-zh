![](img/33ee4b2105aa5d4cee6c56d0252ff36c_1.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_3.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_5.png)

# 经典15年i春秋渗透测试系统化教程 - P1：课时1 Web应用程序安全与风险 🔐

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_6.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_8.png)

在本节课中，我们将要学习Web应用程序安全的基础概念、发展历程以及面临的主要风险。我们将从早期的静态网站讲起，逐步过渡到现代复杂的动态Web应用，并探讨其安全问题的根源和常见漏洞类型。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_10.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_11.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_12.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_13.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_15.png)

## Web应用程序的发展历程 🌐

上一节我们介绍了课程概述，本节中我们来看看Web应用程序是如何演变的。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_17.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_18.png)

早期的互联网网站主要是静态的。服务器上存储的内容与用户通过浏览器看到的内容完全一致。用户可以将页面完整保存下来，不存在任何隐私或动态交互。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_20.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_22.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_1.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_24.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_26.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_27.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_28.png)

这种传统的静态站点，客户端（用户）与服务端看到的内容一模一样，因此几乎不存在安全性问题。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_29.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_30.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_31.png)

万维网（World Wide Web，即3W）是互联网的核心。发展到今天，典型的Web应用程序（如网易首页）已经变得非常复杂。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_33.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_35.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_15.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_37.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_39.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_41.png)

现代网站不再是简单的静态HTML页面。用户看到的内容只是其中一部分，大量数据（如用户名、账号、银行金额）动态地从服务器数据库中提取。只有用户输入正确的凭证（如用户名和密码），通过服务器验证后，才能访问相应的内容。

随着Web应用的发展（出现了PHP、JSP、ASP等编程语言），其功能越来越强大，但与此同时，安全风险也随之增加。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_43.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_44.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_46.png)

## Web应用程序的常见功能 💻

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_48.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_50.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_52.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_54.png)

了解了Web应用的发展后，我们来看看它如今能为我们提供哪些服务。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_56.png)

以下是Web应用程序提供的一些常见功能：
*   **购物与拍卖**
*   **社交网络**
*   **网上银行与金融服务**
*   **搜索引擎（如百度、Google）**
*   **在线游戏与新闻**
*   **电子邮件与即时通讯**
*   **缴纳生活费用（如电费）**
*   **企业资源规划（ERP）与云办公平台**

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_22.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_58.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_59.png)

尤其是云服务，使得在线办公变得非常方便。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_61.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_63.png)

## Web应用强大的原因 🚀

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_65.png)

为什么Web应用能发展到今天如此强大的地步？主要有以下几个优点：

以下是推动Web应用发展的几个关键因素：
1.  **HTTP协议轻量高效**：HTTP是访问万维网的核心通信协议，它**轻量级**且是**无状态连接**，适合快速交互。
2.  **浏览器普及**：几乎所有设备（PC、手机）都预装了浏览器，用户无需额外准备即可访问Web应用。
3.  **浏览器功能强大**：现代浏览器能构建**内容丰富、交互友好的用户界面**，提供便捷的导航和输入控件。
4.  **开发技术相对简单**：Web应用的核心开发技术和语言相对容易上手，开发者可以利用各种现有平台、工具和接口，快速构建强大的应用程序。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_67.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_69.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_33.png)

## Web应用程序的安全问题与现状 🛡️

正如之前提到的，功能越强大，伴随的安全问题也越多。目前，绝大多数网站都存在安全漏洞。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_71.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_72.png)

许多用户和管理员对网站安全过于信赖。实际上，超过90%的网站都曾遭受过攻击，存在大量可被利用直接窃取数据库数据的高危漏洞。即使是使用了HTTPS/SSL或SSH等加密协议的服务，也出现过可被直接攻击并获取服务器权限的零日漏洞。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_73.png)

根据国际上的漏洞统计，当前Web应用面临的主要安全威胁比例如下：

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_75.png)

以下是几种最常见的安全漏洞及其占比：
*   **跨站脚本（XSS）**：**94%**。攻击者可利用此漏洞攻击应用的其他用户，窃取其信息或以他们的身份执行操作。
*   **跨站请求伪造（CSRF）**：**92%**。
*   **信息泄露**：**78%**。例如，应用程序报错时可能泄露敏感信息、网站路径，甚至将用户名密码写在JS文件里。
*   **不完善的访问控制**：**71%**。例如，普通用户可能越权访问本应只有管理员才能查看的页面或数据。
*   **失效的身份认证**：**62%**。例如，登录界面缺乏验证码、登录次数限制等措施，导致可被暴力破解。
*   **SQL注入**：**32%**。这是一种高危漏洞，攻击者可通过构造恶意输入来破坏数据库查询，窃取或篡改数据。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_56.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_77.png)

针对国内行业的最新（2015年）漏洞排名显示，**跨站脚本（XSS）**、**弱口令爆破**、**SQL注入**和**密码重用漏洞**位列前茅。

## 核心安全问题：用户可控的输入 ⚠️

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_79.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_81.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_82.png)

Web安全的根本挑战在于，应用程序无法完全控制客户端。用户几乎可以向服务器提交**任意输入**。因此，应用程序必须假设所有输入都是**恶意的**，并采取措施确保攻击者无法利用精心设计的输入来破坏程序逻辑，非法访问数据或功能。这对开发者而言非常困难。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_84.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_86.png)

这个问题主要体现在以下几个方面：

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_88.png)

以下是攻击者可能利用用户输入发起的几种攻击方式：
1.  **干扰传输数据**：使用工具（如Burp Suite）拦截并修改客户端与服务器间传输的所有参数、Cookie和HTTP头信息，尝试进行参数越权、Cookie欺骗或SQL注入攻击。例如，将 `id=1` 改为 `id=2` 或 `id=1'`。
2.  **不按顺序发送请求**：绕过正常业务流程。例如，在密码找回功能中，尝试绕过中间验证步骤，直接跳转到最后一步。
3.  **使用非标准浏览器或工具**：利用带有各种插件（如火狐、Chrome插件）的浏览器或独立工具，发送普通浏览器无法构造的请求，进行自动化攻击或CC攻击（耗尽服务器资源）。
4.  **修改客户端数据**：例如，在本地拦截购物请求，尝试修改商品价格为负数（如将50改为-50）。
5.  **劫持用户会话**：通过XSS等手段窃取其他用户的会话令牌（Cookie），从而冒充该用户登录。
6.  **利用业务逻辑漏洞**：例如，密码修改、积分兑换等流程中存在逻辑缺陷，可能导致任意密码修改、无限刷积分等。这类漏洞在涉及金钱交易的平台中较多。
7.  **注入恶意查询**：通过修改提交给后端数据库的参数，注入恶意SQL语句（SQL注入），从而访问或篡改敏感数据。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_90.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_92.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_94.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_71.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_96.png)

## 安全漏洞产生的原因 🤔

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_98.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_100.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_102.png)

那么，造成这些安全漏洞的主要原因有哪些呢？

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_104.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_105.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_106.png)

以下是导致Web应用漏洞的几个关键因素：
*   **不成熟的安全意识**：开发者、管理员甚至用户自身的安全意识薄弱。例如，设置简单的密码（如123456）。
*   **独立开发与集成**：大多数Web应用由企业独立或合作开发，即使使用第三方组件，也常通过自定义代码进行拼接。这使得每个应用都可能包含独有的缺陷。
*   **功能与安全的差异**：编写功能代码与编写安全代码之间存在巨大差距。新手开发者往往只关注功能实现，忽略安全性。
*   **迅速发展的威胁**：新的技术（如HTML5）、编辑器、插件和编程语言不断涌现，随之产生新的、有时连官方都难以快速修补的漏洞（如某些0day漏洞）。
*   **资源与时间限制**：开发项目常受时间和资源限制，导致开发者可能从网上复制代码或仓促完成功能，无暇顾及安全。
*   **不断增长的功能需求**：大型网站功能复杂，交互点多，出现漏洞的可能性远高于简单的小型网站。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_108.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_110.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_111.png)

## 新的安全边界与未来展望 🔮

传统的网络安全边界（如防火墙、IDS/IPS）对防御Web应用层攻击效果有限。针对Web的防御更多地依赖于**Web应用防火墙（WAF）**以及从网络、系统到应用层的纵深防御体系。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_113.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_114.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_116.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_117.png)

未来，Web应用安全将面临更多挑战，例如：
*   **Web 2.0/3.0与云计算**：架构变化带来新的攻击面。
*   **APT攻击**：高级持续性威胁，结合多种手段进行长期、有针对性的攻击。
*   **逻辑漏洞**：随着传统漏洞减少，业务逻辑漏洞的挖掘变得更为重要。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_119.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_121.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_122.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_123.png)

## 学习建议与道德规范 📚

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_125.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_126.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_128.png)

本课程后续将以实战操作为主。在学习过程中，请务必遵守法律法规和道德规范。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_129.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_130.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_132.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_133.png)

**重要提醒**：严禁在未获得授权的情况下对任何网站进行渗透测试或使用扫描器，这可能造成服务瘫痪并需承担法律责任。我们学习的目标是成为正规的渗透测试工程师，维护网络安全，而非从事非法活动。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_135.png)

建议初学者多关注以下安全社区，以获取最新漏洞信息和学习资源：
*   乌云安全网
*   FreeBuf
*   Sebug
*   360安全播报
这些平台会及时更新国内外安全动态、漏洞分析和解决方案。许多企业（如百度、京东）也没有漏洞提交平台，欢迎白帽子提交合法发现的漏洞。

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_137.png)

---

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_139.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_140.png)

![](img/33ee4b2105aa5d4cee6c56d0252ff36c_142.png)

本节课中我们一起学习了Web应用程序安全的基本概念、发展历史、主要功能、面临的核心安全风险及其根源。我们了解到，由于Web应用的交互性和用户输入的不可控性，安全挑战始终存在。从常见的XSS、SQL注入到业务逻辑漏洞，开发者和管理员需要具备持续的安全意识。在接下来的课程中，我们将进入实战环节，在本地环境中详细演示和分析各类漏洞的原理、利用方式及防御方法。