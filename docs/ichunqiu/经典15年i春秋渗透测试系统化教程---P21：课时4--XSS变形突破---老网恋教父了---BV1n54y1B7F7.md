# 经典15年i春秋渗透测试系统化教程 - P21：课时4  XSS变形突破 - 老网恋教父了 - BV1n54y1B7F7

好，这节课我们给大家讲解一下这个变异的叉SS。呃，关于前面我们讲了这么多这个叉SS的一些使用方法，包括它的原理。那么变异叉SS叉SS是怎么回事的？它主要是例如我们过滤了监括号，那么我们怎么去突破它是吧？

包括这个呃一些呃关键的函数，那么我们能不能用其他的代替？那么这一档呃，我们我大概写了一小道通龙说。呃，总结过来的，也就是说变异叉SS是从安全范围引入。到不安全的这个。

过滤范围也大多数的常见的变异叉SS结构是源于错误的阅读这个。呃，intelHTML这个之间的这个代码，一个好的编译叉SS例子是使用啊listing这个元素来使这个叉SS条件满足，像这类的，对不对？

那么这样呢我们没有这个sep吧，是吧？用leting这样的一个呃。就是说当我们这个呃listing这个元素就是。他的这个。因特HTMV的之间被读，那么它就会转换进入一个什么。野妹子元素啊野妹子元素。

这样的话，我们这个原始的这个HTY的就被避开了啊被避开了。这是一种突破的方法。那，这个你可以打开它的网站啊进行一些测试。还有包括一些专业的或者相对的这个覆盖这个叉SS。那么在这里呃我们就大概就是给大。



![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_1.png)

讲解一下图方法，然后这里搭建了一个环境。我举个例子啊，有些是我们一般的情况下都是通过什么嗯，像这种模式是吧？sip是吧？这种模式啊，都会前面加一个这种来弹仓。如果它这个被过滤掉了的，对不对？

对方的这个网站写了一个过滤，过滤这个监控啊，包括这个scip过滤了。那么其实我们这种也可以弹好，就说我不需要这个就edit，这里头等于123。好，第上，那么当我点击的时候，哎，它也一样可以弹出来。

对不对？也是OK的，没问题。那么如果他这个呃有些它是呃把这个直接过滤的，那么我们能不能转移一下像这种模式来你看。例如1234是吧，567，你看它就变化的。啊，像像这个编码一样，这种模式哎。

这这种也是可以的啊，这种也是可以的。也就是我们家。

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_3.png)

像加密一样啊，编码一下。嗯，这种模式。啊，变成这样。工能还有更多的。你想我点呃，我这里总结了很多。嗯，像这个嗯我们来看一下，像大小写，对不对？这种。嗯，还有这个什么十六进制的啊，十六进制。

也就是把这个sip转转化成16进制。然个16G，一个大小写16G，还有这些编码啊编码模式。所以说一般的它都会过去什么监控号啊。嗯。包个直。这个s啊一般的程序都喜欢过滤这个。

所以说我们可以用其他的一个代体啊，什么16级加转移编码、大小写呀啊嗯。等等一种模式来来进行一个。突破。你可以看一下的。是吧有很多的。还有呃这种模式的就是错误的形式。嗯，错误的这个。这个网络。

还有加载的方式，onload啊onload这种模式来突货。所以说他的风法很多的哈。嗯，就是说我们可以不用sIMG也是一样啊，图片一个调用啊，包里。啊，鼠标移动啊。Almost all。啊，这些这些函数。

等等。包括在我们这个叉SS插入大码的时候，在采DIVDIV这个样式啊。也是可以的，还有这个框架形式的啊，就挂毛孔式的inform。衣form me啊。你看这个是一些变ES呃常用的一些。叉4一些代码啊。

大家可以试一下啊，试一下。大家可以看下。很多。你该。他有的时候会用得到啊，有的时候会用到。还有就是说喜欢过滤这个ALERT是吧？唐超，我们完全我用这个也用的比较多PROMPT啊也是可以的哈，也是可以的。

大家可以看一下。啊，举个例子哈，我们谈一下哎，他自己躺吧。

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_5.png)

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_6.png)

应该是可以，这个函数也是可以啊，那也是可以，你看也可以谈个电话通出来啊，这也是可以的。

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_8.png)

啊，就用这个。我来看一下，还有其他的没有。嗯，诶。AA的E2RT还有这个。这个还有一些。就是我们前面讲到的。这个鼠标移动啊，鼠标点击啊是吧？我看一下有有没有就是比较特殊特殊一点的。嗯，这也是别人总结的。

我在网上拿到的啊，看看了一下。嗯，还有你看没变了过滤那个d。那么它中间加一些什么空改一样的形式，而是这种模式。他也是可以突破的，我觉得应该是退步键吧一些。所以说。还有一些编码啊编码模式。也是可以。

这样的话。他一拆开，那么那么就不构不构成这个抓这个完整性的。那么就我们直接可以。嗯，绕过去了。嗯，这种的。我看一下还有input样式，你看。SIRC啊，就是这就是调用的一个方式。你像例罗。

一般的一般的后面是写那个路径是吧？我让一写路径，那么我们这样写也是可以的。整个这个就是onload加载的模式啊，以加载的形式。嗯，特别特别多。哦。那可以可以看一下。好。

那么关于这个我们就大概就是给大家嗯提一下，就是说这个便异的嗯，大家也许今后会用用得到啊。

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_10.png)

呃，关于我们这个变异这个叉SS，我们就讲这么多啊，关键大家就是说嗯在这个实际这个生产环境过程中，我们在测试的时候啊。主要看对方的管理员是怎么样去。嗯，过滤这些。查一猜这些这些配殊的一些关键字啊。

包括这个监控啊函数啊，看他是怎么样去过滤的啊，我们根据具体的情况来进行突破。那么通过方法大概也就是这样。还有就是说我们需要给大家提到的一点，就是说。在叉SS这个过程中啊，就是我们测试的时候。

只要有输入的地方，我们都可以插一些叉SS代码，看是否。存在叉SS那洞啊叉SS那栋。举个例子哈，你像这个头消息头啊，你要说。A个这样的地方也是可以插的，也就是这样地方，我这里标记下一下。

这样的方任何输入的地方都可以插，包括立啊啊。也是可以插这个嗯叉SS，包括code里面也是可以的。插OE代码都是可以的。只要我说过，只要是在输入的地方，我们都可以去插这个OE的这个叉SS代码。

然后测试是否存在这个。叉一都啊。呃，这个环境就是说呃大家打开这个呃网站，你可以去上面这个网站。那这个网站需要这个VPN连接，你连接上去之后，打开这个站，它也提供了各种这个方式来进行测试。有什么。啊。

样式标题。等等他都有啊。都有一些环境来测试那个嗯拆测式那种。当然也有这个工具啊，这些工具。来进行测试这些工具大家可以自己去看。当然还有其他的一些工具啊啊。

一般的扫描工具都都自带的都都会扫扫得到这个叉SS的灯啊，工具现在工具也比较强。一个好工具，一个少叉工具。关键是在于它的这个爬行功能啊，就是我就相当于一个外博扫描器，这个外博扫描器啊呃好坏一般。呃。

最主要的是呃我个人觉得这个看到这个爬行深度啊行不行？就是说。一般的现在扫描器都差不多啊，就是针对微博扫那弄的。呃，扫描器啊都是相差不大啊，内动库啊都基本上都有。啊，要扫注入啊。

叉SS啊等等其他的一些内容啊啊都可以扫。但是关键是它的这个扫描力度，包括这个深度啊，深度或深度怎么样。啊，这个是最关键的。所以说有些那种你像叉S叉SS种，什么这是扫不到的，因为它没有爬行道。

所以我们需要手工来验在来来进行。测试。所以这里我做了一个总结，就是手工材色啊，这个拆C的拆C的动的时候啊。最重要的是，我们要考虑到哪里有输入啊，或者输出输据的在什么。地方输出。

那么我们就插一个插SSOE代码。那么人工材是茶色这种跟这个。软件测试哎。嗯。差不多，但是这个人工啊一般的是我们原件找不到的情况下，我们需要人工的，但是人工找这个比较慢啊，这个速度比较慢啊。

一般的根据扫描速度快啊，因为我们人工的话一个个的去。要分析，还要要来要进行插入。呃，看还有什么其他的需要补充的没有？嗯，大概就是说整个叉AC是这种吧这一章节我们就基本上。



![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_12.png)

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_13.png)

嗯，结束了。你可以看一下这点，这里其实嗯。也不错。这是一个变异啊，这个是一个变异的就是说。对这个叉SS代码进行一个。编码啊，大家可以看一下，当我们就插入这个。X代码的时候，它就编码各种显示的。你看。啊。

变小64。这种模式来唐仓。嗯有没有嗯一中？呃，这一呃这里有一点就是说比较重要的一点，啊，这里标记了一个黄色的，就是万能城色叉SB这种代码。一般情况下就说。你不管只要有输入的地方。

我们插入这行代码来进行测试，来进行测试。也就是说我们这个闭合一下，前面就是。嗯，闭合就对代码进行，就是这个闭合，后面插入我们这个。故意代码。可以这种方式是一种万能的。万能测试叉S那的一种方法。好。

关于差异色这种我们就讲到这里吧，大家到时我们。啊，有什么问题我们再。嗯，上课的时候再进行了。

![](img/ad0b72fe3ab1b59e8c2599c5355c1abc_15.png)