# i春秋零基础入门Android逆向 - P39：课时14 IDAOdex修复脚本编写 - 老网恋教父了 - BV1sg4y1B7zB

🎼。我是讲。那么今天的话就来讲一下如何去编写一个脚本，然后来把我们以前呃讲过的1个ODX如何把它转成一个ds文件。那么上一节课中已经从一个它源码中来分析过。

整个安卓系统它到底是怎么去干到把个文件给转成1个ODX文件，然后里面有有哪些OP都会被一个重写过了。那么这里我们就来尝试着把我们被重写过的一个OPQ文件给还原回去。那么在像这种还原的话是很有必要的。

有些时候话我们登出来数据，它不一定会包含一个呃OTEX的数据。那么这个时候的话就需要我们去进行一个手动的还原了。那么在这里我们在一个阿里的壳来进行一个呃说明好还是一样先安装。



![](img/d9ab133e6fc4574b5058034085f6ceaa_1.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_2.png)

然后在这里的话直接进行一个挂接，然后提取拷一个脚本，把它内存的数据给提取出来。嗯，这个脚本的话听透性还挺强的。好。打开安卓serv再进行一个端口转发，然后IDA调节挂调试挂上调节本。



![](img/d9ab133e6fc4574b5058034085f6ceaa_4.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_5.png)

啊，这个阿里壳的话也是一样，把它进行打给你。

![](img/d9ab133e6fc4574b5058034085f6ceaa_7.png)

然后RDA进行个挂件。选中对应的一个程序。那么这里就已进行一个加密。那么在这里的话，它已经把等一个按卓出的块已经识别出在是一个阿里加固进行一个加口的一个腾序了。好，我们再截好脚本。呃，里面的话也是一样。

识别出几个啊且识别出4个一个de数据。前两个是我自己SSpo输入的。那么第二个的话是壳本身的一个入口点的一个代码。那么第三个就是内存中解码解出来的一个数据，好脚本把第三个给断出来。好。

里面的话可以分析一下它的一些用狗点之类的。呃，分析可靠还是一样。先分析一个and卓 manyfi sM里面，然后查一下这样一样一个安卓 land的一个优狗点，这是一个阿里的一个入口。

是一个mobil什么什么一个t狗点。好，这是一个阿里的口。我在里面的话哎在这里就完成一个dm。我们等这个脚本来完成，再来看一下动出来数据进行一个反变译，然后是一个什么样的情况。好，那么现在脚本机跑完。

然后倒出来数据的话都放到这个目录之中。那么这个目录的话可以由大家自己修改，然后放到自己喜欢的一个地方。然后呃在这里进行一个后DS文件。那么这个就是最终生成的一个动出来一个数据文件。

这个数据文件我们在这里直接进行一个反面，然后呃放到一个安卓Q中来尝试进行一个编译，来看一下里面是怎么样的。嗯，在这里话有有一些特别，要把它当中的一个动过程中的一些和的一个代码数据的话，先记录下来。呃。

因为这里的话需要涉涉及到一个类的一个缺部。那么在这里就存放着我们的当前壳的一个编号。比如说这样一个类，它在多少号位的话，它是一个什么样类？呃，在这里需要先记录一下。那我们就完成一个修复。



![](img/d9ab133e6fc4574b5058034085f6ceaa_9.png)

呃，找到这样一个后蝶软件好，然后进行1个APK的一个反应。

![](img/d9ab133e6fc4574b5058034085f6ceaa_11.png)

哦，对，然后把它输出到一个位置中去。

![](img/d9ab133e6fc4574b5058034085f6ceaa_13.png)

哎，那么在这里它就开始报异常。首先第一个话，他就是你正在尝试去反编译1个ODEX代码。那么假如你想使用到它的1个ODAX数据的话，请使用一个刚差的一个选项。那么在这里我们先不使用。那么现在现在下面的话。

它就报一个反变一的一个异常。他说正在反变这样一个类中，哎，就出现了一个异常。然后它发现有一个值是不正确的。哎，它里面不正确的值的话，就在这里可以找到在偏移为这么多的一个地址，它说我们的值是非法的。哎。

那么像这种情况，我们就来看一下，它最终它准变反编译出来这样一个类，它是反变异成一个什么样的一个值。

![](img/d9ab133e6fc4574b5058034085f6ceaa_15.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_16.png)

好，我们跟过去是一个安卓sport4中的一个地方。

![](img/d9ab133e6fc4574b5058034085f6ceaa_18.png)

我是一个 will。Will you page on。好是个按。好，那么它这种反面出来的话，是这样一个类。当然对于这样一个类来说的话，在这里我们可以直接删去。因为这个类似安卓这个阿里可它额外插入的。

但当然这里跨不上话，我们也可以看一下应该怎么样去进行一个修复。那么在这里可以看到是一个类在反变译到这这里的时候，由于遇到异常的话，就直接把它的一个反面工作给停下来了。那么这么停下来的时候。

那么后面假如我们要需要对这样一个类，完成一编页操作的时候，那么这里就程序就会报生一个异常，然后就编译不过去了。那么像这种情况，当反变报错的时候呢。

我们就需要对它报错的一个地方报出一个数据来完成一个手动的一个修复。啊，我们在这里先来完成一个修复，再来重新进行一次反变印。



![](img/d9ab133e6fc4574b5058034085f6ceaa_20.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_21.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_22.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_23.png)

你好，找到我们刚才动出一个后S文件。

![](img/d9ab133e6fc4574b5058034085f6ceaa_25.png)

接着来找到我们的这样一个类。这个类的话，它的名称是那么一个东西。然后在我们呃这个地方进行一个搜索。

![](img/d9ab133e6fc4574b5058034085f6ceaa_27.png)

好，打一行。那么那在这一个类的话，就是我们刚才倒出来一个类，然后看一下它的一个数字编码，一个classastic方案中的编码，它是位于941号位。哎，我们跑一下找本，找到这个地址。好呃。

找到这里的1个941。好，那么就在这个地方好。我们打开来看一下它里面哪一些数据是呃非法的非法的哎，这已经提示了一个错误了。我们还要看一下这个错误，他说他正在解析位于这个地址的一个内存数据的时候发现异常。

因为他他发现里面数据是不正确的啊，我们来看一下这个地址到底是在这一个类中的哪一个地方。

![](img/d9ab133e6fc4574b5058034085f6ceaa_29.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_30.png)

呃，来进行一个查看。我们在这里的话就需要呃对这些一个类的一个属性哈什么的会要敏感一点啊，我们找到这个地址，这个地址是1个11687。好，我在这个地方我们就展开这样一个了哎。我们看到这里。

看到这里一个 item里面，这看到一个 error，这明跑加本的时候，它分析出来了这个数据是一个错误的，它没有办法正常的一个分析。那么我们来看一下其他的一个数据的话，哎。

导致下面的话也是一个异常的一个情况。那么对阿里来说这里的一个数据就是一个数据的话，基本上都是一个错误的一个数据，因为都被它进行了一个填充了。像这种情况，比如说在这里比如说这个它偏36。

这显然是一个非法的。因为这3036的这样一个地址话，还处于一个文件头的一个地方。那是由阿里它自己进行了填充的，还是一个非法数据。像这种情况，我们想要干的话很，直接把它改成零就好了。好。

感谢你以后保存一下。那么这个地址哎就能够跳过它的一个异常，我们再重新进行一次反变令。

![](img/d9ab133e6fc4574b5058034085f6ceaa_32.png)

好，把原始的给删掉，然后进行一个重新的反命令。呃，对于这样一个结构体的话，它实际上是不怎么去影影响我们的一个执行的。所以一旦遇到像这种异常的时候，还要自己又不知道怎么去的时候，哎。

可以直接把它的一个值给清零给干掉。哎，那么这这么一来，在进前把变缘异的时候呢，这个爆出了一个异常就不见了。我们回头再来看一下这样一个类。在我们清掉这样一个属性的时候。

它里面的类的一个呃变译出来的一个效果是什么样的样子的。

![](img/d9ab133e6fc4574b5058034085f6ceaa_34.png)

好了，安着中去，然后是一个support于是 view。好，在这里。那我这么一来把编译出来，数据就变成这个样子了，里面里面的函数已经能够正常识别，只是少了前面的一个拉选的一个数据而已。啊。

那么这么一来的话，哎，这种情况就能够正常的完成一个编译了。我们来看一下，直接把这样一个编译的代码给放到一个这样一个壳中来编译会发生一个什么样的情况。好，我们按照脱壳预案步骤来进行一个代码地方。好。

把它拷贝完以后进行一个变译。哎，结果他爆出异常，说他无法正常一个编译啊，安卓mini face来个入口点要改一下，这里忘记改刚才。好，结果他这里报出了异常，他说在这个文件中没有办法去编译到这个错误。哎。

那么既然他报了这样一个错误，我们就定位到这个文件中来看一下这是什么问题。好，这个文件在一个安卓的一个安卓，然后support里面是一个desecide。啊，点开了。好，找到第第第第第100多少行。

这是多少还，这是第1383行33个字符，我们找到他。哎，就会发现呢哎这是一个经过优化的1个OP code。那么这是一个优优化过OP code的话，里面参数是像这种情况来表示的。

那么它进行反编译的时候的话是不识别这一种O优化或OP code的一种写法的。那么在这个时候进行编译的时候就会报错。哎，这是这样一来，就是像这种优化户的一个代码。

不是不能够导致的哎不能够正常编译的一种情况。所以呢像这里如何去去进行一个去用化的话，是非常有必要的。但是对于阿里的这个可来说的话，因为它本身dom的时候呃，在这里都已经看到它本身do的时候的话。

已经把它的1个OPT的一个数据呢都同时给dom出来了。所以在这里可以直接使用1个杠叉的一个选项来对它的1个OP扣来进行一个反面应。



![](img/d9ab133e6fc4574b5058034085f6ceaa_36.png)

好，我们来定一个杠超的一个选项。然后里面的话啊，那么大家。在这种情况的话，哎，他又报了这样一个错误。哎，那么这时候他就说没有办法找到一个fclass load的一个文件。

就是因为在当我们使用这样一个杠差的选项来反编译我们的一个呃经过优化的1个OTX文件的话，它是依需要依赖到我们当前系统中的一个加选过后的一个frameme末的一个数据的。



![](img/d9ab133e6fc4574b5058034085f6ceaa_38.png)

那像这种情况的话，就需要把手机中的呃b目录下所有数据，也就是说哎在这个目录下一个stem中，bboard中的一个所有数据，所有des文件给全部d出来。

然后以一个参数的方式给传到一个传到这样一个ja文件中，哎，才能够正常的使用这样一个选项。那么这样一来是不是就太过麻烦，太复杂。而且有时候我们换了手机的话，就又要重新来一个dm一遍，这就非常扯淡了？



![](img/d9ab133e6fc4574b5058034085f6ceaa_40.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_41.png)

嗯，可以看一下哎，在这里的话。在这里的话就使用这样一个呃。我们来看一下，这里的话就使用一些参数的话，就能够进行一个强制加载了。我记得这里应该是一个嗯这里的话我看一下我的写法。



![](img/d9ab133e6fc4574b5058034085f6ceaa_43.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_44.png)

我都忘记了哈。嗯，在在在在这里在这里。诶好放上呢个 o。啊，那么这里的话是我们可以通过使用一个杠低的选项，把一个bro中的一个所有文件给动出来。

然后在这里就使用杠低选项来指向我们bro的数据来完成一个反面应的效果，但是这么一来的话，就需要我们先把我们内存中就是手机中ro中的一个数据给全部动出来以后，哎，才能够使用这样一个选项。

那么这么一来就太过复杂了。而且前面我们就已经分析过了，有些程序我们动出来的时候，可能是不太不带这样一个OPT head的一个数据的。那么这个时候话我们是不是应该想想一下其他方法，哎。

看有没有办法去来完成一个手动的一个修复了。哎，那么这里也是有的。

![](img/d9ab133e6fc4574b5058034085f6ceaa_46.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_47.png)

那么在这里我们可以尝试着来写一个脚本，就按照安卓系统它进行一个优化时候的一个立预向的一个方法，对它进行1个ODX to TX的一个操作。



![](img/d9ab133e6fc4574b5058034085f6ceaa_49.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_50.png)

好，我在这里这一个脚本经写完了，我们来看一下它的一个具体的操作吧。那我大概是这个这个样子的，然后里面的话呢是一个输入，还有一个输出。



![](img/d9ab133e6fc4574b5058034085f6ceaa_52.png)

嗯，是不输出的话，我们就改到这个目录制需要中进行。

![](img/d9ab133e6fc4574b5058034085f6ceaa_54.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_55.png)

然后里面的一些参数的话是这个样子的。

![](img/d9ab133e6fc4574b5058034085f6ceaa_57.png)

咱们把这样一个holdt文件给转一下。然后呢哎输出的地方。等一下。然后输舍的地方呢就改造。这个目录支架。好，然后直接进行一个执行。2杠318。好好一下脚本。



![](img/d9ab133e6fc4574b5058034085f6ceaa_59.png)

哎，那么这么一来的话，哎，它就会以完成一个整一个程序完成一个转化，并且转成这样一个内容啊。我们来看一下这样一个转换以后，呃，经过脚本转换以后的一个数据是怎么样的一种情况。对。

我们看一下里面的经过优化的代码。哎，我这已经尽量的能够修的都修过了。那么像这里哎我们再把这一个转换后过后的一个代码和我们原来的代码进行一个比较。



![](img/d9ab133e6fc4574b5058034085f6ceaa_61.png)

看一下他优化前，还有说一个优化后哎是怎么样的样子了，对它这是一个反变力。

![](img/d9ab133e6fc4574b5058034085f6ceaa_63.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_64.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_65.png)

好，把它反面目录放到这个地方。

![](img/d9ab133e6fc4574b5058034085f6ceaa_67.png)

那么两者之间对比一下。

![](img/d9ab133e6fc4574b5058034085f6ceaa_69.png)

好，那么我们看一下的话，里面的一些OP code代码，像这种哎本来是一个 overI的为，然后一个 word的话也是一样给反变译成一个t word。那么这就是一个脚本修复的一个效果。

可以看一下话里面基本上能够修复了，都已经修复完了。我们再把这些数据给全部拷到一个好了我们我们的一个安卓q中进行一个反变。



![](img/d9ab133e6fc4574b5058034085f6ceaa_71.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_72.png)

呃，这些都大码替换。好，那么替换你了已确替换完以后，我们再重新进行一个编辑，来看一下哎，现在什么样的样子了。对吧现在的话哎这一句代码已经给修附掉了。哎，那么这么一来，既能够正常的完成一个编役操作。

那下面的话也可以尝试去安装，然后执行看一下它来是不是真的能拖拖出来，以后是不是程序能够正常的执行了。

![](img/d9ab133e6fc4574b5058034085f6ceaa_74.png)

那么这么一来的话，就是我今天所要讲的这一个呃这个代码的一个内容里面的话就是就是通过一个脚本来完成这样1个OVEX的一个修复。呃，大家可以看一下，大家看一下。呃，本来在我们修复前的话，哎。

它会有这样一个代码来表明他把某些ODS来数据给取消掉的。那么在这里。假如成功以后，它就会提示我们要使下杠叉的一个选项，来来把它把把1个ODX文件来把它来换成1个DX文件。

并且哎假如程序它有原来的一个application的话，我们就要进行一个搜索，然后在application标签中呢进行一个添加。啊这里这个话在前面已经说过了。你好，那么这么一来啊，我们跑完脚本以后。

就已经把1个ODX文件给修附为一个可以可以使用的1个DX文件。我这么修复完以后啊，就能够直接放到一个安卓配el中来进行一个加载。那以后进行一个执行。那么至于这样一个脚本，它到底是什么操作的话。

呃大家有兴趣还是一样把账码给你们以后，大家在下面的话，自己去自行去看一下啊，里面的解法也是挺简单的。呃，大致来说一下的话，就是像这种样子。就是把1个ODOP扣就是一个优化过的1个OP code。

把它哎把安卓代码这种OP扣的话全部给弄出来，然后分别要进行一个替换。

![](img/d9ab133e6fc4574b5058034085f6ceaa_76.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_77.png)

哦，我们跑到这个地方啊来完成一个替换。假如说这样一个I get，还有说个I get说的话会以转成I get quit的话，哎，那么在这里就把一个I get quick给单独抽取出来。

并且用这样一个方法来进行一个重写。那么重写的时候也是一样的。哎把它相应的代码哎给重新给弄一下。那么这里就是分别来进行一个代码的一个转换进行一个修改。那么下面的话还会以对它使用到了一些参数啊。

函数这行修改，然后分别把它对应的原则OO给弄出来。哎，那么在这里就把假如我们原来的那它一个代码是一个类型的话，就把它一个I get get话给转成一个I get的一个形式。

那么通过这么一样这么来的一个转换的话，哎，把它能够修复来OOK扣大码块哎，都已超都超不多都能够给修复出来了。呃，至少这个脚本的话目前来说还是挺好用的。

对于这样一种O在样一种单ry的模式下的一个脱壳来说的话。呃，具体的一个解法哎，可以看一下的话，你这里面也没有使用到多栏的一个呃，也没有使用到多蓝的一个方法。那么只要有一个一定的编程基础的话。

我相信都是可以来看得懂的哈。那么这节课的话的内容就大概到此为止，谢谢大家。

![](img/d9ab133e6fc4574b5058034085f6ceaa_79.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_80.png)

嗯，好的，那么现在的话对第348课做一点小小补充。那么在课程上说已经讲到了我们的一个一个反变工具里面呢有一个杠叉的一个参数。那么这个参数的话，它里面就需要用到一个boot load才能够正常一个启用。

那么唉这里面的话。

![](img/d9ab133e6fc4574b5058034085f6ceaa_82.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_83.png)

那么这样我们可以通过使用这样一个杠低的指令来使用这样一个导出这样一个foro数据。那么这样一个foro数据的话，为什么这是什么来的呢？其实这一个话就是一个安卓系统中，它本身所加的一些ds文件。



![](img/d9ab133e6fc4574b5058034085f6ceaa_85.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_86.png)

我们这些ds文件话是通用的。那么它进行反变的时候，需要用到这些数据，才能够确认我们的1个ODXX中的一个数据是怎么样的一个样子的。那我们进入到项目录中来看一下。这个布鲁可数据到底在哪？

那么其实哎这个后续就存在于系统的一个。system部录下的一个飞沫洲。哎，我们来看一下里面的框就存放着各种1个JR文件。那么这些JR文件的话都会以呃对我们的1个ODX的产生。

来说它的一个使用来进行一个修改了。哎，那么在这里我们就需要把这个目录下所有文件给导出来，然后用到一个杠叉太塑造才能够正常的进行一个使用。我么在下面下面下面我们就把它的数据给布出来。



![](img/d9ab133e6fc4574b5058034085f6ceaa_88.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_89.png)

好，我们在这里就是1个AV到户的一个指令。那后然后里面的靠就是frame末，然后第二个参数是指明我们的一个目标文件夹。



![](img/d9ab133e6fc4574b5058034085f6ceaa_91.png)

好，那么在这里就把它的一个售后数据给倒出来了。嗯，这边的话，那么大家在那下面自己登账时候的话，注意一下，把它的文件夹给东子明出来。我现在不小心都把它动到一个木录箱上面去了。

我们接接下来就行一个更差的指令，来尝试着去完成1个ODS to ODNNX的一个转况。好我下BS，然后里面这个降低来指定我们那个不ro的一个数据数据。然后哎里面的话就是我们需要转换的1个ODX的文件了。

然后把它还是一样，后面的话是一样的，干过的话就来指定我们输最终输出来的一个目录。好，把它转成一个后机。嗯，前面的话还需要用一个更差的一个指例才行。哎，那么这么一来，哎，这个指令就能够正常来进行一个执行。

并且经过它转换以后的话，就转到了这个文件中去了。嗯，后E点1X我们找一下它在哪。哎，它就转换成哎，它就编译成像这种形式。那么我们接下来这用一个文件比较工具。

把这个给和我们使用一个优化的一个使用脚本跑出来的一个文件数据进行一下对比。

![](img/d9ab133e6fc4574b5058034085f6ceaa_93.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_94.png)

对样，那么这里就是一个。他文件比较，我看一下有一个文件，这有一个文件不一样，那我对比一下不一样的地方。



![](img/d9ab133e6fc4574b5058034085f6ceaa_96.png)

哎，里面的矿其实就是一些。里面真实代码是一样，只是少了一几行出字而已。哎，就是差了这几行出字而已。那么这么一来，哎，证明了脚本和我们的这样一个导出一个规末的一个文件。

然后在进行所有一个杠叉参数进行背译的时候，哎，它的效果是一个类似的啊，所以这样一个一来跑脚本其实是可以非常放心的一个跑。



![](img/d9ab133e6fc4574b5058034085f6ceaa_98.png)

啊，对一些基本的数据都可以这样进行一个本末完成。那看假如假如我们是登出了1个OTEX数据，那么由果不想跑脚本的话，哎，就要使用套它的一个杠叉参数，还是一要把费用的数据给全部登出来。

然后在下面使用一个杠低的一个数据来进行一个指令。

![](img/d9ab133e6fc4574b5058034085f6ceaa_100.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_101.png)

才能够完成一个正常的一个反映的。好，那么这里就是一个对于课程中所讲到的一个杠差的一个参数的一个补充。那么下面的话我还有点时间的话，就来讲一下我的这个脚本它是怎么样进行一个跑的。



![](img/d9ab133e6fc4574b5058034085f6ceaa_103.png)

呃，就大致的来讲一下呃，在课程中的话，呃，大前杰克已经说到了这样1个OP code的一个转换。我们在这里其实可以发现的话，这样的OP code转换是一定的规律的。

首先是这样一个OP的1OOP的一个I的操作，那么它都会统一可以转换成这样一个OP的一个代码，就是后面带一个qui或者说什么之类的。但是哎它正向转换的话。

只是把这5个123455个OP code来转成一个。那么我们逆向可以转回去的时候的话，就涉及到1个111对多的关系了。既然是一对多，我们就要区分出来。

到底我们应该把这样1个Iqui的一个原始代码给以转换成它们之间的哪一个地方了。

![](img/d9ab133e6fc4574b5058034085f6ceaa_105.png)

那么这个脚本做的方法也是一样，把定位到它的一个一个code的区段，然后获者它的1个OP code代码，还有它的一个长度，然后分别变历枚句枚句代码的1个OP code的一个属性。

然后把它应该怎么转换给分别给列出来。哎，就以这样一个5由由5来变异的一个变化的一个立项来说吧。哎，假如它是1个OPI键的一个方法。



![](img/d9ab133e6fc4574b5058034085f6ceaa_107.png)

![](img/d9ab133e6fc4574b5058034085f6ceaa_108.png)

我在这里我就定了一个表出来，哎，这是一个会必要的一个转换。那么假如是遇到这个函数的话，这个遇到一个IKQ函数的话，那么它就会调到这个方法来进行一个逆转换。

那么这个方法里面哎就把我们的一个OB code要优化代码，还有说它的一个立向代码，给全部给弄一遍。比如说I get one，比如说I get什么的话，就可以转换成I get。

然后一个one的话就可转换成Y。然后里面再进行更加详细的判断。比如说这里有个 get和 get和 get short。那么他们这样区别就在于它里面I get参数的话指向是一个class over类型。

然后这里的布量的话，它参数是一个部类型。那么这边是差需要的一些类型。那么接下来就只需要对它的一个OP的一个参数的一个类型进行进行一下判断，看一下是一个整数呢，还是个。

甚至说是一个串还是一个其他一个送的类型。那么根据这样一个参数判断的话，就能够知道它原始的一个字节码到底是一个怎么样的类型。那么这么一来就能够完成一个一映射上的一个转换。哎，那么这么一来呢。

就能够完成一个逆转换。哎，下面的话就是只需要把它的一个OP code来进行一个重写。那么这么一来这么一来就完成一个逆向的一个变化了。那么对于下面的其他函数，其他的一些指令哎也是一样的。通过这一块表。

还说它的一些一些参数的一些辅助的数据进行一些判断化。就能够把它的一些左焊都基本都能搞得定。但是注意一下这个脚本的话有一些不完善的地方，因为有一些代码哎，我目前还没想到怎么去修。那么所以。

遇到有遇到有一些OP库文的话，可能会修附不上的。我这里修复不了的一个代码的话，就是主要还是使用一个呃主要是这种形式的，就是使用这种qui形式的一个代码。哎，想不到什么修复。

还有另外一种就是这样一种的一个代码。目前也想到什么修复。哎，那么他暂时的处理的话，就是像上一节课那样，把它优化选项给全部给干掉。哎，把这些选项给干掉的话，那么它就不会完成下面的这些优化。

完成下面的一些转化了。

![](img/d9ab133e6fc4574b5058034085f6ceaa_110.png)

既然它不会完成，那么也不需要进行一个优化了。那么这里的I quit，还有说一个Ivol。那么这两种情况它也是一样，是有一个优化选项来决定的。

然么它就会根据我们的优化选项来决定到底使用它最终以哪种形式来转换出来的一个数据。

![](img/d9ab133e6fc4574b5058034085f6ceaa_112.png)

那么这些呃讲节课所说到一些修改，或或者说什么的话都是有它一定的一个道理的。那么在这里的话就是这个脚本中哎所用到的一些数据。大，可以看到下面前面还有一些case的标签。那那么这个脚本的话还没写完。好。

那么这一些啊这一些的话就是对这一节课内容的一些小小的一个补充。好，我们就到此为止，谢谢大家。

![](img/d9ab133e6fc4574b5058034085f6ceaa_114.png)

🎼。

![](img/d9ab133e6fc4574b5058034085f6ceaa_116.png)