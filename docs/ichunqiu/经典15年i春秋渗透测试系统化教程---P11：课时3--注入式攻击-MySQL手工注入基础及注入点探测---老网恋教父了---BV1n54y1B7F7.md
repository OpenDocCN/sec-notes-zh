# 经典15年i春秋渗透测试系统化教程 - P11：课时3  注入式攻击-MySQL手工注入基础及注入点探测 - 老网恋教父了 - BV1n54y1B7F7

好，这节课我们来讲解一下这个麦SK这个注入进去。大家都知道mySQ这个呃。这个数据库啊在微博应用程序。程序中使用的比较广泛。呃，中小型企业啊，包括大型企业啊。

都基本上用这个现在大部分都是卖SK的数据库啊，是基本上是最广泛的吧。与其他的数据库应用啊，它是在微博应用程序编写的过程中啊，如果对用户提交的这个参数。未进行这个过滤或者过滤不严。

就会导致这个SK这个猪肉攻击这种查生。呃，该欧克赛啊。嗯。喂养的瘦不瘦啊都是一样的。只要这个微博程序没有对这个我们用户提交的这个参数啊。呃，进行过滤啊或者过滤不严啊。

都会导致这个最终会导致这个SK的注入。那么这个麦SK这个数据库啊，通常它是一般是啊我们前面第一节课就讲过，它一般是与PHP网页程序搭建网站的平台啊，一般的跟PHP结合。那么各大门户网站都是采用的。

基本上都是啊PMISKPSP。啊，你像DJ呀、PHPCMS呀啊其他的一些类型啊，DED呀都是采用这个。买SK加PSP的网站。啊，这里也举例了啊，新浪网易tm啊都是采用的这种模式。

那么所以说啊MSK的数据库啊，这个这款数据库的注入啊是。比较重要的就是说你要学SK首那数据库注入啊，注入进去，那么一定要对这个mySK的数据库啊。要了解，要知道他是怎么去。注录的包括他的这个语法啊。好。

现在我们来看一下这个MQ的这个数据库的常用这个注入攻击进去。MSQ它有分为在我心中分为两个级别，就是说一个是MK5。0以上，会包括包含5。0。还有一个就是在4。呃5。0以下，就是说MSQ4。

包括以前的版本。这种跟那个嗯新版本的这个迈SK的5啊是不一样的。就是说他在注路的时候是不一样。在MSK4以及以前的版本，它是。不支持这个只语句查询。

也就是相当于当我们这个PSHP1点INI这个配置文件这个最好这个文件是我们的这个嗯。

![](img/d676bcc3f188c51d567e3d11a27e92d8_1.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_2.png)

在PSP这个里面。它是有这个文件的，就说我们搭建PSP环境的时候，它有一个这个PSP点INI这个文件。



![](img/d676bcc3f188c51d567e3d11a27e92d8_4.png)

如果这个文件看在这个文件，你查找这个啊这个参数就是在这个这个这个文件里面有一个这样的参数哈，你自己看一下啊，这里在后面会讲解框自接注入的时候。默认是开启这个on状态，也就是说。也就是说。

当我们用户提交这个单引号的时候，或者按语句，按一代一啊，一带二的时候，它都会过滤啊，以及包括防斜杠按的语句包括呃空字符等纬线字符。他都不会转一成什么一个仿斜杠，就是这样的一个仿斜杠。

换些讲就叫做转移转移之付。这个转移，这样的话你。对我们这个注入更加带来很大的困难。到后面我会会教大家怎么去突破这句啊。啊，都会转移转移了，你就没法注入啊，因为单以后也转移的是吧？双音还已转移了。

and的也转移了，空制空字符也被转移了，那你怎么注入没法构成这个SQ语句吗？所以由于这个推行导致许多管理员。认为这个myQ这个数据库是比较安全的。然而事实上啊安全是永远相对的，就是说漏动于这个攻气危胁。

它是。决定。存在这个是绝对的。那么这个呃后面我会单独给大家讲解这个。怎么样去？突破这个单引号，包括这个开启了这个模修符，或者其他的函数呃进行过滤啊，怎么怎么去突破。那么在MXQ5的版本中。

那新增了一个这样的一个表，一个这样的库啊。啊，这个库这个库是成据了这个数据库的这个信息内容。我们直接可以通过这个库，这个库里面哈，注意哈这个库它是存取了我们所有的麦Q数据库里面的这个。网站的所有表啊。

都是都是保存在这个库里面。都会增加都会沉储在这个里面。所以说针对mySQ的我。我们不需要暴力破解，直接可以通过查询这个库。到到这个库里面查表，查表表里面查字弹，字弹里面查用户密和密码。

所以说报库报表报字弹啊。被这个麦SK的注入攻击极为简单极为简单。呃，这节课主要是针对这个我们这个MSQ5版本。啊，包括以上的版本来进行做的登记。M克。四版本包括4以下，包括5。就是反正是5。0以下的吧。

5版本以下MK的。他这就攻击进去了，只能采用这个什么某个30这用的这这种方式来进行查询。拆解他没有其他的好的方法啊，到目前为止，他只能暴力破解这种方式拆解。啊，通过欧德拜啊。得知这个当前表的自段数啊。

再通过联合查询啊，查询我们想要的数据库啊，一般的是。啊，当我们使用这个联合查询查询数据库的时候，如果你不知道数据库存的表明或者知道名。或者是对方的管理员，现在很多管理员喜欢把这个库里面的这个表名啊。

知道名啊都改了。修改过了。这样的话真的很难。那值能像这个Os一样。嗯。餐。手工猜这个菜怎么猜？你可以通过明小子啊、阿D啊。米小子D卡里面有很多默认的这个常建的这个。数据库里面这个表字到你。来进行碰的。

啊，这个一般的是什么A店面啊，右手啊是吧？Sad啊这样的一个自动呃这个表明啊，包括自动名。而自动名的话一般都是username pass with或者user pass。啊，一般是这种，所以说。呃。

你通过这种模式来进行拆啊，跟O克一样，回家之后你自己去看看。看一下欧克萨斯这节课这个数据库怎么样去裁解。这打错了。好，现在我们来看一下MSK的5的8倍助读器。嗯，这把先不看吧。等一下，你们自己看一下。

后面我们直接来。后等一下马上就会讲到这一块。好，现在我们来实战的给大家讲解一下这个my scale。嗯，如何去。输入攻击啊受工注录攻击哈，直接。这东拉到微不睡了啊，拉到微不睡了，在本地来调试啊。

一步一步的来。工具是怎么样去实现的，你一定要必须要知道。好，我们先看一下啊这个mySQ这个数据库的注入点怎么样去探测。他这个判测方法一样。通过单引号或者按照一等于一一等于2来进行判断。



![](img/d676bcc3f188c51d567e3d11a27e92d8_6.png)

呃，这里我们来给大家。看一下。呃，打开这个娱个乐洞的程序啊，那么这里我用DVWA。嗯，他在猪路。程序的进行给大家演示啊，那种程序演示。那么这个地方我知道这个ID。这个地址一般呢我说过，前面就讲过了。

把带参数的都可以测试一下。嗯，后我这里知道这个地方是存在注入点，这个注入点如果碰到，一个是手工。就是在这里加一个单引号。来回抽一下。然，这里这里不能这样，这里闭合成真了。所以我们要构造一下，让他报错。



![](img/d676bcc3f188c51d567e3d11a27e92d8_8.png)

这样的话就报错了，你看到没有？多了一个打引号码。他这里加个单以后，他就报错了。你看没有，他出错了，出问题了是吧？报出报报报出这个MQ了。



![](img/d676bcc3f188c51d567e3d11a27e92d8_10.png)

那我们返回一下，那么这就是这么操作啊，或者是你在这里。嗯，啊对一等于一啊，按对一一等于2都可以。

![](img/d676bcc3f188c51d567e3d11a27e92d8_12.png)

一等于一是吧？哎，这个地方真的。呃，嗯这里应该一个单引号。

![](img/d676bcc3f188c51d567e3d11a27e92d8_14.png)

要闭合一下哈，你可以在这个地方。看一下源代码啊，他这个。必须要闭合啊，当然这里这个单一号可以不要吧，应该。啊，是可以不要的。呃，呃，这个是什么呢？这个一个加一般是连接符号，这个是注释符号。

那其实这个你不要不要无所谓，这个你加一个单引号就行了。

![](img/d676bcc3f188c51d567e3d11a27e92d8_16.png)

嗯，这样行就报错了啊，还真的必须要。

![](img/d676bcc3f188c51d567e3d11a27e92d8_18.png)

哦。如果当当你等于二的话，他就报错，你看看不一样，对不对？这就是你看这个地方是吧？一等一这里有。它页面是不一样的，你看。所以通过这个。返回的这个页面不一样，就碰到这个地方，百分之百是个注入点啊，注入点。

所以说碰断方法是什么？嗯。这个图啊不对呀，后再的对是这个语期。哦，这里应该是一等于2。啊等于一都可以嘛。这个无所谓。



![](img/d676bcc3f188c51d567e3d11a27e92d8_20.png)

就载这张图吧。啊，这个无所谓。嗯，我把这个图摘下来，贴在PPT里面。

![](img/d676bcc3f188c51d567e3d11a27e92d8_22.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_23.png)

是那个一个。我们也复制一份。好，我们在这里就给大家说了啊。首先第一步探测注入点，就是说这个地方是否存在注入点啊，一个是大引号，一个是按照一等于一一等于2。



![](img/d676bcc3f188c51d567e3d11a27e92d8_25.png)

那碰到啊是否存在注入点？第二部分我们注入点这个类型的框洞啊，类型的碰挡。这个是很重要。就是说这个站点我们要碰到他是。



![](img/d676bcc3f188c51d567e3d11a27e92d8_27.png)

地车住路还是。pos猪。哦，不是不是。

![](img/d676bcc3f188c51d567e3d11a27e92d8_29.png)

呃，这里是数字型字注入，还是这个字符型注入，还是这个。搜索喜注，对不对？所以我们在这里要需要碰到。不能我们这里一般都在这里直接敲的，一般的是怎么get。盖头住。那么在这里我们。

直接给大家在这里一般的情况下，如果是数字性注入。先讲第一种。注入注入这个类型它也分为三类哈，一般三类。一般的是这种啊，如果数字性注入，它是sn克信号f来自什么？右手will IDD等于这个啊。

就是就是这个我们带入进去直接来进行一个。

![](img/d676bcc3f188c51d567e3d11a27e92d8_31.png)

就相当于我们这我们这里有一段代码。看一下这个实力。

![](img/d676bcc3f188c51d567e3d11a27e92d8_33.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_34.png)

你看一下这里。哎，不对。😔，就是我们这个接受各者传递的值这个ID呀。是数字型的啊数字型的。这个数字型的大家可以看啊，把这个列容，我们这里输入1个ID等于一。直接传递给他吧，对不对？啊。

他直接在这里带入这个查询吧，这个查询是什么？是那个星耀f来自右手表well条件是什么？ID等于这个。你看没？ID等于这个就是我们get传。方各种方式传递的这个值啊。那么。当我这里输入一的时候。

他其实他这个地方就是等于一。其实在这个。MSK楼里面。执行的是这条语句，s信要 from use will IDD等于1。它是这么一种模式哈，也就是说我们在这里你可以看一下。啊，用这个工具来查询一下。

啊，新建查询。但然用为命令好像都是可以的那我希望用这种规具。哎，查询有问题啊。信号不有ID等于1。那等于20。查询所有来自。哦哦哦，这个地方。又是。难道这里要加分号吗？好冷啊。打开这个库。这样吧。

我们登录这个库里面看一下。好，我们登录进去。打开这个mK。

![](img/d676bcc3f188c51d567e3d11a27e92d8_36.png)

嗯，这我我记得有个CMD了。更。呃钥子。打开SK的这个库。打开这个库之后，我们查选。

![](img/d676bcc3f188c51d567e3d11a27e92d8_38.png)

查询是slake9。新号查询所有。可lum。来自右手表。条件well。

![](img/d676bcc3f188c51d567e3d11a27e92d8_40.png)

好这是没问题的。是吧。你这个工具怎么怎么回事？我们来看一下这个工具到底怎么回事。

![](img/d676bcc3f188c51d567e3d11a27e92d8_42.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_43.png)

S scale。打开是吧。查选一下新建查选。snakes。信号。查询所有来自f。钥手表。会了。快啲。等于。一。哎，可以可以啊，刚才刚才怎么出问题了？好，现在是没有问题啊。



![](img/d676bcc3f188c51d567e3d11a27e92d8_45.png)

啊。那么大哥你看到这里。他这个地方是不需。如果是数字型的，也就是说我们在这里。

![](img/d676bcc3f188c51d567e3d11a27e92d8_47.png)

讲到的数字性猪落，它是不需要加什么引号的。就是说我们这个地方。

![](img/d676bcc3f188c51d567e3d11a27e92d8_49.png)

然后引起来。也可以看这里就看出来，这是数字型啊数字型。

![](img/d676bcc3f188c51d567e3d11a27e92d8_51.png)

啊，数字性他不需要，就是我们在查询的时候。这个地方啊用眼用用这个。当然后。他是没有的。

![](img/d676bcc3f188c51d567e3d11a27e92d8_53.png)

所以说这个一看就是数字型啊，什么是数字型？

![](img/d676bcc3f188c51d567e3d11a27e92d8_55.png)

啊，这是数字性注路。所以说大家会看到就是很多教程，网上很多这个视频教程。看到对方在助路的时候。

![](img/d676bcc3f188c51d567e3d11a27e92d8_57.png)

啊，直接在这个后面是嗯，对，一等于一是吧？啊，one day一等于2啊，那么这个是。这里前面没有加什么单引号的，一般就是一看就是数字形注啊，这是数字形注。那么第二种。



![](img/d676bcc3f188c51d567e3d11a27e92d8_59.png)

还有一种。第二组。这是字符型侏入啊，字符型侏。那么这个字符型侏入它它是什么样子，什么样子嘞？这我爷爷有一个家。



![](img/d676bcc3f188c51d567e3d11a27e92d8_61.png)

给大家看一下。

![](img/d676bcc3f188c51d567e3d11a27e92d8_63.png)

这里我定义的一个随手型，一个一个是这个。自负型。速度。那么字不形你看到这里，这里定一个吧，get错。嗯。就是我们只接受这个get出来的这个。参数复制给这个类目这个变量。那么这个类目这个变呢，你看到这里。

这个是n个语句。先要啊查询所有来来自右手表物要条件是什么？右手name。等于。就是这个用户名。这个这个是。这个这个这个变量是他。通过他复制给他了给这个变量。再其实。你看到这里。

当我们如果复制一个一给N的时候，那么内目也等于一吧啊也是一吧，它是这个一吧。但是它你看到这里有一个。等然好吧。两个单以后是吧？一边一个单以好吧。啊，我们付付。负的值是在什么？单引号里面吧。

那么这种它是什么字符型的啊，它是字符型的注入。那么这种注入你你可以看一下。

![](img/d676bcc3f188c51d567e3d11a27e92d8_65.png)

也可以给你演示一下。设置点PSP。那么这个地方的话。

![](img/d676bcc3f188c51d567e3d11a27e92d8_67.png)

换好。零。等于。嗯等于。那么我看一下这个语句，这个语句是查询。查询usname啊usname。嗯，类目的就是名字的。那么名字我们在这个数据库里面来看一下。



![](img/d676bcc3f188c51d567e3d11a27e92d8_69.png)

要す。啊这个名字。嗯。这个名字有有bs一b2b3是吧？那么我们在这个地方。

![](img/d676bcc3f188c51d567e3d11a27e92d8_71.png)

输度例如我要查被色一用户。这样的话可以查出来了吧，用户名密码啊。你可以看到有第二条、第三条123是吧，12base328，这里是不是跟数据库里面一样，查询出来一样吧。哦。那么这一种如果你想注入啊。

如果你想对这些。这一看是什么，这个是字符型注入吧，字符型注入你想怎么注入啊？你如果在这里说过当以后呢。你看。或者是说你在这里。嗯，等一等于1。是这种情况好，认真看好。反的一等于2是一样的页面。

没有发现问题。你看到这里，真正的其实我们。按照一等于一一等2或者是大引号，在他单独到数据库里面查询的时候，你会发现。他是查询的，最终查询的是是那个星号f来自这个右色表。

条件是右色name等于这个你看到没有？这个渔据没有去执行。这一节的这个语句没有执行，你看到没有？它用单引号把它引起来了。所以说在单引号里面的这一这些语句它是没有，它是不会被执行的啊。不会被执行。

所以我们需要构造。啊怎么过造嘞？所以说我说我字符型跟数字型注入还是这个搜索型注入，它是都不一样的。他这个注入方法是不一样。所以说我一为什么为什么。



![](img/d676bcc3f188c51d567e3d11a27e92d8_73.png)

第一步教大家怎么样去碰断注点。第二步怎么样去。让大家知道。输入类型的这个碰的啊，怎么去数字线怎么注入字符线怎么注入啊，舒字性怎么注入那么这个字符形注入我们一定要你看到这里就知道了啊。

这个真正的带入到数据库查询里面，是这种它不会被执行的啊，我们的这个按的语句是不会被执行，这里当做一个什么字符圈里直接那个了。



![](img/d676bcc3f188c51d567e3d11a27e92d8_75.png)

好，我们来看一下，所以说我们需要什么怎么做啊？嗯，在这个地方，被一这个后面啊。再一个单引号，就是闭合前面的这个单引号啊闭合一下。好，我们再来看一下。好，这个时候你看到没有？啊，这样的话。

这个安的语句一等于2，其实这个地方。这里还有一个单印号是吧？这里还有一个单音。是这样没关系了，已经你看一等于1。一等于2。是吧。那其实我们这里再加一个单音号呢。这内容一样。



![](img/d676bcc3f188c51d567e3d11a27e92d8_77.png)

所以这个地方其实我们这里也要。

![](img/d676bcc3f188c51d567e3d11a27e92d8_79.png)

应该是后面需要还加一个单引号，就是闭合闭合跟这这一对跟这一类是闭合的。或者我们在这个地方嗯。加个注释。就一个单引号吧，单引号一样的。就可以了。



![](img/d676bcc3f188c51d567e3d11a27e92d8_81.png)

啊，如果我们。

![](img/d676bcc3f188c51d567e3d11a27e92d8_83.png)

接着我们下后面的讲解啊，如果你想。呃，查询。就是说我们用嗯其实这里有多少个字动，我们的活度掰一下啊，活度 by这里我也粘了个图。



![](img/d676bcc3f188c51d567e3d11a27e92d8_85.png)

啊，你可以在这个地方。呃，单一号在这个地方。好度。换DR。获得半，我上碰到几个子导。这个地方我。正确六呢。



![](img/d676bcc3f188c51d567e3d11a27e92d8_87.png)

不对呀。这个地方有问题。

![](img/d676bcc3f188c51d567e3d11a27e92d8_89.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_90.png)

那我不知道。Sles。我用联合查询嗯查询一下试一下。12345。我们把这里。

![](img/d676bcc3f188c51d567e3d11a27e92d8_92.png)

找一个代替一下，我们看一下吧。

![](img/d676bcc3f188c51d567e3d11a27e92d8_94.png)

哦，他这个地方也是要一个档一号。

![](img/d676bcc3f188c51d567e3d11a27e92d8_96.png)

先碰了一下我 do。我都办。6的时候看到没有？看以自动。我对手看他的页面的变化啊，现在这里有个15。五。这个自动还没测试出来。还是有问题。都一样的。



![](img/d676bcc3f188c51d567e3d11a27e92d8_98.png)

我们试一下啊。嗯。查一下右手。还是可以查询的。哎，我们用old by查询old by语句的彩色自动的时候。



![](img/d676bcc3f188c51d567e3d11a27e92d8_100.png)

怎么。您看啊，因为右手是吧，我们大地在这里查选，他查选出来了。你睇嘛。哎不对呀。在这里你看到没？路侧出来了。



![](img/d676bcc3f188c51d567e3d11a27e92d8_102.png)

如果我想查询这个版本号。版本好。那么我们把这里换成。VERSSIO版本意思。好，这说明mySK的版本是这个5。1。5。0。好。那么我们这里呃。我们再试一下，我都办好。怎么怎么那。😔，偶尔。



![](img/d676bcc3f188c51d567e3d11a27e92d8_104.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_105.png)

也没错啊，这语语句也没打错，o豆半。

![](img/d676bcc3f188c51d567e3d11a27e92d8_107.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_108.png)

看到底哪个地方出问题了。那是这种情况。30。应该是看下面，因为哦他这个地方。嗯，这置第三行，第三行是我们这个报酬，不用管它好，是你可以把它注释掉。第三行是这一行。

最好的话是我等一下模拟这个搜索型这个注入。啊，现在因为这个参数还没有复制，所以报成造成这个地方报错啊，要报错。25个字道。哦我的外语就测出这个字动，在这里还真的看不太出来一样。自道有我10个。我50个。

真的看不太出来。

![](img/d676bcc3f188c51d567e3d11a27e92d8_110.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_111.png)

好，我们呃大家一定要知道他这个地方是个。嗯。字符星注入就行了。就是说字符星怎么样去注入。呃，但是在这个地方。嗯，大家可以看到这个地方。那看不太出啊，其实我们。



![](img/d676bcc3f188c51d567e3d11a27e92d8_113.png)

呃，用这个DJ啊，它其实也是一个字符型的，因为它闭合这个单引后。呃，在这个地方，你看我加一个单引号是吧？你在这个地方我们来使用欧do拜。2DR是吧。好到噶。一页。到。是吧。我们再看人生。呃，不是不是呃。

在这里。呃，我们输入5。

![](img/d676bcc3f188c51d567e3d11a27e92d8_115.png)

看看报错了是吧？报错了。3、还是报错是吧？

![](img/d676bcc3f188c51d567e3d11a27e92d8_117.png)

么啊。啊，正常。啊，说明我们当前是有。两个字段可以写啊两个字段可以写可以，反正这种方法就是这样啊，这个是字符形啊，字符形怎么样去注入啊，是这么样去注入的啊，是这么样注入的。好。

现在我们来看一下搜索型怎么样去注入。

![](img/d676bcc3f188c51d567e3d11a27e92d8_119.png)

搜索性。注意啊，这个单引后一定要闭合哈一定要闭合。其实我们这个写的是okK的，没有任何问题啊。包括我们刚才拿第一个时点啊，用这个优的啊sck语句去查询。查询他的这个版本啊。啊。

当前的这个MSQ的这个用户啊是吧？入手用户啊，版本号啊，5。05。1的版本啊都能查询出来，是没有存在问题。后面这个单引号记得也要闭合啊，闭合一下。好，现在我们要看一下岁数性啊岁数性。

那所以说请你看一下这个代码里面。

![](img/d676bcc3f188c51d567e3d11a27e92d8_121.png)

怎么去做的？你看这。啊，这个是搜索性。搜索型它这个当我们输入关键字的时候，带入这个pass这个变量的时候，那么查询是查询所有来自这个表用户表的又是这个表条件是password啊，就是密码啊密码。

那么在数据库对应的是这个password这个密码啊，这个密码来自passwordlike像这个什么pass啊。



![](img/d676bcc3f188c51d567e3d11a27e92d8_123.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_124.png)

au版他这里还有一个au by语句，你看。呃，这个就查询我们这个这个密码。啊，像什么像什么这个百这个有个版分号嘛。那么这个。他这个这个变量就是这个P啊，就是我们等一下有个P参数，就是我在这里。你个屁。

看仓鼠。其是这样子，但我们在这里输入东西啊。这个举个例子吧，比如 best。啊。就是说当我输入这个bast。这四个字母的时候。那么他就会到数据库里面找找什么。



![](img/d676bcc3f188c51d567e3d11a27e92d8_126.png)

总含有这个被色。

![](img/d676bcc3f188c51d567e3d11a27e92d8_128.png)

还有这个贝斯特的。他把它找出来，把它显示出来。那我们输入这个关键字。这杯子。给这个。变量啊，给这个变量，它的条件是查询这个密码哈，密码性这个bst的。因为我这个密码呃都是为basedst的吧啊。

举个例子，我这里查1个123。

![](img/d676bcc3f188c51d567e3d11a27e92d8_130.png)

那么你看他。再查询一下啊。保存一下。你看。变成两个了吧，你看。白死贝事，刚才还有一个背诵没了吧，这个密码，是不是？如果我再再改一个密码嘞，那么它就变成了什么两个一个了吧，再如果再改一个是吧？在数据库里。

因为我这里数据库里面只有做测试嘛，只有三条记录嘛。

![](img/d676bcc3f188c51d567e3d11a27e92d8_132.png)

所以我所以大家一定要注意哈，他这个什么。加了一个这个它这个是像啊，就是说查询的时候是个模糊查询，那个是像的意思，就是查询这个password这个字段啊，password。



![](img/d676bcc3f188c51d567e3d11a27e92d8_134.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_135.png)

嗯，这个。还有什么？那个是像的意思。这里两两边有一个什么百分之号。啊，百分后就是说他的意思是只要这个数据库里面。



![](img/d676bcc3f188c51d567e3d11a27e92d8_137.png)

数据库里面有。有半s，或者或者是说我把它改成be一的。你说他这个地方最终是什么样子？好，我们来看一下。你看。他都会查询出来。密码背注页。还一个密码是baseds。也就是说只要含bs的。他都会查出来。

你不管你背诵后面123或者前面加1个123或者456。只要有这个。它是一个模糊查询，只要查到这个密码里面。你不管12位、30位密码，只要里面有bst的，它都会显示出来。就是说呃他是这个意思。

就是说他这个百分号，他这个模糊查询，模糊查询就是说还有这个。在摆分货里面。然后里面的这个关键字。它是一个模模糊的，就是还有这个人在数据库里面。都插选出来。啊，当然你这个条件未要条件是针对哪一个？

表里面哪一个字段啊进行查选。好，那么它这条语就是那么我们在注入的时候啊，针对这种类型，那么我们怎么去注入？



![](img/d676bcc3f188c51d567e3d11a27e92d8_139.png)

针对这种的怎样去做？我们把这条语句，这条语句其实。是这种的是吧？哎，我操没复制出来，我这里复制出来了。啊，在这里你看一下。你看。嗯。提前已经做好了。Next个。like克 pass是吧，这种类型。好。

我们来分享啊，复制出来之后。你一定要分析这个源代码啊，当然你这个呃在真正的渗透测试过程中。你不可能看到对方的这个元旦嘛，那么那个那么需要你手工来进行构造啊，构造这个收售型筑路。

当然这个工具它自动会帮你构造，像像这个穿三角SK map，这里我只是讲的是手工啊，工具是怎么去做到的啊，教的是这方法。那么把这个语句复制出来之后，怎么去构造嘞？你看。

前面是sack新耀弗了我们来自这个啊，这个是保持不变啊。我有条件是pass位啊，这个字大啊like也是一样。那么这个地方。你注意这个地方。这个地方你是需要怎么操作呢？需要在这个地方。构造一下。

就是说其实在这里我们。我们在这里我复制一份是吧，给你看一下怎么安去。在这里重新演示一下，现在这个地方查觉里其实这个basedst吧，所以我们需要在这个地方。加一个百分差。这个版分号跟前面这个百分号。

闭合啊闭合。别个还有一个单引号吧，他这里他是成队出现的哈，单引号摆放。那么你在这里也要加一个单引号。啊。这样的话。这条鱼就是不存在问题了。那么后面你看看。后面还。不是还有一个百分号，一个单引号吧。

对不对？这个需要也是需要你。闭合啊，需要你闭合。这样闭合啊，这样闭合。那么这个地方是存在注入点吧，也就是说我们这个收缩型的注落。开始。在这个地方存在注落点吧，这个P这个参数吧，存在注落点两个。

那么如果是这个地方存在注入点。那么我们在构造语句的时候。那么他是写到这个地方，那么我们这个注入语句写到这个地方。怎么事。明也没有。啊，一定要搞清楚啊，那么这个时候我们在这里写什么优link。

就是这里我们我这里给大家写好了，那下面有啊是那个什么版本号啊。来进行查询是这么查询的。啊，不相信我们来试一下，看一下效果。把这个语句直接复制过来吧。嗯，这个是没有。没有问题。😔。



![](img/d676bcc3f188c51d567e3d11a27e92d8_141.png)

好。我们再来执行一下。报错了。P等于be啊，这个跟前面闭合unlink的查询。为选12345。这个是闭合的。



![](img/d676bcc3f188c51d567e3d11a27e92d8_143.png)

这个地方可写吧，应该是。

![](img/d676bcc3f188c51d567e3d11a27e92d8_145.png)

呃，前面是不是语句还不全，应该后面还有吧。

![](img/d676bcc3f188c51d567e3d11a27e92d8_147.png)

哦，这个地方搞错了。好，现在就可以了。在这个地方看到没？这样的话这个。

![](img/d676bcc3f188c51d567e3d11a27e92d8_149.png)

版本号MSK的版本号在查选出来的。前面一定要闭合一下哈，前面这个闭合。那么后面这一个。

![](img/d676bcc3f188c51d567e3d11a27e92d8_151.png)

其实我们后面这一个。就是跟那个我们刚才复制的这个语句的。

![](img/d676bcc3f188c51d567e3d11a27e92d8_153.png)

他是这么回事的。

![](img/d676bcc3f188c51d567e3d11a27e92d8_155.png)

像我们刚才刚才给大家解释过。点这个。闭合。最好。他这个看没有，他这个。他这个是跟这个闭合的。也就是这个一个。当引号有个百分之号，一定要闭合一下，一定要闭合。有冇得。在这个地方有一个。闭合的就是前后闭合。

你看一下啊，他一个在外面吧，一个是在里面吧，它是闭合的，它不闭合。他这个渔具有问题啊有问题就查询不了。所以说你这个。



![](img/d676bcc3f188c51d567e3d11a27e92d8_157.png)

这三一种，一个是我们这个数字性猪，一个是字符型猪，还有一个伸色型猪啊，一定要搞清楚。所以你在。

![](img/d676bcc3f188c51d567e3d11a27e92d8_159.png)

注入的时候第一步才是注入点，第二步是吧，你要。知道对方的注入类型啊是什么类型。分别。每一种类型。用不同的方法啊来进行注落。好，接着我们第三步。碰到注入点的这个提交方式。就是说他这个提交方式。



![](img/d676bcc3f188c51d567e3d11a27e92d8_161.png)

是给他提交还是pos提交，还是可就提交？他有这三类。啊，有有这三类。如果是get的形式，那么我们直接通过IE地址栏就可以实现了吧，对不对？这个没有任何问题的啊，就是就我们讲课过程中。

直接都是通过采用的是get。当然大部分都是get的啊，大部分都是get。当然还有两种就是post跟co角是注。这一种这两种提交方式，这两种提交方式一般的情况下是。在这个嗯。你想上传的时候。

这里有上传上下类的，要在这提交文件的时候。

![](img/d676bcc3f188c51d567e3d11a27e92d8_163.png)

你在这里抓个包。

![](img/d676bcc3f188c51d567e3d11a27e92d8_165.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_166.png)

通过BUP。打开你的BIRP。

![](img/d676bcc3f188c51d567e3d11a27e92d8_168.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_169.png)

188080。

![](img/d676bcc3f188c51d567e3d11a27e92d8_171.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_172.png)

一般的输账号密码的地方叫登录啊。输入用户名、密码登录这种地方一般的是。

![](img/d676bcc3f188c51d567e3d11a27e92d8_174.png)

pos的住还要上传的地方。我举个例子，这里上全了是吧，我们抓包代理一下。随便选个文件吧。

![](img/d676bcc3f188c51d567e3d11a27e92d8_176.png)

这一。先放醒一下。点击阿布杜。

![](img/d676bcc3f188c51d567e3d11a27e92d8_178.png)

好，你可以靠这里。这种就是pos的组，对不对？那pos速度它一般的在这个地方，他其实还有他这里还有一个数据档。还有数据呢，他这里还看不到数据。



![](img/d676bcc3f188c51d567e3d11a27e92d8_180.png)

对不对？😔，其实我们在这里嗯pos住它在任何一个参数里面。他都会有可能存在这个注入点。

![](img/d676bcc3f188c51d567e3d11a27e92d8_182.png)

啊，这个参数。这个地例子还不好。

![](img/d676bcc3f188c51d567e3d11a27e92d8_184.png)

我退出一下。我们登录一下。登录你可以看到。

![](img/d676bcc3f188c51d567e3d11a27e92d8_186.png)

好。抓包。登录。好。大家可以看这种一般登录情况下，他的。他那种作方式是pos，你看到没有？pos组。这种模式。跟ge轴不一样，就是说我们你没办法在这个IED指栏里面是吧？因为有些时候对方。

那个PHP代码里面定义好了，只接受po数据包啊，只接受这种pos。

![](img/d676bcc3f188c51d567e3d11a27e92d8_188.png)

就是我们后面会给大家讲课要是注路这首。等一下会讲解吧。你这PSP里面。他这种模式他全部接受，还有一种就是接受pos的。一般上传的时候啊。还是登录输入用户没密码，登录的时候一般都是poss宝。

还有一个是扣角色啊，还有一个扣角色。

![](img/d676bcc3f188c51d567e3d11a27e92d8_190.png)

所以说我们。在这个地方，如果遇见这种植入，你怎么样去注入手工的话，那么你只能把这个包。放到这个里面。在这个地方来测例如按，如果你发现这个右侧name这个地方是吧，有注入点是吧？那么你在这里加一个单引号。

那发现过一下是不是到底存不存认记入啊，那些不存在注入，那要返回什么页面跟那个我们这个。在IE里面ge记度是一样的啊，只是在这里来调试啊，在这里看结果啊，非常方便。一般的我都是通过BUIP来操作啊。啊。

来进行操作。所以说。这个参数是每一个参数啊是需要你自己来进行。调得好。啊，但以后啊安德语句啊来进行测，看是否有注入点。当然你可以通过工具啊穿山夹SKM麦A。AVIG啊这样的工具，这三款工具都是不错的。

直接把这个。把这个包放进去，或者是。你这样也行啊，这还有一种就是用这样。一般的一般的现在是。如果对方。



![](img/d676bcc3f188c51d567e3d11a27e92d8_192.png)

网站程序里面，如果对方网站里面程序里面才采用的是这种模式接受，但是在这个抓的包里面，我们是pos是吧？如果是这种情况，其实他也可以接受get。



![](img/d676bcc3f188c51d567e3d11a27e92d8_194.png)

![](img/d676bcc3f188c51d567e3d11a27e92d8_195.png)

啊，或者刻教时他都是可以接受的啊，都是可以接受。只是我们在提交的时候。

![](img/d676bcc3f188c51d567e3d11a27e92d8_197.png)

他这个地方写了个pos。那么像在这种模式下面。在这种模式下面，我们把这个地址构造一下，构造全面一些。扩到全面之后，我们在这里加个问号。加个问号，在问好之后再怎么做的？把这个啊。粘贴到这。

我们看一下能不能登录好。用户没是正确的吧，密码也是正确的。我们不要用BP拦截。好，我们试一下这种模式可不可以。你家。也是可以的哈。也是可以。没问题吧，没有报错，你看。报错了没有没有报错。

你看他是没有波s可以的。那么这种提交方式也是可以把它post变成get，或者是你你不变的话，有的是不行号，有的你在这里加个问号，后面接这个数据档。是不行的，有的是不行，主要是看对方的这个。

网站程序这个代码。

![](img/d676bcc3f188c51d567e3d11a27e92d8_199.png)

看这个呃接收的这个参数，它是采用的是全部接收，还是只接收pos，还是只接受扣就。

![](img/d676bcc3f188c51d567e3d11a27e92d8_201.png)

啊，看对方的代码来来进行确定。这个你根据你在这个渗透测试过程中踩是注入点的时候，你在这个参你这这样来进行变化，进行修改。如果是第三种，就是扣子式注入。或者是猪了，那么，你在这里来调。在这里。

它这里是有分要分开的哈啊分要分开的。那么在这里每跟这个pos一样，每一个参数来进行测，在这里加按的一脚，但以后这个都可以。嗯。有的是。嗯，例如。还有这样的ID等于一是吧？如果是这种是吧。

用get的形式的。如果这个地方是get。啊，是这种形式，当然你可以改嘛，改成gepos，你可以手工改的，这个都没问题。如果是这种的，但是这个地方做到防住，你可以把这个。把这个ID。

如果我确认这个ID等于一有注入点。啊，但是对方装到防火墙或者外夫。或者有一些过滤过滤的变车注入和po色注入。但是没有顾虑。这个或子是猪，那么你可以把这个。参数。加个分号放在这里了。来进行注入来进行测试。

在这里面你加入。后面加这个。语句注入语句啊注入语句。哪个地哪个参数有那我在哪个个参数后面。加猪肉渔具。



![](img/d676bcc3f188c51d567e3d11a27e92d8_203.png)

啊，就这么扯。这就是我们所说的。

![](img/d676bcc3f188c51d567e3d11a27e92d8_205.png)

第三部。判断注入点的提交方式啊，这三种方式手工怎么去操作好。所以说ge住的话直接在这个IE啊上面。pos的话有的也是可以直接在IE上面的啊，就是说前面的地址加一个问号，接这个数据上d特到。就可以了。

当然这个不一定百分之百可以，为什么为什么。关键是看。对方的这个PSB程序网站程序里面。他这个接收参数的这个方式，就是说采用的是全部接收还是pos接收，还是code就是接收，对不对？是接受ca就是的。

所以说。这三种模式你要如果采用手工的话，你自己来进行。可是这里我教的是这个方法和经验怎么样去判断。工具的话，它自动来识别啊工具。根据的话我。到时会拉SK的卖演是这三一种。都会给大家操作。



![](img/d676bcc3f188c51d567e3d11a27e92d8_207.png)