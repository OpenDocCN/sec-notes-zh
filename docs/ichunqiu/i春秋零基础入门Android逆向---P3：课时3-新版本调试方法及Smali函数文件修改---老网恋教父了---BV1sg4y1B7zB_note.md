![](img/ec6fffeb29c7be7bf9d552347e87ce56_1.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_3.png)

# iæ˜¥ç§‹é›¶åŸºç¡€å…¥é—¨Androidé€†å‘ - P3ï¼šè¯¾æ—¶3 æ–°ç‰ˆæœ¬è°ƒè¯•æ–¹æ³•åŠSmaliå‡½æ•°æ–‡ä»¶ä¿®æ”¹ ğŸ› ï¸

![](img/ec6fffeb29c7be7bf9d552347e87ce56_5.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸€æ¬¾æ–°çš„åç¼–è¯‘å·¥å…·çš„ä½¿ç”¨ï¼Œå¹¶æ·±å…¥æŒæ¡Smaliä»£ç çš„è°ƒè¯•ä¸é™æ€åˆ†ææ–¹æ³•ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®é™…çš„ç¤ºä¾‹ç¨‹åºï¼Œæ¼”ç¤ºå¦‚ä½•å®šä½å…³é”®å‡½æ•°ã€åŠ¨æ€è°ƒè¯•è·å–å…³é”®å€¼ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹Smaliä»£ç æ¥æ”¹å˜ç¨‹åºé€»è¾‘ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_7.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_9.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_10.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_11.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_12.png)

## ä¸€ã€ æ–°åç¼–è¯‘å·¥å…·ï¼šApktoolçš„å¢å¼ºç‰ˆ

![](img/ec6fffeb29c7be7bf9d552347e87ce56_14.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†APKæ‰“åŒ…å·¥å…·ã€‚æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€æ¬¾åŸºäºApktoolæ”¹é€ çš„ã€åŠŸèƒ½æ›´å¼ºå¤§çš„åç¼–è¯‘å·¥å…·ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_16.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_17.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_18.png)

è¯¥å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ä¸ApktoolåŸºæœ¬ä¸€è‡´ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ä¸”Bugæ›´å°‘ã€‚ä»¥ä¸‹æ˜¯å…¶åŸºæœ¬å‘½ä»¤ï¼š

![](img/ec6fffeb29c7be7bf9d552347e87ce56_20.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_22.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_24.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_26.png)

*   **åç¼–è¯‘**ï¼š`java -jar <å·¥å…·å>.jar d -f <apkæ–‡ä»¶> -o <è¾“å‡ºç›®å½•>`
*   **å›ç¼–è¯‘**ï¼š`java -jar <å·¥å…·å>.jar b <åç¼–è¯‘ç›®å½•> -o <è¾“å‡ºapk>`

![](img/ec6fffeb29c7be7bf9d552347e87ce56_28.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_30.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_31.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_32.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_34.png)

å…¶ä¸­ï¼Œ`-d` è¡¨ç¤ºåç¼–è¯‘ï¼Œ`-b` è¡¨ç¤ºå›ç¼–è¯‘ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_36.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_37.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_39.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_40.png)

ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å‚æ•°æ˜¯ `-df`ï¼Œå®ƒä»£è¡¨ä½¿ç”¨é»˜è®¤çš„æ¡†æ¶èµ„æºæ–‡ä»¶ã€‚Androidç¨‹åºåœ¨åç¼–è¯‘å’Œå›ç¼–è¯‘æ—¶éœ€è¦å¼•ç”¨å¤–éƒ¨çš„æ¡†æ¶èµ„æºï¼Œè¿™äº›èµ„æºé€šå¸¸æ¥è‡ªAndroidæºç ç¼–è¯‘ã€‚å¦‚æœæ¡†æ¶ç‰ˆæœ¬è¿‡æ—§ï¼Œå¤„ç†æ–°ç‰ˆç¨‹åºæ—¶å¯èƒ½ä¼šå‡ºé”™ã€‚å·¥å…·é»˜è®¤ä¼šå°†æ¡†æ¶æ–‡ä»¶å®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹çš„ `.apktool` æ–‡ä»¶å¤¹ä¸­ã€‚è‹¥éœ€æ›´æ–°æˆ–æ¸…é™¤æ—§æ¡†æ¶ï¼Œåªéœ€åˆ é™¤è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å³å¯ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_42.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_43.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_44.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_46.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_47.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_49.png)

è¯¥å·¥å…·è¿˜åŒ…å«è®¸å¤šå…¶ä»–å‚æ•°ï¼Œåœ¨å¤„ç†åŠ å£³æˆ–æ··æ·†çš„APPæ—¶éå¸¸æœ‰ç”¨ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å·¥å…·çš„è¯´æ˜æ–‡æ¡£è‡ªè¡Œæµ‹è¯•ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_51.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_52.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_53.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_55.png)

## äºŒã€ æ–°ç‰ˆæœ¬åŠ¨æ€è°ƒè¯•æ–¹æ³•

![](img/ec6fffeb29c7be7bf9d552347e87ce56_57.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_58.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_59.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_61.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_62.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_64.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_65.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ äº†é€šè¿‡ä¿®æ”¹Smaliä»£ç å¹¶å›ç¼–è¯‘çš„æ–¹å¼è¿›è¡Œè°ƒè¯•ã€‚æœ¬èŠ‚ä»‹ç»ä¸€ç§æ›´ä¸ºä¸»æµã€æ— éœ€ä¿®æ”¹åŸç¨‹åºå³å¯è°ƒè¯•çš„æ–¹æ³•ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_67.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_68.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_70.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_72.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_73.png)

é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨Android Killerç­‰å·¥å…·å¯¹ç›®æ ‡APKè¿›è¡Œåç¼–è¯‘ï¼Œå¾—åˆ°Smaliä»£ç ç›®å½•ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_75.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_76.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_77.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_79.png)

æ¥ç€ï¼Œåœ¨Android Studioä¸­å¯¼å…¥è¿™ä¸ªSmaliä»£ç ç›®å½•ã€‚ä¸ºäº†è®©Android Studioèƒ½è¯†åˆ«å¹¶é«˜äº®æ˜¾ç¤ºSmaliè¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªåä¸º **SmaliIDEA** çš„æ’ä»¶ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_81.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_83.png)

å®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š
1.  æ‰“å¼€Android Studioï¼Œè¿›å…¥ `File -> Settings -> Plugins`ã€‚
2.  ç‚¹å‡» `Install plugin from disk...`ã€‚
3.  é€‰æ‹©ä¸‹è½½å¥½çš„ `SmaliIDEA` æ’ä»¶æ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚
4.  å®‰è£…å®Œæˆåé‡å¯Android Studioã€‚

é‡å¯åï¼ŒAndroid Studioå°±èƒ½æ­£ç¡®è¯†åˆ«å’Œæ˜¾ç¤ºSmaliä»£ç äº†ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_85.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_87.png)

è°ƒè¯•çš„å‡†å¤‡å·¥ä½œä¸ä¹‹å‰ç±»ä¼¼ï¼šåœ¨ç¨‹åºå…¥å£ï¼ˆé€šå¸¸æ˜¯å¸¦æœ‰ `LAUNCHER` å±æ€§çš„Activityçš„ `onCreate` æ–¹æ³•ï¼‰å¤„ä¸‹å¥½æ–­ç‚¹ã€‚

## ä¸‰ã€ å¯åŠ¨è°ƒè¯•ä¼šè¯

å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹å¯åŠ¨è°ƒè¯•ã€‚

é¦–å…ˆï¼Œç¡®ä¿ç›®æ ‡ç¨‹åºå·²å®‰è£…åˆ°è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šã€‚ä½¿ç”¨å‘½ä»¤ `adb install <apkæ–‡ä»¶è·¯å¾„>` è¿›è¡Œå®‰è£…ã€‚

ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ç›®æ ‡åº”ç”¨ã€‚ä¸èƒ½ç›´æ¥ç‚¹å‡»å›¾æ ‡æ‰“å¼€ï¼Œè€Œéœ€è¦ä½¿ç”¨ADBå‘½ä»¤ï¼š
`adb shell am start -D -n <åŒ…å>/<å…¥å£Activityå…¨å>`

*   `-D` è¡¨ç¤ºä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ã€‚
*   åŒ…åå’Œå…¥å£Activityåå¯ä»¥åœ¨åç¼–è¯‘åçš„ `AndroidManifest.xml` æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚

æ‰§è¡Œå‘½ä»¤åï¼Œåº”ç”¨ä¼šå¯åŠ¨å¹¶æ˜¾ç¤ºâ€œWaiting For Debuggerâ€ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_89.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_91.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_92.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_94.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_96.png)

æ­¤æ—¶ï¼Œåœ¨Android Studioä¸­ç‚¹å‡»è°ƒè¯•æŒ‰é’®ï¼ˆå°è™«å­å›¾æ ‡ï¼‰ï¼Œé€‰æ‹©å¯¹åº”çš„è¿›ç¨‹ï¼Œå³å¯é™„åŠ è°ƒè¯•å™¨ï¼Œç¨‹åºä¼šåœ¨æˆ‘ä»¬ä¸‹çš„æ–­ç‚¹å¤„æš‚åœã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_98.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_100.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_102.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_104.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_106.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_107.png)

åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **Watch** åŠŸèƒ½ç›‘è§†å¯„å­˜å™¨çš„å€¼ï¼ˆå¦‚V1, V2ï¼‰ï¼Œæ–¹ä¾¿åœ°è§‚å¯Ÿå˜é‡å˜åŒ–ã€‚å¸¸ç”¨çš„è°ƒè¯•å¿«æ·é”®æœ‰ **F7**ï¼ˆæ­¥å…¥ï¼‰ã€**F8**ï¼ˆæ­¥è¿‡ï¼‰ã€**F9**ï¼ˆæ¢å¤è¿è¡Œï¼‰ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_108.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_110.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_112.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_114.png)

## å››ã€ Smaliä»£ç é™æ€åˆ†æä¸åŠ¨æ€è·Ÿè¸ª

![](img/ec6fffeb29c7be7bf9d552347e87ce56_116.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_118.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_120.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_121.png)

æœ¬èŠ‚æˆ‘ä»¬å°†ç»“åˆé™æ€åˆ†æå’ŒåŠ¨æ€è°ƒè¯•ï¼Œæ¥ç ´è§£ä¸€ä¸ªç¤ºä¾‹ç¨‹åºçš„æ³¨å†Œç®—æ³•ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_123.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_125.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_127.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_128.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_130.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_131.png)

é¦–å…ˆè¿›è¡Œé™æ€åˆ†æã€‚åœ¨Android Studioä¸­æµè§ˆSmaliä»£ç ï¼Œå¯»æ‰¾å…³é”®å­—ç¬¦ä¸²ï¼ˆå¦‚â€œæ­å–œæ³¨å†Œç æ­£ç¡®â€ã€â€œæŠ±æ­‰å†æ¥å†å‰â€ï¼‰ã€‚æˆ‘ä»¬æ‰¾åˆ°äº†æ˜¾ç¤ºæ³¨å†ŒæˆåŠŸçš„æ–¹æ³• `Lcom/example/MainActivity;->showSuccessDialog()`ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_133.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_134.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_136.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_138.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_140.png)

é€šè¿‡å³é”®æŸ¥çœ‹è¯¥æ–¹æ³•è¢«å¼•ç”¨çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å®šä½åˆ°äº†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ `onClick`ã€‚åˆ†æ `onClick` æ–¹æ³•çš„Smaliä»£ç ï¼Œå…¶é€»è¾‘å¯ä»¥ç¿»è¯‘å¦‚ä¸‹ï¼š

![](img/ec6fffeb29c7be7bf9d552347e87ce56_142.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_144.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_145.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_147.png)

```java
// è·å–ç”¨æˆ·åè¾“å…¥æ¡†çš„æ–‡æœ¬
String username = ((EditText)findViewById(R.id.username)).getText().toString();
// è·å–æ³¨å†Œç è¾“å…¥æ¡†çš„æ–‡æœ¬
String inputCode = ((EditText)findViewById(R.id.password)).getText().toString();
// æ ¹æ®ç”¨æˆ·åè®¡ç®—æ­£ç¡®çš„æ³¨å†Œç 
String realCode = getPasswordFromName(username);
// æ¯”è¾ƒç”¨æˆ·è¾“å…¥ä¸æ­£ç¡®æ³¨å†Œç 
boolean isCorrect = realCode.equals(inputCode);
// æ ¹æ®æ¯”è¾ƒç»“æœæ˜¾ç¤ºå¯¹è¯æ¡†
showDialog(isCorrect);
```

![](img/ec6fffeb29c7be7bf9d552347e87ce56_149.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_151.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_153.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_154.png)

ç”±æ­¤å¯çŸ¥ï¼Œæ ¸å¿ƒç®—æ³•åœ¨ `getPasswordFromName` æ–¹æ³•ä¸­ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_156.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_158.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_160.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_162.png)

æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ `getPasswordFromName` æ–¹æ³•è¿”å›ç»“æœçš„åœ°æ–¹ï¼ˆå³ `move-result-object v0` æŒ‡ä»¤åï¼‰ä¸‹æ–­ç‚¹ã€‚åœ¨è°ƒè¯•å™¨ä¸­è¿è¡Œç¨‹åºï¼Œè¾“å…¥ç”¨æˆ·åå¹¶ç‚¹å‡»æŒ‰é’®ï¼Œå½“æ–­ç‚¹å‘½ä¸­æ—¶ï¼Œåœ¨ç›‘è§†çª—å£ä¸­æŸ¥çœ‹å¯„å­˜å™¨ **V0** çš„å€¼ï¼Œå³ä¸ºè¯¥ç”¨æˆ·åå¯¹åº”çš„æ­£ç¡®æ³¨å†Œç ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_164.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_166.png)

å¦‚æœæƒ³æ·±å…¥äº†è§£ç®—æ³•ç»†èŠ‚ï¼Œå¯ä»¥è¿›å…¥ `getPasswordFromName` æ–¹æ³•å†…éƒ¨è¿›è¡Œè·Ÿè¸ªè°ƒè¯•ã€‚é€šè¿‡ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œæˆ‘ä»¬å‘ç°å…¶ç®—æ³•å¤§è‡´æ˜¯ï¼šå°†ç”¨æˆ·åè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œç„¶åå–æ¯ä¸ªå­—èŠ‚çš„å€¼ï¼Œå¯¹ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œç”¨æ¨¡çš„ç»“æœä½œä¸ºç´¢å¼•ï¼Œä»å›ºå®šå­—ç¬¦ä¸²ä¸­å–å‡ºå­—ç¬¦ï¼Œæ‹¼æ¥æˆæœ€ç»ˆçš„æ³¨å†Œç ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_168.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_170.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_172.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_174.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_176.png)

## äº”ã€ ä¿®æ”¹Smaliä»£ç ä»¥æ”¹å˜ç¨‹åºé€»è¾‘

![](img/ec6fffeb29c7be7bf9d552347e87ce56_178.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_179.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_181.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_182.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_184.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_186.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_188.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_190.png)

å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½åŠ¨æ€è°ƒè¯•è·å–æ³¨å†Œç ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹Smaliä»£ç ï¼Œè®©ç¨‹åºæ— è®ºè¾“å…¥ä»€ä¹ˆéƒ½æ˜¾ç¤ºæˆåŠŸã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_192.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_194.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_196.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_198.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_199.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_201.png)

åœ¨ `onClick` äº‹ä»¶ä¸­ï¼Œæ‰¾åˆ°åˆ¤æ–­ç»“æœå¹¶è·³è½¬çš„å…³é”®æŒ‡ä»¤ã€‚é€šå¸¸æ˜¯ `if-eqz` æˆ– `if-nez` ç­‰æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©ç¨‹åºç›´æ¥è·³è½¬åˆ°æ˜¾ç¤ºæˆåŠŸçš„åˆ†æ”¯ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_203.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_205.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_207.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_208.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_210.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_212.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_213.png)

ä¾‹å¦‚ï¼Œæ‰¾åˆ°è·³è½¬åˆ°å¤±è´¥åˆ†æ”¯çš„æŒ‡ä»¤ `if-eqz v4, :cond_0`ï¼ˆå¦‚æœv4ä¸º0ï¼Œåˆ™è·³è½¬åˆ°cond_0æ ‡ç­¾å¤„ï¼Œæ˜¾ç¤ºå¤±è´¥ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™æ¡æŒ‡ä»¤**æ³¨é‡Šæ‰**ï¼ˆåœ¨Smaliä¸­ï¼Œä½¿ç”¨`#`å·æ³¨é‡Šä¸€è¡Œï¼‰ï¼Œæˆ–è€…ç›´æ¥å°†å…¶æ”¹ä¸ºæ— æ¡ä»¶è·³è½¬åˆ°æˆåŠŸæ ‡ç­¾çš„æŒ‡ä»¤ `goto :cond_success`ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_215.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_217.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_219.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_221.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_223.png)

ä¿®æ”¹å®Œæˆåï¼Œä½¿ç”¨åç¼–è¯‘å·¥å…·å›ç¼–è¯‘APKå¹¶ç­¾åå®‰è£…ã€‚å†æ¬¡è¿è¡Œç¨‹åºï¼Œæ— è®ºè¾“å…¥ä»€ä¹ˆï¼Œéƒ½ä¼šæ˜¾ç¤ºæ³¨å†ŒæˆåŠŸã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_225.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_226.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_227.png)

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨Smaliä»£ç ä¸­æ’å…¥Logè¾“å‡ºè¯­å¥ï¼Œæ–¹ä¾¿åœ¨Logcatä¸­æŸ¥çœ‹è¿è¡Œæ—¶çš„ä¸­é—´å€¼ï¼Œä¾‹å¦‚æ‰“å°å‡ºè®¡ç®—å‡ºçš„æ­£ç¡®æ³¨å†Œç ã€‚è¿™éœ€è¦è°ƒç”¨Androidçš„ `Log` ç±»ï¼Œå¹¶æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„å¯„å­˜å™¨æ¥ä¼ é€’å‚æ•°ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_229.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_230.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_231.png)

## å…­ã€ ä½¿ç”¨ç°æˆçš„Javaåç¼–è¯‘å·¥å…·

æ‰‹åŠ¨åˆ†æSmaliä»£ç å›ºç„¶èƒ½åŠ æ·±ç†è§£ï¼Œä½†æ•ˆç‡è¾ƒä½ã€‚å®é™…ä¸Šï¼Œæœ‰å¾ˆå¤šä¼˜ç§€çš„å·¥å…·å¯ä»¥å°†Smaliä»£ç åç¼–è¯‘æˆæ›´æ˜“è¯»çš„Javaä»£ç ï¼Œä¾‹å¦‚ **JD-GUI**ã€**FernFlower**ï¼ˆé›†æˆåœ¨Android Studioä¸­ï¼‰ç­‰ã€‚

åœ¨Android Studioä¸­ï¼Œå¯¹Smaliæ–‡ä»¶å³é”®ï¼Œé€‰æ‹© `Decompile to Java`ï¼Œå³å¯çœ‹åˆ°å¤§è‡´çš„Javaä¼ªä»£ç ã€‚è¿™å¯ä»¥ä½œä¸ºæˆ‘ä»¬é™æ€åˆ†æçš„**é‡è¦å‚è€ƒ**ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåç¼–è¯‘å¾—åˆ°çš„Javaä»£ç å¯èƒ½ä¸å®Œæ•´æˆ–å­˜åœ¨é”™è¯¯ï¼Œç‰¹åˆ«æ˜¯ç¨‹åºç»è¿‡åŠ å›ºæˆ–æ··æ·†åã€‚å› æ­¤ï¼Œæ·±å…¥åˆ†ææ—¶ä»éœ€ç»“åˆSmaliä»£ç å’ŒåŠ¨æ€è°ƒè¯•ã€‚

## æ€»ç»“ ğŸ¯

æœ¬èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ä»¥ä¸‹å†…å®¹ï¼š
1.  ä½¿ç”¨ä¸€æ¬¾åŠŸèƒ½æ›´å¼ºçš„Apktoolæ”¹è¿›ç‰ˆè¿›è¡Œåç¼–è¯‘å’Œå›ç¼–è¯‘ã€‚
2.  æŒæ¡äº†æ— éœ€ä¿®æ”¹æºç ã€ç›´æ¥å¯¹Smaliä»£ç è¿›è¡ŒåŠ¨æ€è°ƒè¯•çš„æ–°æ–¹æ³•ã€‚
3.  å®è·µäº†ä»é™æ€åˆ†æå®šä½å…³é”®å‡½æ•°ï¼Œåˆ°åŠ¨æ€è°ƒè¯•è·å–å…³é”®å€¼ï¼ˆæ³¨å†Œç ï¼‰çš„å®Œæ•´æµç¨‹ã€‚
4.  å­¦ä¹ äº†é€šè¿‡ä¿®æ”¹Smaliä»£ç ä¸­çš„è·³è½¬é€»è¾‘ï¼Œç›´æ¥æ”¹å˜ç¨‹åºè¡Œä¸ºã€‚
5.  äº†è§£äº†æ’å…¥Logè¯­å¥è¾…åŠ©åˆ†æä»¥åŠä½¿ç”¨Javaåç¼–è¯‘å·¥å…·ä½œä¸ºå‚è€ƒçš„æ–¹æ³•ã€‚

![](img/ec6fffeb29c7be7bf9d552347e87ce56_233.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_235.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_237.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_238.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_239.png)

![](img/ec6fffeb29c7be7bf9d552347e87ce56_241.png)

é€šè¿‡æœ¬è¯¾çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å…·å¤‡äº†åˆ†æç®€å•Androidç¨‹åºé€»è¾‘ã€å¹¶è¿ç”¨è°ƒè¯•å’Œä¿®æ”¹æŠ€æœ¯è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚è¯·åŠ¡å¿…å®Œæˆè¯¾åç»ƒä¹ ï¼Œé€šè¿‡å®è·µæ¥å·©å›ºè¿™äº›æŠ€èƒ½ã€‚