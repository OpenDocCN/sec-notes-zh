# 经典15年i春秋渗透测试系统化教程 - P14：课时6  注入式攻击-MySQL手工高级注入（上） - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。好，我们来这节课给大家讲解一下这个外部应用程序安全和与风险。嗯，没有什么呃实战的内容。好，首先我们来看一下这。



![](img/e500aab19ab548565f037fa28051a61a_1.png)

这个外博的这个。

![](img/e500aab19ab548565f037fa28051a61a_3.png)

![](img/e500aab19ab548565f037fa28051a61a_4.png)

![](img/e500aab19ab548565f037fa28051a61a_5.png)

![](img/e500aab19ab548565f037fa28051a61a_6.png)

![](img/e500aab19ab548565f037fa28051a61a_7.png)

![](img/e500aab19ab548565f037fa28051a61a_8.png)

🎼，🎼Yeah。🎼Yeah。好，接着我们刚才的讲解，现在我们把这个。后面的那个。只查询给大家讲解一下。呃，停止之前先把。默认配置文件，大家可以在百度里面。就是理论的费常用敏感信息。

一般都可以查询到我们常见的一些。路径。我们。也你也可以参考我这个文档啊，这个文档我这里也都标记出来了，就是常用的这个默认配置阿巴奇是在哪个里下面啊，有这些。嗯，这个windows有哪些287？

等等这些文件不都是默认文件查看系统。啊，M。对不对？I。TSP。都是他的这个。默认配置文件。包括这个C我U啊是不是？PC anywhere。嗯，这里我都已经。给大家已经写好了，大家可以参考我这个文档。

也通可以通过百度啊，百度怎么搞找的？大家可以在这里。是接。你可以在这里可以看到。常用的。看到没有？别人都呃网上有很多都已经整结好了。阿巴鞋。日志文件。这个叫远程包含的时候，只要对方网站有。远旦播放对的。

那么直接可以。把一句换木码直接在在日志文件后面随便一输往下掰在任何一个地址网站这个页面，任何一个地址输入一句话，那么错误日志。像这个日证他都会记录下来。最后下载，你直接用一句话连接就行。

你这里总结的比较全，你看。是吧。GSP的是吧，88系列。他的16斤这都已经给大家写好了。当然用那个小葵的工具转换一下也行。对应历16点。嗯。很多，所以在入侵过程中。嗯。

大家参考这个网上就是给出的默认配置文件。在注肉过程中，这个给大家就是说。一个小细节吧，上一节课的。好，这节课我们讲讲解一下这个啊limit。在这个MSK5里面的注入中的一个利用啊，怎能去利用它。嗯。

这些我们在前面已经给他家讲解了。那么我们直接在这里。嗯，首先讲解一下这个。是宇就的一个查询指定的数据。那么在这个库里面，这个是。SQ到5以上啊，包括5。他这个。独有的一个库。

就是所有的所有就是所有的卖SQ的数据库。把括表啊、账号密码都保存在这个我们这个库里面。对面做这个是拆选语句，它一般都是接受一个或者两个数字参数。记住哈，一个两个或者数字参数。

那么参数必须是一个什么整数常量。整数的好，你不能复数啊，或者要那个。小素啊。如果这两个给定的两个参数，第一个参数指定第一个返回的这个记录行是。偏一点。也就是说我们第一个参数，它一般的返回是偏移点。

第二个参数指定返回的是记录行的最大数目，就是我们要。返回多少红？需要注意的是，我们。初始记录行的编译是从零开始，而不是从一开始。是吧举个例子，我这里列列入吃了克星药查询所谓的flog来自这个表。啊。

limit01那么。是什么意思？他就他这句这条语句的意思是。可以。检索记录行中的第一条数据的内容。如果这里变成一，那么是第二条数据的内容。第二就是这个里。那么他这里可以报库报表是吧？

我们后面我们这里就以实例给他等。演示一下MQ更接。彩算。这是第一条语句，那么在前面已经讲过，不再讲解。那么我们直接呢就是怎么样去第一条语句怎么样去报。网站的这个数据库和用户。如果我们想报当前数据库。

就我们所有数据库。那么我们如何去实现？通过利名操作才么去实现。那么在这里我们可以给大家演示一下。我们把这条语句复制过来。TDP2点。我们先看一下效果。哦，然后这里搞错了。一般也好。好。

我们来解释这条语句的含义。这个是。怎么样去报取我们当前所有的数据库？当然我们可以通过一条命令也可以实现。当然等一下我会给大家讲解，先我们来讲解一下一个一个的数据库来全部报取我们这个当前的。系。

msq里面的数据库。这个单一号。啊，对，一等于2这个无所谓。你可必须要加送。那就加上吧。各团报错嘞。这Ulink是就是联合查询fl。20%是空格的意思啊。这两个字段嘛，一和2，那么把我们的这个。

这个是什么呢？弗拉姆来自我们这个库表里面。

![](img/e500aab19ab548565f037fa28051a61a_10.png)

好，我们对着数据库来解释这条语句，大家也许啊有点看不明白。

![](img/e500aab19ab548565f037fa28051a61a_12.png)

我们首先。确定我们是这个库是吧？查询这个库。那么在这个库里面。我们找到一个什么表？看到没有？酷，这是库吧，我们找到了吧，就是这个库。库里面。这个表。S C S。好，我们在这里S开头的。我们来认真看一下。

贴。应该是这个表。那么我们在这里打开表。嗯。也就是说这个库。こ。flog是来自这个库里面的什么这个表。对不对？这个表里面这里有个查询查询这个表里面的某一个字段吧。也就是这个。SSEMA杠la这个。

也就是这个字挡吧，看到没有SCSEMA杠name有这个字挡。这个知道里面。接着我们。我们要查询哪一个数据数据库呢？lim面查就只查询。查询里面的内容用这个直抄选，这个我们在前面没讲解，就是这节课的内容。

子查询子查询这个什么？这个地方根据我们的情况的变动。默认是从零开始，这个零开始哈，20%是一个空格也好。记住啊，20%是一个空格，也就是我们从这里看起。丙跟1。好，我们来变化给大家看一下这个效果。

我们当前临时爆出的是这个这个库，这个库是我们对对应这个我们这个m这个。表里面哪一个库，也就第一行吧，第一行的这个库吧。是不是？那么一是代表什么？一代表什么？一是代表的是我们当前只返回一行。一好好。

现在我们来变动一下，我把这里变成一的。也就是说。我在这个地方变成一。哎，你会发现DEDCMS这个库爆出来。原是这个库表爆出来了吧，看到没有？如果我改成三类。我给他删了。你看一下又爆出来这个库吧。

也就这个库吧，对不对呀？他是按照顺序来的呀。也就是说我。从零开始，这个数字从零开始。零是代表第一个一代表第二个二代表第3个三代表第4个。他是这么一个他是这么一个。他是这么一个过程，你看没有？对点。

累不累？这是个库敏啊，库敏。这样的话，我们直接知道了对方的。以此类推啊这个数字延迟啊，就可以报出所有的数据库，这样的话可以把所有的款报出来。那么后面这个一是大于什么含义？我们给大家写讲解一下。

我举个例子，我现在把这里变成4。我在这里如果变成5了。45代表什么含业？你看啊。5是代表返回5号12345。12345。那么。这个五的含义现在明白了没有？而且是不同的数据库啊，读取我们m里面。

所以不同的数据库。当的是这个库12。三个库四个库5个库。是根据这里的。这个四呢。这个四是你看我们第一个是从二开始。也就是说。大家可以看一下。从零开始吧。01234。也就是说。我们读取来是从4。

四是我们四是对应的是这个库吧。SPR吧。DDS看是不是。从通过是不是从这一开始。一个是吧，是内胎往后面。返回5个库，12345。好，如果我从零开始。如果我从零开始。这里总共有多少个款？1235。

超过10个吧。先不说了。呃，113个吧。我们看一下反馈是多少。已经到了t这个库吧。那么这里。应该是1616号。再的怪我把整个。整个服务整个这个我。IK的这个数据库里面的所有库都报出来了吧。

其实大家可以看得到哈。嗯。你在这点我们可以看到。我们当前的所有库。你看。DEDSMS这里到叉SS在这个你看。这一点。跟我这里打开所有库是不是一样的，看到没有？

也就我说过这个库里面把包它是成取了我们所有的库。所谓的库所有表，所有指导，所有内容。所以呢。现在我们可以是不是？一下就爆出了所有的库吧，数据库里面看到没有？你看就是很明白吧。这就是一个相当于一个跨库吧。

就是查询我们当前这个数据库里面的所有数据库。接着我们的查询表。查询这个数据库中的表。举个例子，我想查询DVWA库里面的首页表。那么怎么样去查询？那么你首先要去呢，我。我们这个。表示程序这。

information information这个库里面的。哪一个表里面？我们知道库是程序在这个这个里面是吧？啊，在这个在这个表里面。那么这个这里面这个表里面是没有包含我们这个什么。自动的啊自动的。

所以我们需要。曹玉先查找这个什么。库里面的表表是参取在哪一个？在这个数据information这个库里面的哪一个表里面？嗯。表方是一看就知道。所有的库。里面的表都是存储在t。

在information这个。库里面的太薄式里面记住哈，这个是需要大家死记硬死记硬背的，大家一定把它。记下来就是说你要在查询的时候，手工查询的时候，你直接在这个来到这个表就行了。

也就是说你在这里打开表可以看到。哎这里我已经打开了，我重新打开一次。正载加载。呃，来自这个库这个表。查询。哪一哪列都知道呢？哪个自动的配不亮这个字动。明白没有？这条语就联合查询的就是查询。呃，这个库。

当前。这个库里里面的。这个表。我这个地方。你看到没有？我这里有个点就是库，前面是库点，后面就是pa，这个是表。这个table name是代表的是我当前的这个什么。这个表里面的。知道。退步了。

也就是这个知道。嗯，不对呀。不对不对。😔，哦，是这个是这个table name这个知道。明白没有？这个字道这个字道里面这里还有我们要加一个条件吧。必须要加个条件，为什么要加个条件？

这个条件的作用就是说table这个。30。也就是说我们这个。在我们这个数据库里面，大家可以看到。这个。条件是为他。等于dabbase。等于dtaase。这个dtab的意思是查询当前的这个。homa。

就显受这个酷吧。这个是一个附条件。从零开始。法国一行。也是指定了我们当前数据库名为betab。显示当前的。betab在前面已经给大家讲过，返馈当前的一个。我们当前的一个库。也就是说这个表示为当前库。

也就是DVWA。这个比我们这个这条鱼其实作用作用不大。为什么？因为我们在前面讲过，可以报冬天库的话，直接一个dta会也扣完没有必要搞这么麻烦，是吧？所以说。这个就是我们这个。让大家就是掌握一下。

一个知识点。一个知识点就是弄大上怎么这。通过他来进行实现。看到没有？出来了吧。哎，我这个地方。第二个点还没讲解。哦行吧。嗯，刚才我们已经。前面已经给他把这个。所有的库已经报报出来了，那么这个表。

比要我这这句话的含义，我们这里。给大家。刚才也解释过。就是说通过联合查询。长鲜这个库里面的这个表table这个表条件是这个这一列。啊，这个知道这个这条件是这里面还带了一个will。

会用是这个table这个自动等于当前的这个库吧。因为d base这个函数。就是返回当前的库，也就是说我们指定的。我有这个条件，这一行的条件是指定了我们当前的这个。DVWA这个库。

김미 담에 애 이제 넣。这个库里面。团像这个库里面的一个。条件吧条件是。也就是说。这里我们指定了一个。Tプ内幕。这里还有一个条件吗？这个里面是陈序了我们当前的这个。所有数据库里面的所有表的自动。

这样的话我们。就可以查询出。我们DVWA这个库里面的。有这个表吧。当我们去变动的时候。改成一的时候。他就查询了这个右手这个表。那么我们一看到右手这个表一般是存取用户名和密码的。

那么既然我们知道了这个右手这个。表，那么我们能不能查询出？这个表里面的。用户名跟密没呢。对不对？那么这第二条语句我就给大家解释到这里哈，下面我们来解释第三条语句，如何查询这个表里面的。用户名和密码。

那么大家可以看到这里，我这个库里面。DVW。是不是有这个右手表，你看没有？前面报出了这个吧，后面都报出了这个吧。是没问题的吧。所以这条语就是。有一点复杂，这大家对于初学者来讲不好理解啊。

对于有思学过数据库的来讲，一看就懂就明白了。下面我们就给大家。那第三条鱼。查询这个。表中的那个列名包括内容。首先我们来看数据库。这个右手表。在个右手表里面有右手 IDD是吧。

for name n name。这里面是。用户名。哦，这里是用户名。这里是密码。对不对？嗯。那么我们买用sle语去查询一下。复制过来。再给大家解释。报错了。我看一下这条渔具哪个地方有问题。

这个地方有问题。好，先我们来看查一下这个呃这前面那一条语。还有点问题。没有报出啥，因为我们当前还没报出这个。自动的。我现在先在报出这个。数据库里面的。这些字道右手字道跟password这个字。好。

我们来看一下。plum来自。这个库里面的这个表。我首先找到。C开头的。在这里吧。这个表里面我们先打开它，是吧？要找到他找到他之后，我们这个。来一遍。哪一个知道。

你要哪一个我们要知道明确知道哪一个字动是保存我们这个什么。所有数据库里。所有数据库里面的表里面的所有字档。也就是说。我们通过这里可以看到，也是这个字道是成取了我们。所有库所有标的里面的。所以知道。好。

我们首先要确定这个。啊，原来是在这个字的是吧？COLUMN杠 name。は。现在前面这一局看看明白了吧，联合察觉。温柔这个条件就table name等于。打一个表。拿一个表。

这个是1六进制这个是1六进制。也就是说。哎，我那个16点是转换工具呗。我这个是六进去0X75应该是DVW。Tablein。不对。t斯表。表明是等于。这个16斤是，也就是说我们前面查询出来的。表。

也就是右手表吧。这个应该是U手表。我说错了，说了个钥匙。USS1S没有。哦，出来了，你看到没有？nX。7573657273。对应这个。一定要转化成为16进制。这个条件是我们指定好。你的未要条件。

我们要指定为。当前这个网站里面的。数据库里面的。当前网站当前酷的。一个表明。也就是说我们找到DVW，也就是说。这个表明。这个是一张表user。条件是3一。就可以报出这个。没有没有。

其实我们在这里我们可以看，当我们从这里一一。Whats name。现在暂是报自动哈。你可以在这里。我们来看一下。认证和对着数据库来，所以这个注入一定要自己搭建环境，才能明白它到底是一个什么样的回事。啊。

是怎么回事？我们可以看到for name是这个是吧？等我从电音开始。因索I第一。这样的话我们就报出来。这个吧，对不对？好，现在我们从零。宝宝。我们报出所谓的。看到没有，us ID first name。

n name， Use password。对唔对？我们全部在这里。全部报出来了，一看一个字挡。一个字挡，两个字挡、三个字障、4个字挡，5个6个是吧？我们一下，因为因为我们的当前库里面只有6个。

我这里苏个帮。但是后面没有78，没有，那么他就直接返回6号。对不对？所以说你在要报当前所有的表的时候，你把这个后面数字加大一点就行了。要所有自动的时候。包括所有表，所有字段所有库，只要从零。

前面是一个零，后面是一个什么，后面这个。数字一加大，你就会以报住当前所有的。可一点。他不会报错。这样的话我们很快就知道了。所谓的这个。知饭吧。库所有库所页表所也知道，现在全部报出来。

那目线的最后我们只需要。密码得出密码。这多出名码。那么这个密码就。炒面码就更简单了。我们只需要。通过这条语句。对不对？😔，这个依据我们在前面。给大家已经讲解过了吧。好，我们再给大家。复习一下。

这pasword是通过我们这里导出来的哈。右手啊，我们在这里填写到这个一和二这个地方。US呀。嗯，这个地方怎么播错啊？我们要对应这个。要素。听没有。出来了吧。快不快？3的块一下就爆出了我们这个。

账号跟密码，你看没有？就这就这么简单。注要这个右手这个地方一定要指定为16进子。这个就是报这个指定，这个其实0X616。它是直示AD面的这个16形式代码。所是我们要查选哪一个？嗯，用户名的。密码。

这个是我们可以指定的。因为我们。在这里我们可以。这条语就我们可以报出所谓的。用户用户。我们可以看一下。这个这个这个是16星制，我们可以指定啊指定查下某一个。用户的这个密码。Yeah。你可以看一下啊。

每条鱼就给大家试一遍。你看。是不是我们一查就查出来了。所有当前用户。等于说我们一看到这里，其实在专家赛作的过程中，手动锤试这个猪肉。我们一看到AD名一般是管理员。这样的话我们通过。

这个这条渔句把这个ATM转换成16金素，一查就查出它的密码了吧。对着我们这个。

![](img/e500aab19ab548565f037fa28051a61a_14.png)

啊，关于这个。这一点我们就讲到这一里。等下下节课我们接着后面讲解。

![](img/e500aab19ab548565f037fa28051a61a_16.png)