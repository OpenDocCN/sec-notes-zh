# 经典15年i春秋渗透测试系统化教程 - P45：课时3 逻辑、越权漏洞挖掘（上） - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。Yeah。呃，从这节课开始，我们给大家讲解一下呃，浅谈楼辑漏洞挖掘。那么这个楼辑漏洞也是目前比较流行的。



![](img/0513879ef5f3ed298c3656c784206670_1.png)

呃，为什么流行呢？就是说呃网站就是很多呃我们在做渗透测试的时候呃，就是说当这个注入类的啊，文件上传类的啊，包括这个代码执行啊。呃，用扫描器啊，包括手工检测的过程找不到的时候。就是没有漏能。

因为对方这些企业里面。呃，也会有安全这个测试人员。他也会买了各种扫描器进行扫公司的一些网站。但是呢当你去做渗透测术，他也请一些公司外面的公司做渗透。但是这个呃渗透过程主要是看一个人的这个水平的高低哈。

就能不能找出漏洞啊，一般的账都有漏洞啊，不是说没有漏洞，关键是看你的能力去找。那么如果啊这些漏洞都没有的情况下。那我们怎么去。找漏洞啊，通过什么样的方式啊？那么这节课就是教大家怎么去。

当我们扫描器是发现不了的洞的时候，那么我们要靠手工去挖楼之类的。呃，大家都知道扫描器是不会扫逻辑的那种，他这个不像人一样，他这个模拟用户去去一些操作，那是不现实的啊。

扫描器到没有一款扫描器能能扫这个逻辑的那种。比如说它的包括越权啊，它也是它也几乎也是扫不出来的。越为像有些页面它能爬到，但是他是不知道他这个地方是越场操作了啊，这个就是能访问到管理页面啊，它不会提示的。



![](img/0513879ef5f3ed298c3656c784206670_3.png)

那么这个我们就是今天的一节课的一个重点，也是大家是必学的啊，学渗头测试。

![](img/0513879ef5f3ed298c3656c784206670_5.png)

那么我们来看一下，我们对常见的那洞进行统计过，发现其重就是月墙跟这个楼体那洞占的胀力比较高啊。也就是说，在我们所渗透过的这个平台中，基本上都有发现逻辑那种，包括任意。查询用户信息任与删除的行为啊。

这原圈内段出现在这个账号安全，包括这个密码重置啊，验证码暴力破解这一方面。注意哈，逻辑漏洞其实跟乐拳是分开的哈，是两大块两大块。那么这两大块呢，我在这里呢给大家主要是把这两大块呢合二为一。

就是放在多统餐楼底的啊，就写了一个个的文档，没有。

![](img/0513879ef5f3ed298c3656c784206670_7.png)

没有把它区分开来哈。其实在三对测试过程中这是两大块的哈，逻辑感越长，而且写报告也是分开写的。不能回味一谈好。呃，所以说在这个。



![](img/0513879ef5f3ed298c3656c784206670_9.png)

在讲课过程中，我提前就给大家说一下啊，因为我这里文档写的是。把两个都合合在一起写的，哎，我不想把它分开，就是分开的话，写这个两个word文档不好写，所以我把它写在一起了。我们来看一下欧这个top10。

他也提及到了这个有时候提及就是。这个楼辑漏洞，但是它不命名不叫楼辑漏洞哈，它分别为命名为什么呢？以什么命名的是命名为不安全的对象引用和功能级别访问控制缺陷。他叫这个名字啊，在O里面。其中。

不安全的对象引用指的就是平行月船的访问控制缺线。注意啊，记住这个不安全的对象引用就是这个月船啊，月船这个叫什么B船的平行越船。平行越强是什么意思呢？也就是说，举个例子，我也是普通用户，你也是普通用户。

但是我可以查看到你。这个用户的相关信息啊，敏感信息。那么这个就叫做平行越场。正常情况下，如果没有这个平行月长的灯的话，那么你是不可能。查看到对方。账号里面的敏感信息。例如。A可以查看B的银行里面的账号。

你要银行里面的这个账号，这个账号里面的这个金额。正常情况下，绝对是我不可能去查找查看，能查看到对方银行卡里面有多少钱吧，对不对？这个不现实的。或者我修改这个金额是不能修改的吧。但是如果存在这个漏洞。

那么我就可以改他的金额。知道他的消息相关信息、身份证号、姓名、金额都知道。

![](img/0513879ef5f3ed298c3656c784206670_11.png)

这里我举了一个例子。那么什么是这个垂职越船呢？垂职越船是普通用户跟管理员账号之间的一个打交道。举个例子。我。能直接以管理员的身份，就是说。我这里举了一个电子号，比方说。A账号是一个普通账号。

B账号为管理员账号。那么B账号的管理页面是。必须是以管理管理员权限进行登录查看吧。这一这一点是毫无疑问吧。但是当。当A账号可以通过直接放问关理页面的这个UL的方式的时候。

那么这种方式就就可以绕过了这个管理员登录的限制，查看管理员页面。这个也有啊，尤其是刚开发出来的一些网站，小网站啊，包括大网站也有啊，也有，我也遇见过在企业内部在这个渗周测试过程中，现场测试的时候。

如果一个普通用户登录这个。登录进去之后，结果我把。把管理员的页面就是知道他的这个网站这个管理页面的一个路径的时候，我接上这个管理员页面的路径一访问，结果我的普通用户来访问管理员后台页面。

那么这个就是什么越传呢？叫垂职越传。记住哈，要垂直越强，什么是。啊，这个平行越长什么是垂垂直越球？就是说平行越场就是两个长线是一样的AB长线。嗯。那么垂直权限就是我是一个普通用户，那么你是一个管理员。

那么我普通用户来访问管理员的相关的一些页面。那么这个就叫垂直。因此，称为称为缺职这个缺职权限的这个访问控制的一个缺陷。那么这个该类这个该类型属于什么业务的这个设计的缺陷的这个安全问题。

因此因此这个传统的扫描器是无法发现的啊，这个是什么啊，平行越墙垂直越长，那扫描器是不够能知道的啊，目前没有一款扫描器有这个功能。



![](img/0513879ef5f3ed298c3656c784206670_13.png)

子弹通过手工渗透啊测试进行一个检查。那么在金融平台中，平时越场的访问控制缺陷较为常见。我测试了这么多项目啊，这么多站点发现大量的有这个平行越球。



![](img/0513879ef5f3ed298c3656c784206670_15.png)

这个是呃等一下我给大家讲解一下我的个来一些案例啊，给大家分享一下。

![](img/0513879ef5f3ed298c3656c784206670_17.png)

那么我们接着看一下这个常见的这个楼梯那种。那么这个逻辑内中一般存在于我说过，前面就给大家讲过交易支付、密码修改、密码找回月权、月权修改、月权查询、突破限制等等各类内容。

那么这个图我觉得是这个是微远上面提供的。那么这个图我觉得是目前做的是最好的一张图。

![](img/0513879ef5f3ed298c3656c784206670_19.png)

![](img/0513879ef5f3ed298c3656c784206670_20.png)

![](img/0513879ef5f3ed298c3656c784206670_21.png)

你看哈他这里综合了这个呃密码找回的一个逻辑漏洞的一个挖掘。一个是用户这个凭证这个暴力破解。呃，这个也很多的，尤其是你像微信微信他也有。要以前微信的时候，的验证码是4位啊，或者很多网站是6位。

就是说手机验站就是我注册一个用户美或者修改密码的时候，它有一个什么。需要验手机这个验证码。啊，进行一个确认。那么这个确定的这个验证码呢是4位，这个四位验证码呢，而且没有时间限制。

就是30秒之内必须要把这个四位输输入进去。没有没有做这个时间限制。这个时候我们用这个BORP它的inclo功能直接抓到抓取掉了。就是说我随便输入个验证码，你拦截，一拦截之后。

我把这个思维验证码当做一个变量。啊，挂在一个字典，思维件证码，也就是说两分钟的时间就破解出来了。这样的话我就把对方的密码改了，这也叫暴力破解。包括包括这个呃手机这个。发垃圾短信。啊。

进行攻破呃这个呃发就是楼辑炸药啊，楼辑炸痒。那么这个也就也是一样的。

![](img/0513879ef5f3ed298c3656c784206670_23.png)

啊，也是一样的。还有防回凭证，就是说这个tlkage比较简单，就是说在返回的时候，我们有一些相关信息啊，才直接写到这个返回页面中。返回页面中这个呃密码问题解答，就在返回页面中直接可以看到。



![](img/0513879ef5f3ed298c3656c784206670_25.png)

还有箱的有箱也有漏漏 talk啊，这个呃时间左右的MD5。啊，直接一解妹就出来了。很简单的，包括用户名，包括服务器的一些时间也一样的。



![](img/0513879ef5f3ed298c3656c784206670_27.png)

那么这里多有一些对应的案例物源上面啊，大家可以去看这个是接着第四大块就是用户的一个凭证有效性，就是短信验证码。



![](img/0513879ef5f3ed298c3656c784206670_29.png)

把邮箱套给重置密码。

![](img/0513879ef5f3ed298c3656c784206670_31.png)

啊，包括重新这个绑定邮箱啊，手机绑定邮箱绑定，这个是有大量的案例啊，那么这里呢我不一一的给大家。

![](img/0513879ef5f3ed298c3656c784206670_33.png)

![](img/0513879ef5f3ed298c3656c784206670_34.png)

讲了，那么大家这个这里有个地址，我给大家随便挑几个案例。

![](img/0513879ef5f3ed298c3656c784206670_36.png)

![](img/0513879ef5f3ed298c3656c784206670_37.png)

哦，已经打开了。啊，随便挑几个案例，呃，举个例子吧，这也是当当网的任意用户密码修改了的。我们看一下微信的哈。



![](img/0513879ef5f3ed298c3656c784206670_39.png)

![](img/0513879ef5f3ed298c3656c784206670_40.png)

随便随便看一下。呃，微信注意微信最早的一个任意密码修呃，任意密码，这个任意用户注册密码修改应该是。

![](img/0513879ef5f3ed298c3656c784206670_42.png)

呃，这个是我发现的。啊，是我的原创，但是这个这个后来啊这个是2012年，当时微信刚出来的时候是0几年0006年。0500607年的时候吧，那个我呃记得不太清楚，因为个时隔时间太长了。哈，刚出来的时候。

那时候有一个内洞。呃，就是说呃我们在使用微信的手机注册微信账号的时候啊。微信账号的时候。只需要这个。就是做一个什么的？就是说我们呃手机进行验证码，就是不是要发一个验证码到手机上面来进行一个确认吗？

在注册账号的时候确定这个手机是你的吗？那么这个时候其使在这个发送这个验证码的时候，其实在他的官方站点的微信的，你就是右键查看源代码。他其实它是1个MD5的一个加密的一个纸。

加密地址在网页的源代码里面来查看得到。啊，把这个纸把它复制出来，进行解密M。5。就呃大概是4位的，四位还是6位呀，记得不太清楚，直接把它一解谜就出来了。其实得到了对方的这个啊验代码。

就是说可以任意手机来进行一个注册。那继续注册。

![](img/0513879ef5f3ed298c3656c784206670_44.png)

啊，东时是这样的一个漏洞，后来就嗯把这个漏洞已经提交给这个。

![](img/0513879ef5f3ed298c3656c784206670_46.png)

微信呢直接后来修不掉了。

![](img/0513879ef5f3ed298c3656c784206670_48.png)

那么我们看一下啊，作者这个oring这个发发表的一个任意这个微信这个任意用户密码修改内容。那么这个密码呃我觉得是也是比较好的一个思路啊，大家可以看一下啊。



![](img/0513879ef5f3ed298c3656c784206670_50.png)

![](img/0513879ef5f3ed298c3656c784206670_51.png)

![](img/0513879ef5f3ed298c3656c784206670_52.png)

他这个漏洞的产生就是说呃这里我们不用看啊，主要是看在这个这个地方。

![](img/0513879ef5f3ed298c3656c784206670_54.png)

就是说呃我们随便输入一个账号啊，这个缺了一个你的手机号。

![](img/0513879ef5f3ed298c3656c784206670_56.png)

在一个密码重复密码，这个随便好，我们并不知道密码啊，新的密码自己自己设置设置。但是最关键的一步就是这个验证码。因为我们设置一个密码之后啊，需要这个。



![](img/0513879ef5f3ed298c3656c784206670_58.png)

手机来进行验战，就是说这个验战码关键最关键的问题就是这里前面是没什么。

![](img/0513879ef5f3ed298c3656c784206670_60.png)

![](img/0513879ef5f3ed298c3656c784206670_61.png)

啊，但是我们这个密码这个验证码是几位还4位。思维验证码？就是说你不知道这个验证码，你是没戏的。啊，你是改不了密码的，你设置不了新的密码。那么这个时候我们点击OK抓一个数据包，抓个数据包。

它载入到BOIRP来进行in酷的功能里面来暴力破解，来暴力破解。在破解的时候倒会发现哈这四维密码其实我们真正去破解的话，四维验证码的话很快的，也就是也大概就两三分钟的时间。

很快就呃就可以完成得出这个正确的这个例子吧。但是这个微信他做了一个防御，就是说你。就是说不允许你尝试次数过多啊，一尝试，你就把BRP进行报复这个验证码的时候。



![](img/0513879ef5f3ed298c3656c784206670_63.png)

就会发他会出现这个提示，您提交这个请求过于频繁，请稍后再。

![](img/0513879ef5f3ed298c3656c784206670_65.png)

这个时候你要突破它啊，最关键的一个地方。现在他就是。突破的方法是在这个手机号码。后面加了随便加了一些字啊字符。已经退出字符带录。这个时候你再进行爆库的时候，你会发现哎他这个。他这个验证码。

就是不会出现这个你提交的这个请求过于频繁，他就会突破了，它就没有限制。

![](img/0513879ef5f3ed298c3656c784206670_67.png)

啊，一下就这样的话就进行一个。

![](img/0513879ef5f3ed298c3656c784206670_69.png)

对微信的这个密码进行重置成功的这就是典型的一个逻辑内容。他没有做对这个参数来进行也进行过滤。就说他这个他没有进行一个什么样的限制呢？就对这个。这个电话号码这个地方这个参数来进行严格限制。

就限制这个举个例子吧，呃，只允许是一位的手机号码啊，不允许后面加什么退出字符。而且不管你你这里任何变量，在尝试过程中，只要尝试超过3次，我就。进行一个拦截，加入黑名单。啊，加入黑名单。

但是他没有去这么做。当时。啊，当然现在这个漏动机已经修不掉了，已经修不掉了。你看一下他他当时呃，也就是说50个现场发包3分钟之内就可以修改一个密码。



![](img/0513879ef5f3ed298c3656c784206670_71.png)

可以修改一个密码。

![](img/0513879ef5f3ed298c3656c784206670_73.png)

啊，把马化腾的马哥的一个。

![](img/0513879ef5f3ed298c3656c784206670_75.png)

进行一个。

![](img/0513879ef5f3ed298c3656c784206670_77.png)

好，我们接着看一下啊，随便随便点一点吧。

![](img/0513879ef5f3ed298c3656c784206670_79.png)

你看。这个也是天天玩的。邮箱啊，我们这个它是找回密码好，这个东西这个填写好呃，这个邮箱。验证码进行一个抓包，抓包之后啊会发现一个什么。返回一个一个加密的字符串啊，就是在这里已见，他在这里。进行一个。

隐蔽掉了，就是说把这个图改掉了。把这个加密的支付券呢把它它把它先复制出来了，然后会给这个邮箱发一个验证码，然后要求这个页面填写验证码。填写好之后录下啊新的页面。一个这样的一个过程来到这里。啊。

他仔细观察之后。这里的加密的字符券和之前返回中的字符券竟然是同一个号，这个就是在页面中直接。这样的话他就涉及一个问有问题了。那个邮箱验证码就可以直接绕过了，因为只要解密这个就行了。呃，这就是一个。

被动啊被动站米。

![](img/0513879ef5f3ed298c3656c784206670_81.png)

这是天天网的。嗯，接着看这里还有很多哈。

![](img/0513879ef5f3ed298c3656c784206670_83.png)

呃，这里还有搜狐的邮箱，任意密码修改。你看所以说他这个逻辑的人太多了，大大量的这个。

![](img/0513879ef5f3ed298c3656c784206670_85.png)

嗯，网站就是说门户网站都存在这样的那种，你看搜狐也一样啊，也也存在这样的。

![](img/0513879ef5f3ed298c3656c784206670_87.png)

嗯。他是点击网上申诉，在申诉页面源代码中不断有密码提示问题，看密码提示问题。而且这个隐藏表单里面竟然泄露的问题的这个答案，啊这个答案都泄露出来了。可以获得这个用户修改密码的。问题的这个答案。

而且轻而易举的修改用户有效密码。

![](img/0513879ef5f3ed298c3656c784206670_89.png)

所以说他这个。嗯。内容也是相当高的啊相当高。把高回嚟了，你看。

![](img/0513879ef5f3ed298c3656c784206670_91.png)

嗯，后边有大大量的料子，包括这个奇虎360，你看。

![](img/0513879ef5f3ed298c3656c784206670_93.png)

所以说你看都是大型网站，都是大型网站存在在这些逻辑这种。大家可以认真去，我就不一一给大家说了哈嗯。

![](img/0513879ef5f3ed298c3656c784206670_95.png)

大家自己都看一看，包括这个呃重新绑定这个。包括网易，你看网易一样哈啊，搜狐网易12306，你看12306呃，12308啊，12308。



![](img/0513879ef5f3ed298c3656c784206670_97.png)

这是搞汽车的啊搞汽车的。在手机APP这一块。

![](img/0513879ef5f3ed298c3656c784206670_99.png)

呃，我建议大家就是选楼级类的。大家无论如何把这篇。文章全部看完，并且把这里的案例都过一下。因为婺源他这个账还是比较相当好的一个网站，所以说他包括个类大展大网站被攻击过程啊，他都会详细的记录下来。

有一个流程。呃，在这里都有，而且写的很详细的哈，已经对方怎么样去的。你看完之后，自己在本地搭建环境进行测试逻辑漏动。



![](img/0513879ef5f3ed298c3656c784206670_101.png)

好，下面呢我们接着后面的讲解，我们看一下如何挖掘楼地内的。

![](img/0513879ef5f3ed298c3656c784206670_103.png)

那么挖掘逻辑那呢，你首先要知道你你要确定一下确认你自你自己要注册一个账号密码之后啊，就是嗯一定要就是模拟一下正常的一个流程。啊，模拟一下正常的一个流程才试。再接着我们进行改一些相关参数。那么我看一下啊。

这这一这个就是我们在这个支付过程中的一个挖掘过程。呃，我们要首先要确认业务流程，寻找这个流程中可以被操控的环节。分析可操控的这个环节中可能参产生的这个逻辑问题，尝试修改参数。



![](img/0513879ef5f3ed298c3656c784206670_105.png)

触发这个逻辑问题啊，就昨天早上我们经常在淘宝上卖东西是吧？首先选定一个呃商品加入到购物车，再确认这个购物车的信息输入。物流及收货人的信息，在这确认这个订单进入这个支付环节，最后再是一个啊交易成功等发货。

大概是一个这样的过过程吧。我们在网上购买这些商品的时候，它是这样的一个流程。那么我们怎么样去做呢？作为我们这个渗透测试人员。



![](img/0513879ef5f3ed298c3656c784206670_107.png)

那么我们怎么去在在这这个流程里面去找这个楼辑内容？找楼辑漏中的这个流程你一定要非常清楚。那么首先我做的方法是加把这个。产品加入到购物车之后，是否可以修改这个购买的数量？佳丽罗，我在淘宝上买洗发水。

买了3瓶。买了商品，我放在我的购物车里面吧。那么这个时候。

![](img/0513879ef5f3ed298c3656c784206670_109.png)

我用BRP拦截啊，就这款原件进去拦截。拦截之后呢。我们就是把这个参数举个例子，改为-3啊，三就是本来是商品嘛，我改成-3。



![](img/0513879ef5f3ed298c3656c784206670_111.png)

啊，或者0。接着我们看一下商品的价格也是可以可不可以修改啊，除了这个数量改之外，我们还可以改改价格。例如商品120块钱3。嗯。40块钱一瓶。啊，120块钱，我能不能改把这个价格改一下，改成-100啊0。

或者或者0元。我们再点确认看能否就是把数据包在BIP里面。进行转发，这个时候看能不能成功。哎，如果A成功了，那说明。我们结果别的还要商家还要给我们120块钱是吧？我们而且还得到了商品洗发水。

这个我以前经常挖这样的楼梯漏灯啊，经常采试过有大量的啊这样的一些楼梯漏灯。好的好的一些大型网站有啊，现在不就是说嗯部分大部分大型网站都把这些漏洞都修了啊。第二部分就是呃确认这个购物车信息时候。

是否可以修改啊这个商品的数量为负数啊。就是是否存在折扣啊，就是这个打折。折客呃5期5折啊限制突破问题是否可以覆盖这个商品的总金额啊，这个我们也我一般都是通过。BRP来进行。嗯，拦截修改。啊。

这个就是包括这个。运费啊控制运费，这个也可以，包括修改订单后跳转的支付接口时候。接口的时候是否可以修改这个支付的这个金额，可以可以可否不支付这个直接跳转到这个交易成功列环节。啊。

这个我也也遇见过好多次啊。就是尤其很多就是接到一些三6测试这个。嗯，项目的时候就是渗透的过程中，就对这个金额这部分进行测试的时候，这个是我的一个重点测试啊，我经常对重点测试。

测一下他这个就是说改一下这个呃就是说能不能就是。直接就是说本来在这一部分要进行输入你的用呃密码交易密码。才能进行下一步吧。那么这个时候我不输入交易密码，就是也不输入这个支付多少钱。

那么这个时候我直接跳到最后一步就完成，就是首先我搞1块钱或者一分钱。啊，进行测试测试到最后的这个流程的时候，最后完成这一步啊，我把这个数据包拦截下来，看它是哪一个页面。

那么这个时候我第二次进行选定物这个物品的时候，我不进行。嗯，这个。就是说输入多少钱，我直接来到最后一步。啊，直接也不输入这个交易密码，我直接跳到最后一步，看能不能就是说直接完成。



![](img/0513879ef5f3ed298c3656c784206670_113.png)

这个也有很多就是成功的一些案例啊成功的一些案例。

![](img/0513879ef5f3ed298c3656c784206670_115.png)

嗯，这个是我个人这个整理的一个常见这个逻辑漏洞的一些案例。

![](img/0513879ef5f3ed298c3656c784206670_117.png)

呃，这里就是说我针对婺源整理的这个就是任意一个是任意呃修改用户资料。那么这里大家可以认真去看一看啊。

![](img/0513879ef5f3ed298c3656c784206670_119.png)

![](img/0513879ef5f3ed298c3656c784206670_120.png)

![](img/0513879ef5f3ed298c3656c784206670_121.png)

啊，这个是爱玛手机链代码平台的。

![](img/0513879ef5f3ed298c3656c784206670_123.png)

修改用户资料。那么这些案例等一下我会拉我自己的一些案例给大家讲解。你看这个积分啊这等等这些东西我们不看好。那么这点我提供这些地址呢。



![](img/0513879ef5f3ed298c3656c784206670_125.png)

给大家大家自己去。呃，几乎就是说把这个物源上面的一些呃逻辑漏洞都总结了一下吧，大概都总结了。就说修改任修改用户资料啊。查呃能音查询用户信息啊。



![](img/0513879ef5f3ed298c3656c784206670_127.png)

重置密码恶已注册啊。攞似短线啊。

![](img/0513879ef5f3ed298c3656c784206670_129.png)

你有粤尔短线啊其他逻辑类灯啊。

![](img/0513879ef5f3ed298c3656c784206670_131.png)

那么在这里我都把这个案例都给大家了哈，大家自己去每一个都去看一下啊，别人怎么去做的，怎么去挖的。

![](img/0513879ef5f3ed298c3656c784206670_133.png)

好，接着我们来看一下这个呃密码修改的逻辑漏动。

![](img/0513879ef5f3ed298c3656c784206670_135.png)

![](img/0513879ef5f3ed298c3656c784206670_136.png)

密码修改这个。首先你要需要这个旧密码，一般就是有这几个过程就是验证不输入旧密码，客复修改，所以我不输旧密码，或者尝试抓包提交这个呃旧密码参数，把这个密码参数，旧的密码参数把它直接删掉。



![](img/0513879ef5f3ed298c3656c784206670_138.png)

啊，用BRP把这个密码删掉。

![](img/0513879ef5f3ed298c3656c784206670_140.png)

第二部分就是。嗯，测试方法是验在旧密码输入处是否存在SK路注入了的啊，这个也也很正常这个也有啊也有。第三个就是验验站是否可以跳过输入旧密码的步骤，直接修改新密码。



![](img/0513879ef5f3ed298c3656c784206670_142.png)

反正自己去用BRP去挑。第二部分就是说不需要旧密码，就是呃验在这个修改密码，提交数据中包含了这个用户身份信息。接着我们看一下这个。嗯，现在这个提交的这个用货身份信息啊被。修改后是否可以成功修改？



![](img/0513879ef5f3ed298c3656c784206670_144.png)

那这个后面大家自己看一下，我们看下最最主主要的一部分。啊，这样的一个流程啊，给大家说一下啊，首先走一遍啊一般的这是密码修改过程，我们首先走一遍，就是正常的这个密码修改流程。

把过程中所有的环节数据包都保存下来。分析流程中哪些步骤使用哪些身份件证信息，使用的哪些论证方法。第三步就是说分析哪个步骤可以跳过，或者可以直接访问某个步骤。



![](img/0513879ef5f3ed298c3656c784206670_146.png)

那么第四步呢，就是我们分析每个认证方法是否存在缺陷，客否越权。

![](img/0513879ef5f3ed298c3656c784206670_148.png)

第五步就是首先我们尝试正确的一个密码找回流程，现在不同。找找回方式，如这个邮箱手机密码提示问题等等。第六步就是分析我们各种找回机制所采具的这个验战手段，母验证码的有效期，有效自主生产规律。

是否用户信息相关点的。

![](img/0513879ef5f3ed298c3656c784206670_150.png)

那么我们后面最后一步就是抓取这个修改密码步骤，所有的数据包尝试修改关键的这个信息，鲁用户名。用户名、用户ID、邮箱地址等等手机号码详细以及案例。



![](img/0513879ef5f3ed298c3656c784206670_152.png)

那么这些详细看以下案例这个嗯。也也整理了一下哈，大家可以去看一下这个关于这个呃密码修改这个一些案例。那么这个案例呢，我在这里不再讲解，因为这个时间有限，一讲等一下要讲N接口。



![](img/0513879ef5f3ed298c3656c784206670_154.png)

![](img/0513879ef5f3ed298c3656c784206670_155.png)

日常访问我们单独到是画一节课吧，给大家讲一下啊，就是在本地给大家演示一下，在这里就不再赘叙。

![](img/0513879ef5f3ed298c3656c784206670_157.png)

![](img/0513879ef5f3ed298c3656c784206670_158.png)

好，下面我们给大家讲解一下这个呃逻辑内容大概的一个在本地搭建的一个环境哈，随便随便找了一个网站。

![](img/0513879ef5f3ed298c3656c784206670_160.png)

演示一下。我们在这里。