# 经典15年i春秋渗透测试系统化教程 - P33：课时3  文件包含高级利用及防御方法 - 老网恋教父了 - BV1n54y1B7F7

好，接受讲解。

![](img/3709969307d000e8eb8f73fd460b114e_1.png)

嗯。呃，报错了啊。那最小搞搞错了。他这个地方是在这里。哦。哎呀，搞错了搞错了那个。那目录不对目录没对，现在银骷髅的下面，我一直想到DVWA去了，DVWA下面去。嗯。这里就这里我就拿这个图片给他演上。

当前目录。银骷髅的嗯，这个目录这个目录相当的2点。2点GP7。没有啊。😔，它就是1个PSHP1副显示这个PSP的这个。呃，配置信息。那么我们在这里。针对当前目录这个图片。我爸。你看我这样这样是不行的啊。

你看报错了。他根本上不显示，为什么？那他这在后面夹了有这个。大家注意下，EISC它是一个胖的，就衣服一个胖的这个。嗯，是不是给了这个给了一个文件，给这个配置这个。给了这个配置这个参数。他一个碰的。

如果给了的话，就执行这个，没有给的话，没有的话那就直行ho点PSP这个文件。接着的在这里一块包含啊这个文件，就我们例如给的是2点级BG。2。GBG电话就是它包含了22。GPG，但是后面它也有一个最个。

就点一个上引号点PSP那么这种形式它你没法执行掉。你没你你没法，你按照这种方法是不行的。你就有的人说加个点或者PSP行不行，绝对是不行的这种。这这个这个绝对是不行。所以说我们要想个办法。

就像林琳炸荡一样，我们在上场流程给大家讲解过。然后面的一节，不光他加啥。程序怎么做？那么我们直接把00。嗯载动他。嗯，这样的话就可以执行了。你看这样的话就可以了，对不对？哦。这个是这个载动包含啊。

怎么去载动它，载动后面的去包含。好，接着我们来看一下这个PSP的内置协议。那后PSPC呢给我们带来了很多类似的URAA的风风格的这个封装协议。啊，可用有这个类似的服。pen copy文件。

包括这个faEXSTS。包括非要C嘴这个文件大小。一些文件系统的一些函数。呃，详细的大家可以参考PSP官方站点，这个是有很多的。这就是我们用的最常见的一些。今天我们给大家讲解一下P4P这种是吧？

给大家讲讲的是这个吧。然有其他的大家可以自己回去是之后。参考网上的资料去。做一做啊，就是测试测试这里我们就不测试了。你把这一个就搞明白就行了。好，下面我们来给大家布置一个作业啊，今天。到晚上两点多了。

那我们就。嗯，内容也也也没讲太多啊，讲作业之前我们。给大家讲解一下PSP这个原餐包含的这个防御，还没给大家讲解。嗯，讲一下吧，大概停一下吧。嗯，本来有的人会问，嗯，本来没讲防御。我那个代码神计吧。好。

我们来看一下DVW的高中低。我们刚才做实验的就是他的低，我们比较一下。这个是他低代码，这个是中代码，这个是高的。高中低啊高中低。那么这个高中低这个代码这一部分我们给他讲过，这个直接我们把这个上传的文件。

直接导入进去。直接给他把这个费这个变量。嗯，就是我们这个get是获取获取我们的这个文件哈，给这个参数这个配置这个参数的这个。文件就例子我们送去了1个1点GPG。

我们刚才给大家演示的推出的点GPG上传上去之后，那么就直接什么。直接包含的inclo直接包含的。那么这种包含的没有做任何过滤啊，没做任何过滤的话，就包含你那是非常危险的。我含一句话木满了。

那么直接拿尾不睡了。这个就是这这一部分就是我们刚才前面。刚才给大家讲解过的，就是我们的实例就是这样的。那么看一下第二部分啊，第二部分它是怎么也是一样的。但是他做了一个安全的一个做了一部分安全。

那么他的安全是怎么做的嘞？你看看DVWVA是怎么做的。呃，首先他获取。嗯，就是我们传一个文件给这个配置这个参数再进行他就获取到了。复制给他。接接受他这个采用了一个这个这样的一个函数。那这个是做什么用的？

啊，这个做什么用的？这个就是。一个搜索就是替换。就是在这个里面就。fi了这个就是我们获取的例如test在这里获取到的这个testGPG这个文件。嗯，里面的这个HTTB点2点反两个反斜杠。用他的进行替换。

用空用空格来替换。啊，有空可提我要搜索这个。是什么意思啊？是什么意思？我也想解释不太清。但是没听明白，就是说他的一个替换的。就说他通过就是我们觉店tGPG嘛。裤子给配置嘛，配置给他嘛。兄弟给这个编的嘛。

那么它就例如我们上HTTB。两点返斜杠，先原在话3W点百度点。come那么这个时候他的他。找在这个这个变量里面去找什么？找HTB2点发斜段搜索这个这个字付券。用空格来。

替换大体是这么一个意思是这么一个意思。这样的话，身上做了一部分安全防御啊，还有HTPS但时你注意一下。他这个函数它区分大小写的啊区分大小写。如果我这里H改成大写的。那么你不等于没做嘛，对不对？

那不就绕过去了吗？再绕过去的，大家如果没听明白，就实在这里百度一下嘛。他是干啥用的？嗯家。第一个就解释了呢。还要把字幕看一看。hello word支付上的这个word。提换为上海。那帝王我上海。哦。

再把它哦，再注意下，他是把前面的替换为这个后面的。那是这么回事，注意啊，刚才跟你。是。老师把前面的哈前面的替换为后面的。交出了一下。注意一下。所以这个区分大小写，但是你看下看一下这个。嗯。

PSP这个函数在解释。他这个是区分大小姐，你看。这个函数有字付券的。以字符上替换字符串的一些字符啊，区分大小写。所以说我们这里要绕过去的话，你把这。改大写HDDV大写。HTS大写，就这样的话就拉过去。

好，我们接着看一下这个。所以他这种嗯相当的不安全啊，不安全，这直接可以绕过去。啊，做过这个三头测试的就知道了，看一下他高级别怎么去防御的。他高级别的嗯，他首先在这里一个碰到。啊。你看他这里就做得好。

高级别只允许什么？我后面接一个文件。一个什么文件呢？就这个。我高级别只能是接这一个文件。给他胖。直日拍到。后面是不是？这个配置这个参数。配置参数。只接受这个include点PP。如果不是这个肺啊。

你看有个一个感那个飞嘛？如果我后面不是那个什么。因哭了点撇子皮，那么我就。执行这个ECS有错误，文件找不到。就退出。是这么回事？没有没有，也就是说。他定的很死的。你不管你上传任何文件。

你如果上上传任何文件，在这里包含都没用的，都没写，因为它只接受这一个文件。那这样的话，你绕不过去吗？对不对？你就闹不过去了。这就是DVWA的这个。嗯，安全嗯，怎么样去做安全的？啊，这个大家。

提供的给大家一种方法，方法就是。别的是怎么做的，怎么去防御这个原餐包含的。就实你你拉到这个方块之后，你自己去。也怎么去也这么做，也可以接鉴一下，接鉴一下，写入到程序里面。如果你非要用到这个原程包哈。好。

接着我们看一下这个课后作业。呃，课外作业的话。大家去网上下载依库CMS这套系统。这个房在本地搭建一下这个漏洞的利用过程的话，原程包含过程的话。在这里。公员方面讲解。详细定义过程啊，这个网上也有很多。

你可以看一下怎样是拉的拉尾个碎的。他这个过程跟我讲解的一样。跟我讲这个一样的，他这个是也是包含日志文件，你看。现在日志文件。白句话。这样就包含进去了。所以大家。参照这个案例在本地搭建一个环境。

因为我今天所讲的这节课。把这个实验模拟出来。好，关于今天PSB包含内容，我们就讲到这里。

![](img/3709969307d000e8eb8f73fd460b114e_3.png)

嗯，在检测过程中，如果有一些错误的话，大家可以去送个提出来，我们再探讨一下。

![](img/3709969307d000e8eb8f73fd460b114e_5.png)