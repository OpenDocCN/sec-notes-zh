# 经典15年i春秋渗透测试系统化教程 - P51：课时9 编辑器漏洞讲解（中） - 老网恋教父了 - BV1n54y1B7F7

Yeah。好，这节课我们给大家讲解一下这个FCK这个AD闪这个编辑器。那么FK跟这个我们前面讲的Ewe博ed迪生这款编辑器使用相当广泛啊一样。呃，目前就是我们用的比较多的。

也就是FCG杆Ewe这两框这个编辑器。那么这个嗯这款这个编辑器在以前是一款使用率相当比较高的一个编辑器哈，与这个以外部ed迪这个不同的时候不同的是。它并不没有这个后台管理哈。

几乎不会存在什么SK的注入啊，C成伪造等等这类内动。所以说呃FCK呢这款这个编辑器，那么大部分漏洞都是在这个上传漏动上面啊，上传上面。那么我们讲讲这个FCK啊，也是通过这个上传来给大家讲解。

直接拉微不睡。呃，关于这个上传漏洞啊，就是说我们在这个前面的课程给大家讲解了啊，包括利用这个解析啊，包括这个。呃，零0咋弄啊。那么在这里不再做太多的耳去。那么我们来看一下哈。那是编辑器。

那么他的默认页面啊，我们要知道一下。啊，他是这个页面，那么我们给大家看一下。注意哈呃前面是你们域名，一般的情况下，就是说编辑器它会单独一个文件夹啊，取个名字，一般是什么FCKAD3啊，或者其他的名字啊。

呃，这个呃一般是管理员来自己。自己的命名的啊自己命密。嗯，一般情况下就是说国内的扫描器，厂商的扫描器对这个编辑器这个扫描还是非常不错的，都能扫出来哈。比如说扫出这个是编辑器这个什么版本啊都会显示出来。

那么这个的话我们。呃，还是给大家讲一下吧，就是说关于这个编辑器这个默认路径。嗯。默认路径就是这个啊。

![](img/b2e8feda5004e2476b7a06e232ecf96a_1.png)

呃，这个根据一般也是根据他们版本来碰断的。这里我就下载了两个版本，1个2。4，1个2。6的版本。

![](img/b2e8feda5004e2476b7a06e232ecf96a_3.png)

大版本就是2。42。6。嗯，其他的版本有很多版本我没有去下好，大家自己去下啊，但是这个利用方法都是差不多啊差不多。



![](img/b2e8feda5004e2476b7a06e232ecf96a_5.png)

那么在这里我们就可以进行一个什么呃。对他进行一个就是说我们来进行操作啊，上传啊，插入图片啊。

![](img/b2e8feda5004e2476b7a06e232ecf96a_7.png)

啊，可以提交一些东西到服务器啊，这个都是可以的啊，就是编辑器的一个默认这个页面。那么如何去查看编辑器的版本啊，我们是通过这个。



![](img/b2e8feda5004e2476b7a06e232ecf96a_9.png)

这个页面的。

![](img/b2e8feda5004e2476b7a06e232ecf96a_11.png)

呃，这个我们在这个IS搭建了一下哈，大家可以看下，我搭建了两个版本，1个FCK26啊，1个FCK2。4的1个版本。那这个版本呢我等一下会在这个教程里面会打包给大家。



![](img/b2e8feda5004e2476b7a06e232ecf96a_13.png)

啊，2。6。42。6。2。4。3啊，这两个版本。

![](img/b2e8feda5004e2476b7a06e232ecf96a_15.png)

后面会打包。呃，我再说一下这个环境这个问题啊。就大家你们等一下，我使用我这个源代码，你拖到你这个。呃，服务器上去之后啊。呃，你需要配置一下，就是说配置一个很简单，你要做这个实验。就是说在这个康肺个里面。

有一个地方需要呃，这个地方默认是forse啊，就是这个配置inab啊。啊，它默认是forse，就是没有启用，你要把它改成trireal。那么这样的话它就启用了，启用的话你就可以使用这款。

编辑器的哈就像我这里一样啊，其他的后面就I你配置一下就行了啊。那么这个我在这里不再做太多的讲解。

![](img/b2e8feda5004e2476b7a06e232ecf96a_17.png)

![](img/b2e8feda5004e2476b7a06e232ecf96a_18.png)

好，看版本号啊，就我们回到教程这个地方查看版本号呃，在这里就是版本是2。4。3的啊，一看就知道。那么这个嗯扫描下也是这么碰到的。

通过这个提交这个页面返回这个数据包这嗯这个包包里面来匹配这个版本这个这个这个这个地方的关键。呃，作为关键字来匹配啊，它是啊什么版本。



![](img/b2e8feda5004e2476b7a06e232ecf96a_20.png)

这个查看文件上传路径呃，那么一般是这个路径。其实这个无所谓的。这个作用不大。一般呢就是我们主要是看一下版本。



![](img/b2e8feda5004e2476b7a06e232ecf96a_22.png)

啊，我们就就是知道就是我们一看到2。4。3就知道有什么漏洞啊，2。6的有什么漏洞。

![](img/b2e8feda5004e2476b7a06e232ecf96a_24.png)

啊，其实这个是靠大家平时去总结好，对这个编辑器啊，编辑器啊，各类类都总结在一起。所以大家就是说在渗度测试过程中。呃，今后会用得到。比是说你你如果步做总结的话，就是说。



![](img/b2e8feda5004e2476b7a06e232ecf96a_26.png)

嗯嗯。很难进步吧，就是在学习过程中。你会发现，就是说很因为每一个东西啊也上传的动太多了。包括这个编辑器啊，有各种编辑器。所以说一报什么新漏段，那么你你把你的新漏段加到这个文档里面来。

慢慢的慢慢的你的文档就慢慢的完上了啊，完上了之后就。你遇到这个编界啊，一打开这个文档一看啊，原来这个版本是可以有这些漏灯啊，可以使用。



![](img/b2e8feda5004e2476b7a06e232ecf96a_28.png)

我们这个其实作用不大，等一下我们在这个页面全部看了一到哈。这个是查看文件上传路径啊，这个路径在哪里啊？在这里啊。晚年上学路径。好，我们主要是看这地吧啊，给大家讲解一下这个地方。大家看好了啊。啊。

我们可以翻译下，你找个这个翻译软件，你对中文不懂的话，这个地方的连接器啊，当前文件夹资源。那么这里的话文件我们一般是上传文件是吧？SP等就SPSPlet呢，点let的，你就点letPSP就PSP。

那么当前文件夹就是这个根目。呃，我们来看一下啊。啊，这个是不是跟我们刚才这个。这个是一样的是一样的是吧？所以我们在这里的话。一般我们就看这个页面，管理员一般如果没有删除。

那么我们来到这个页面直接可以来进行全文件啊全文件。那么我们就拿这个文这个路径给大家来演示一下哈，后面等一下，大家自己可以看一下。啊，2。6我也演示一下，2。4我也演示一下两种突破方法啊。



![](img/b2e8feda5004e2476b7a06e232ecf96a_30.png)

那么这个是2。4的嗯2。4点加2。4。2吧，我们不管它什么版本吧，就2。4以，2。4这个版本吧。那么这个版本的话，我们就是怎么样去测试呢？所以我们在这里啊选择选择一下文件上去啊。那么我们注意哈。

如果你上传一个什么举个例子，如果你这个地方是个。AP的。为了演示此期间，我们先把熏机。

![](img/b2e8feda5004e2476b7a06e232ecf96a_32.png)

诶。机在里面送传了一些文件。看下这些文件我们把它删掉一下啊，删掉一下。这里面没有文件哈。

![](img/b2e8feda5004e2476b7a06e232ecf96a_34.png)

![](img/b2e8feda5004e2476b7a06e232ecf96a_35.png)

如果我们上传一个什么嗯SP文件，你看一下啊。你上去。他绝对是上传呃，报错了啊，不允许你上传。那么你在这里是。嗯，上传不上去的。那么我们怎么调呢？啊，如果你把它改成GPG啊，那图片格式它是原素上传的啊。

这个是毫无疑问的。啊，你看啊。来上下。

![](img/b2e8feda5004e2476b7a06e232ecf96a_37.png)

这个时候可以上传嗯。你看一下效果，他已经过来了，对吧？是吧？啊，我们呃要突破的方法的话，我们怎么突破呢？我们还是把这个ASP改回来。



![](img/b2e8feda5004e2476b7a06e232ecf96a_39.png)

这样。不要。点。呃，GPG。鸡别姐。这样的话我们来突破通过这个IIS的这个6。0的1个解析漏的来进行。



![](img/b2e8feda5004e2476b7a06e232ecf96a_41.png)

做。

![](img/b2e8feda5004e2476b7a06e232ecf96a_43.png)

这样的话他的这个已经传上来了。那么这个文件我们再接着获取这个当前的这个文件哈。他的文件路径是这个啊。还可以这样获取啊，当前的这个文件路径跟文件是吧？这个是我们传的文件。

那么这个文件哈就是说嗯利用解析漏段的话，是可以直接用菜刀。呃，可以连接的。啊，可以连接的。但然这个看这个上权的动号，我们在这里不再做太多的而去。好，我们传上去之后，我们还是给大家呃看一下效果吧。嗯。

看一下这个地方能不能进行访问是吧？我们知道啊通过这里，我们就可以知道文件路径是这个路径是吧，这个是没问题吧。对不对？就是我们的上传路径啊。呃这个路径。上量一个杠。呃，接着我们这个文件。嗯。哦，这个文件。

注意下，这个路径是这个文件，是刚才选的这个文件吧。那么这种文件注意哈，就是利用这个解析漏洞啊，是你像这个这种扩张名的，它就点击BG。其实遇到这个分号。就是这个文件就是微员的这个解析啊，遇到分号的时候。

他就不解析了哈。就往前面的话。他就是只解析前面的了。好，这样的话你输入木呃密码就可以登录进去了哈。这里就不再登录了。啊，这个就是一个呃遇见这个版本2。4。



![](img/b2e8feda5004e2476b7a06e232ecf96a_45.png)

2。4这个2。4。2的啊2。4。3这种版本，那么大家就可以直接用这个解析的可以突破了啊，突破。

![](img/b2e8feda5004e2476b7a06e232ecf96a_47.png)

那么我们再接着看啊。

![](img/b2e8feda5004e2476b7a06e232ecf96a_49.png)

看一下其他的页面。问的是这个这个页面是吧？呃，是这个页面，我们再看一下这个页面。这页面有很多哈。嗯，这个地方一样的。也是可以，还有这个页面，有些页面是被管理员会删掉的哈，为了安全起见。

他但是他有些页面他没删掉啊，也可以用这个页面也可以。啊，当然这个。也可以用这种啊，这是2。6的。注意啊，如果是2。6呃2。6。那么你就是用这个用这个路径2。6，等一下我再讲解吧，先在这里不讲解。

那先不管。还有就是说我们这个。这个路径下面。也是很关键的一个路径。你看这个地方一样可以传的。这些路径。那么这些路径你看这里有很多的哈，1234是吧，这都是可以的。啊，都是可以。嗯，哦不能跳。

副路径副路径的话一般是这个问题。就是说嗯关键是看管理员。

![](img/b2e8feda5004e2476b7a06e232ecf96a_51.png)

在这个地方配了没有？嗯，这个地方。

![](img/b2e8feda5004e2476b7a06e232ecf96a_53.png)

嗯，这样的话就可以了哈。呃，在这点我就不再嗯。

![](img/b2e8feda5004e2476b7a06e232ecf96a_55.png)

每一个路径都给大家演示了，其实都可可以的啊，主要是管理员没有删除。嗯，如果他这个文件夹也把它删掉了。假设是删掉了，那么你最下面的也都不能访问了。一般呢如果第一个来访问，那么后面几个都是可以访问的。啊。

大概的一个形式就是嗯。这种形式就是2。4啊2。4。3的，一般是在这种。路径下面2。2。6。6的啊，是这种。啊，其他的啊有这有这些上传路径啊，默认的上传路径。啊，大家就是说大概有头脑里面有个呃概念。

就关键是不要大家死记硬背哈，把它记下来啊，不用记这个东西。因为大家你知道有这个FCK啊，或者Ewe这个编辑器就行了。呃，真正在渗透测试观程中要用到这个漏洞，你让看一下版本，在百度里面一搜。

你就就搜得到啊这个默认这个。默认上传这个页面啊，编辑页面啊，一查就知道了。啊，就出来了。所以说嗯我告诉大家的教代大家的是一个方法，关键是方法。好，那么接着我们再看一下啊。这里我做了一些注释哈。

就一般这个很多站点啊已经删除了这个。还有一些就是说哎呃这个这个路径下面是不可以上传文件的。呃，我们在这里说一下哈，这个是什么意思哈？嗯。有一个路径就这个路径。看有这里这是2。4。3的啊。2点4点30嗯。

不能上传。不能。2。6这个是可以的，2。4。30内上传人创建。但是2。6的，他是把有些内容。

![](img/b2e8feda5004e2476b7a06e232ecf96a_57.png)

嗯，修补掉了。修复掉。

![](img/b2e8feda5004e2476b7a06e232ecf96a_59.png)

呃，为来给大家演示，我们来看一下效果。那东西写错了。嗯，他有些页面注意好，在火狐里面它是。他说不行的。嗯，你看在这火狐里面它就显示不出来。所以说大家做三道测试，一定要装各种浏览器。

因为也呃因为这个网站的这个兼容性问题啊，各种版本兼容性问题啊，在有的浏览器里面是显示不出来的。所以说我也是一样专门要换流呃，是测试各种浏览器。好，我们在这个地方有一个。



![](img/b2e8feda5004e2476b7a06e232ecf96a_61.png)

放传图片的这个地方。那么在这个地方，我告诉大家一个方法。嗯，在这个地方就是有个链接，我们选定这个流浪服务啊，流浪服务器。那么在这个地方，其实我们流浪的服务器就是这个我们这个服务器，这个地方就是我们这个。



![](img/b2e8feda5004e2476b7a06e232ecf96a_63.png)

![](img/b2e8feda5004e2476b7a06e232ecf96a_64.png)

![](img/b2e8feda5004e2476b7a06e232ecf96a_65.png)

浏览这个服务器里面的资源。FK这个嗯当前的一些目录啊，你看到这里哈，我们就会以看到我们当前的这个文件是吧？那么在这里我们来可以给大家创建一个举例子，我创建一个test。好，你看啊我们就创建了一个pas。

你在服务器可以看得到啊，当前这个推迟的文件夹马上就创建好了，是吧？

![](img/b2e8feda5004e2476b7a06e232ecf96a_67.png)

马上就穿建好。是吧没问题吧，你可以创建一些特殊的文件夹。举个例子，你像这种特文件夹是相当危险的呀，要解析漏段哎。



![](img/b2e8feda5004e2476b7a06e232ecf96a_69.png)

你在这里面的任何文件啊，我们我们看哈任何文件是它都会当做这个。你的这个这个图片是一个什么？这个GPG其实它就是一呃我们的这个木马程序啊木马程序。我们点击上传。啊，就上去上去的。哦，上传上去了。

那么你来到服务器，你可以看一下啊，当前的一个文件夹里面有个这个。

![](img/b2e8feda5004e2476b7a06e232ecf96a_71.png)

有个这个。啊，有一个这个。那么我们其实可以在这里来看一下效果的。呃，会要这个。taste是吧？Tste。点AP。反斜杠Y点code12点GPG。



![](img/b2e8feda5004e2476b7a06e232ecf96a_73.png)

你看。是吧所以说这种文件夹，你看我创建一个这种文件夹，但是我们的这个木码是GBG的扩张你，这个是原区上传的吧，在哪在哪个地方都可以传吧啊，这个图片格式的是可以传的吧？或者加F都可以啊。但是我们在这里看。

我们已经执行了我们的小码啊，如果传个大码上去，那么你就大码就运行了。

![](img/b2e8feda5004e2476b7a06e232ecf96a_75.png)

这个就是我们的这个。

![](img/b2e8feda5004e2476b7a06e232ecf96a_77.png)

另外一种方法啊，一个突破方法。

![](img/b2e8feda5004e2476b7a06e232ecf96a_79.png)

啊，通过这个图形化界面很简单吧。

![](img/b2e8feda5004e2476b7a06e232ecf96a_81.png)

啊，这个方法我希望大家也要学会一下啊学会一下。注意好，2。2。6。6是不能上传，不能建立。全文件他把这个漏洞修补掉了哈，2。4。3。呃，如果是2。6。62。6。3这个版本，它这个有一个那一样。

有个那种可以调用。文件哈例如这个这样的文件相我远程包含一样，直接可以。啊，这种方式来调用。所以说这个2。4。3，我刚才也示过了，2。6。6，我们例外的方法突破啊，我会在这里嗯还有GSB版本怎么去做？呃。

我在这里给大家就是说演示一下2。6。6这个版本。

![](img/b2e8feda5004e2476b7a06e232ecf96a_83.png)

嗯，他是采用的是载动权形式，就是说白名单老过。我们又来一个白名刀烙过吧。2。6我把这个启用好，这个12。6的。那这有种方法，它是最终方法。看一下这个2。6。啊，2。61样啊，也是这个路径啊。

这个路径是没问题，但是注意。嗯，不对了。

![](img/b2e8feda5004e2476b7a06e232ecf96a_85.png)

来看哈看一下。

![](img/b2e8feda5004e2476b7a06e232ecf96a_87.png)

2。6我们把这个路径要确定，要是正确的。你通过这个方法绝对是不行，这个毫无疑问的。呃，不相信我们给大家来看一下效果。



![](img/b2e8feda5004e2476b7a06e232ecf96a_89.png)

好，你在这个地方是吧，你看它会报错啊，报错。好，我们说创建一个文件夹test。你看能创建吗？你看。是阻子了是吧，这个地方是不行的啊，不行的。你说我传购文件吗？行不行啊，也是不行的。2。到了2。6的时候。

也就是说你这样的扩张米，也就是说这个文件夹解析这个内洞啊，你在编辑器里面也是行不通的哈，那高版本是行不通的。我们只能采用白名单绕过了。所以大家这一点要注意哈。那么不行的话，我们就换一种方法。

那么这个方法怎么突破呢？我们在这里给大家。

![](img/b2e8feda5004e2476b7a06e232ecf96a_91.png)

演示一下嗯，2。6的是这个路径啊，把这个路径要记一下。

![](img/b2e8feda5004e2476b7a06e232ecf96a_93.png)

好。那么我们在这里给大家。看一下效果。好，我们在这里。看怎么做。嗯。这样吧。呃，先那个我们在这个8080。



![](img/b2e8feda5004e2476b7a06e232ecf96a_95.png)

我们先来到2。6。6的文件夹。这个文件夹。啊，这里有没有我这里有一些文件哈，我把它删掉。

![](img/b2e8feda5004e2476b7a06e232ecf96a_97.png)

我们首先给大家来一个就是说解析那段，看他能不能就说。把这个解析漏洞。解解析那段能不能突破他啊，就是我们就相当2连41样。看一下效果嗯。自十呢种。是。分后点GPG是吧？我们来看一下啊上传。



![](img/b2e8feda5004e2476b7a06e232ecf96a_99.png)

好，他告诉你这样文件上传错误。

![](img/b2e8feda5004e2476b7a06e232ecf96a_101.png)

那么我们来看一下行不行。他这样是不行的，是不行的，对不对？

![](img/b2e8feda5004e2476b7a06e232ecf96a_103.png)

所以这一点毫无以外，就是说到了2。6以上的版本，他把这个漏洞修掉了。但是我们有例外的方法突破了，怎么什么个方法呢？嗯。这个没关系，我们就是说。把这个地方。还改成AP啊，改成AP。SP更不允许上传了。

对不对？那么我们就在这里来拦截数据包。好，看好了哈，这个地方好，我们点击上传。好，我们把这个数据包已经拦截下来了，拦截下来发送到离配了。



![](img/b2e8feda5004e2476b7a06e232ecf96a_105.png)

好，我们来到这里，我们给大家来。操作一下。呃，这个地方我们看怎么改。00嗯。TST。呃，GPG都可以哈。呃，TXT是可原许上去，我们GPG吧。那么这种00%我们要转换一下哦。卷一下啊，成这种空格的。好。

那么这种方式排名打哪个啊，连年再打。嗯，接着我们看一下他他怎么回。哦。像这个代理我们把它关掉了。

![](img/b2e8feda5004e2476b7a06e232ecf96a_107.png)

把这样好，我们再聊到这里。

![](img/b2e8feda5004e2476b7a06e232ecf96a_109.png)

获取文件跟文件夹路径。嗯，文件没获取到吗？好，我们再来一下。我们再过去。

![](img/b2e8feda5004e2476b7a06e232ecf96a_111.png)

帮我们看一下服务器。他到底传了没有？

![](img/b2e8feda5004e2476b7a06e232ecf96a_113.png)

那没传送来了。嗯，如果我改成TST的。我闯一下。

![](img/b2e8feda5004e2476b7a06e232ecf96a_115.png)

![](img/b2e8feda5004e2476b7a06e232ecf96a_116.png)

呃，已经过来了，其实已经过来了。哦，已经过了OK改成T如果GPG不行，你就改成TXT啊，这种方式也是可以的。但是他这个地方还是个杠是吧？环西棍。那其实没事的哈，我们再来一下。我再获取一下。吓。



![](img/b2e8feda5004e2476b7a06e232ecf96a_118.png)

哦。第一下的时候注意哈，当你发第一个包的时候啊，就是00攒动之后。载动之后，它是有时候他就变成这种了。



![](img/b2e8feda5004e2476b7a06e232ecf96a_120.png)

把空给变成下面有个杠了是吧？你在这里再点一下go啊，它就会把这个杠变成。把这个把这个把这个杠，它就会出现这种情况的。再进行穷妹妹。啊，一个括号，一个加了个一啊，当他再就是发发数据包的时候。

那么我们这个文件就已经OK了。

![](img/b2e8feda5004e2476b7a06e232ecf96a_122.png)

啊，已经改过来了。所以说他这个地方就存在一个漏洞的，而这东我们获得到了一个这种。看到没有？

![](img/b2e8feda5004e2476b7a06e232ecf96a_124.png)

那么这种我们就是直接可以解析了，这个毫疑毫无疑问了，是吧？好，我们来看一看一下效果吧。你看对吧？好，这个就是我们。



![](img/b2e8feda5004e2476b7a06e232ecf96a_126.png)

2。6啊2。2。6。6。我真的。针在这种版本我们就突破方法啊，通过这种方法来突破。就是我等于相当于教了大家两三种方法哈。希望大家就是能用得了。好，接着我们来看一下后面的啊，先把教程暂停一下吧。

等一下我们再接着讲解。

![](img/b2e8feda5004e2476b7a06e232ecf96a_128.png)