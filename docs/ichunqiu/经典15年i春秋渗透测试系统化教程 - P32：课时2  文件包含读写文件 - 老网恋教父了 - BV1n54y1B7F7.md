# 经典15年i春秋渗透测试系统化教程 - P32：课时2  文件包含读写文件 - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。🎼Yeah。好，接着我们刚才讲解。现在我们看一下PSP包含文件。嗯播放多文件。这个就是说包含那一种，它不只是说呃结合上传那种啊，直接包含这个图片里面的一句话木码啊，就是我们刚才所讲解到的。

所它啊它的功量比较相当强大，相当强大。它可以读文件，写议文件都可以实现。那么我们首先来看一下。他这个PSP包含怎么样去读文件，怎么样去读文件，那读文件是怎么一个过程？首先他会用到的一个。这个。

这个内置的一个函数。这样的一个鞋这样的。我们在后面我会出来个。全部列出来啊全部列出来。先我们来看哈。这个是他的一个。配置协议PHP费用。你的在读啊读采用64位的方式去读。那么举个例子，我想。

读我们当前目。当前目录我这个DVW当前目录是。嗯，这个目录。嗯嗯，读这个目录这个文件X点PHP看一下X点PSP它是我们的一句话嘛，我要读这个给大家看啊，给大家给大家看一下，演示一下。嗯，在这里。不是。

啊。不好意思，他这个地方多了一个。再读一下啊，这样的话我们看到没有？当我读这个读X点PHP的时候，它就读到内容了这个内容。他这个是。倍数6464位加密掉。我们要接啊。我们要继续对他进行解码，备是64的。

看到这里啊，它是采用倍数64一个编码啊，不能不能是加密啊，也可以说加密了，你你不知道是啥是吧？一看到这种形式的，因为我这采用的是倍数是64位。这个编码来进行读这个文件。读这个文件。

对于我们读出来是也是被设了664位。啊，那么我们需要对这个。进行睫毛啊，进行睫毛。你把它复制。这个BRP它本身它就有这个结毛功的。Oh。嗯，在这里看一下。好，搞错了。你看。出来了，看到没有。

是不是这样的？你自己看一下。对不对？没问题吧。这就是他读文件。啊，读文件PS比包含多文件怎么样去读文件，它包含的是怎么读文件，就是这么读的。你说。这个前面一经记住就行了。它采用了这个。嗯，内置的一个。

协议啊PHP协议嗯来进行读。读读任何部分，这个这个X点PHP因为就是这个包含包含文件的这个。当前当前路径的一个文件啊，如果你想读其他的目录。读其他的目录的文件，那么你就再在后面接其他目录的文件就是了。

嗯。那接着我们来看一下它这个鞋文件啊。啊，就包含的是如何去写文件。这个也是。嗯。很简单的很简单的。Okay。嗯，在这里我们还是拉这个。地址给大家演示一下啊，还是个给大演示一下。Yeah。

直接我们在后面接上PSP。两点放斜讲用铺车就行了。用铺车。啊。您或者是什么写文件啊，就是生权的意思啊，就是写写。那么这里是采用什么信式呢？你看嗯是就这就习出。Yeah。Okay。好，看下代理。你错。

Yeah。回测一下你就可以了。那么怎么你再接着。把你要提。你要写录的内容。咋啦？复制。这个是我我要写的写的内容啊，我现在写这个内容。

写这个什么啊利用这个PHPD这个system这个函说类就是调用系统来执行命令啊调用系统来执行命令。嗯，给大家看一下效果啊看一下效果。那么在这里大家注意好，这里有个坑一个坑一下。提交速度。哎。

哎呀我想把它发到里片。跳下。你看。诶。看到没有他直接知新名呢执新明。嗯。

![](img/d81689928f14f9ee23dde541db26cfca_1.png)

Yeah。你看。Oh。

![](img/d81689928f14f9ee23dde541db26cfca_3.png)

是不是？是不是对，没错吧。如果我像现在加一个账号，letto又说123123。密码1123。那么现在我要加一个账号。



![](img/d81689928f14f9ee23dde541db26cfca_5.png)

那么我们看一下当前没有123这个账户吧，对不对？

![](img/d81689928f14f9ee23dde541db26cfca_7.png)

好，现在我们来看一下效果。

![](img/d81689928f14f9ee23dde541db26cfca_9.png)

好。再接着看。Yeah。咩。是不是有123这个账户啊？

![](img/d81689928f14f9ee23dde541db26cfca_11.png)

没问题吧。这就是说嗯他怎么去执行命令，包括写文件，我们只要把内。把内容放在这里啊，进行提交就行了。评价就行。注意一下啊。嗯，这个。包含这种写文件的话，你时刻要注意一点。比如说只有在这个。

PSP点II这个配置文件里面。这个OURLin为 on状态的时候才可以使用才可以使用。嗯，这个跟原程包含一样，这个一定要问啊。还有就是说我们这些。这个也是这个应该。

也是PSP点按应呀因为我的是这个网上下载的这套程序，所以说它这个是这个名字。啊，那大家注意一下就行了。通过这个PSP点NI这个配置文件，你查找这些。唱尝这。这些这些都是PHP语言里面的执行命令的。

像sstma、EXCCR、oppooppen啊啊等等啊，这这些都是危险的这个。钓鱼系统的一些。啊宋理令，我们这些一般情况下默认是一般进尾，所以千万不要把它打开啊把它打开。建议就是直接把它删掉。

啊在配置文件做安全的事。如果你用用一般情况下，你的微博程序用不到这行。所以说建议直接做安全的时候，直接把这条删掉。再重启一下阿87。这个时候你再去执行，你再去写文件或者去执行命令。嗯。

这样的话就不行的哈，这样的话就不行了啊，这里我就不再耽误时间了，大家的时间大家自己去回去操作一下。5。呃，既然讲到这个嗯。这个包含那种这个。内通的这个藏身原因哦我们还给他的。包括他的这个怎么去防御啊？

嗯，还没讲解啊，留在后面讲解，等一下再再说吧。好，接中我们来看一下这个PSBPSB包含的这个。文件这个作用很大。这个在我们我的实际渗透测试过程中啊，也遇见过几几次啊，对方就是说。服务器啊。

远程包含也没写，写文件也不行。嗯。也没有上床了他也没有上床了。反正比较恼火啊，比较恼火。但是但是后来我就发现了他这个阿巴奇有一个。就是我们在网站输入一些错误的内容的时候，阿巴姐会记录。啊。

记录一些错误的，包括我们的访问。打开任何一个页面到都会记录，这周提交的都会记录啊。那么阿巴奇的这个日志文件是哪些呢？我们来看一下。Yeah。是就这些这些。你看我们刚才访问的。我都会记录下来。时间。

IP地址。他都会记录下的。那么我们既然有了，我们知道这个。就是包括IOS也有好，I87Itomoca都有都会记录这些。妨问而知。包括错误的，正确的，他都会分开记录。那么既然我们有了这个日志，就是。

一般默认有个路径嘛，inex是有个in那ex是默认路径，window有window默认路径，看根据根据你这个安装。那么我们根据这个默认路径，我们如果知道了对方网站的这个默认路径啊，默认路径。

那么而且对方的网站有这个。软件包含这种，那么我们现在就可以拉到我不需要了，也不需要对方有多大的权限，有什么PSP包含这的写啊，补过啊，乱七八糟的。啊，我们现在只需要入驻文件。

有了这个日志文件就可以拉到这个微博需要。那我们现在看一下怎么去。重组。这个注意啊，但是这个在实际过程中我遇我遇我遇见过几次啊，就是说他别人网了像没有上传功享的，也没有开启远程这个。远程包含啊。

你这个读啊是不行的。这样的话我们的一句话没法写进去。那么唯一的方法我们就找它日志日志日志文件。有了这个我们就可以。就好做好操作的。那么我们现在看一下怎么具体操作的。

先我们把日志文件为了在这里演示这个例子的话，先把这个删掉。嗯。补上班，28克，我们根据时间来排。Yeah。Oh。我举个例子，在后面这个绝对是错误的吧，呃参数都没有。他陈数都不接，我在这里插了一句话木。

Yes。お。这样的话他就会报错，你看报错了吧，刚报错，阿发起他就会记录。臭的纸。从月日他就在记录在这里吧，应该。我看一下。哎，打给你面没内容啊。不对。Okay。Oh。嗯。我们看一下对影。他已经记录了哈。

就这个地方。看到没有？没有在错误里面再有个30点logo放满这个点。你看。我插了一句话吗？你看也就是说你当你输入错误的时候，它都会记录啊，防问错误的要记录下来。记是在这个X点logo里面。那么这个时候。

我们有了这个之后，就让他在，那么我们就包含而这。不好子，我们来看一下效果。那么怎么包含呢？这个日它是在路径是在。第一季。原积。两节两节，我们还有返回一级。嗯，你看啊当我们两级路径时返回到这个。

我看一下相对路径是在。12。Yeah。再要再要进入这个问题，也就是我们来了。也觉我们应该要要这样写。第是的。对呀，是4个号。嗯，这个是怎么得出来的？行。通过这个阿巴奇。他是在阿巴旗的。

logo里面就是我们在写的时候，你看我怎么写的啊，这个。这个问件是吧？而我们当前是在。当前路径是在这个。当前路径是在这个DVWA里面嗯，看一下。DVWA。这个里面。你往上一点一。嗯。诶跟。3。4。

也是直接来到这里了。一个。才到了这个阿巴奇这里吧，对不对？才能才能到这里吧。所以说他这个地方你记住。那么是要怎样写？我这样写。现在录音。是。好。我打了一个等于号。好，这样的话就包含进来。

那么这个时候你再用菜刀去连接。你看我们用菜刀试一下效果。能不能连接？嗯，菜刀的密码。Yes。你看。这样的话就连接上来了吧，没问题吧。没任何问题，直接可以连接。这就是我们的这个。包含日志文件，哪尾不需要。

就是这么回事。呃，关于这个大家回去之后慢慢练习练习啊，这个东西没什么没什么难的，这是一个经验问题啊。多练习几遍。我机上我们来看一下这个载蛋包哈。在段包含在这个实践过程中啊也遇见过。嗯，遇见的少。

在这里给大家顺便讲解一下。这个就跟那个。林琳咋动宋权雷动一样。你看是怎么样去操作的呀，注意啊。嗯，代码我已经给大家踢出来了。嗯，在这里我也给大家打开一下。嗯，这个。那后在这里我们就。你来吧。Okay。

你们打开这个文件哈，嗯A。就这个文件。那么这个地方我们一个配置，一个参数。那么我们就在这里。那好。PH参数是配置。那么大家可以看一下这里。inc都包含。装含这个就是我们例如我们在这里。后面。有等于吗？

Yes。这里面我们。包含任何一个文件，就是在这里配置这个地方，我们给他任何一个文件，它后面加了一个什么点PSP这个玩意。有个点能进行一个。顾虑就是说我们这个举个例子啊，我们现在是嗯。

就把刚才的图片吧推死了，点GPG。你看他这报错了。对不对？如果我在这个地方呢。加个00。把它攒动一下。我们再看了一下它效果是啥样子。嗯。有这个图片吗？呃，这个X。X点PSP。Good。



![](img/d81689928f14f9ee23dde541db26cfca_13.png)

く。

![](img/d81689928f14f9ee23dde541db26cfca_15.png)