# 经典15年i春秋渗透测试系统化教程 - P17：课时9  注入式攻击-Cookie手工注入(下) - 老网恋教父了 - BV1n54y1B7F7

好，我们把这个。或者是猪路这个第二种方法给大家讲解一下。呃，第二种方法也就是老早以前的一种方法。呃，大概0呃06年07年那个时候啊，就采用这个猪路中转工具，那对这个扩件式猪路。好像这款工具只针那SP啊。

那么PSP啊，我建议大家用这个用这个SK map这样的工具，或者通过BOIP来来实现。那么以前的这种方法，我也给大家讲解一下他是怎么做的。啊，在网上也有这方面的教程。他是这款工具。啊，这本地的呃一。

等一下，我把这个工具退一下。关掉。点错了。啊，这个注入转生成器。

![](img/b93e320d15b25a5409d7065adfb16564_1.png)

那么大家只需要把这个地址。

![](img/b93e320d15b25a5409d7065adfb16564_3.png)

填写在这里。那么这个ID。这个地方就直接。把这个剪切来到这里。那么这个58这个参数。嗯你看这里他有一个说明哈，他有一个说明。把这个。哦，我点这里啊。



![](img/b93e320d15b25a5409d7065adfb16564_5.png)

搞错了。复制一下。

![](img/b93e320d15b25a5409d7065adfb16564_7.png)

首先他这个是注入地址，注入地址是这个。那这个填写ID等于哎这个ID。等于多少这个值。那么这个。我本。参数是填写在这里，你说。你这个地址跟这里一样，来源于这个。那么你看一下哈。他这个ID是怎么填写啊。

ID。ID等于。是填写这里。注入注入健民。那它参数的值填写在这里，古巴嗯是多少就是多少，你填写。那么这款工具也比较简单，接着你生产SP。



![](img/b93e320d15b25a5409d7065adfb16564_9.png)

![](img/b93e320d15b25a5409d7065adfb16564_10.png)

你看。他生请了一个叫GMcodes点SP。你可以在这个。当前目录可以看到。哎，我生产的是什么？哦こです。他有po，有扩家。你可以用记事本打开。你在这里可以看到。你看到没有？他是这么回事的。

他其实就是当我们在这里嗯。

![](img/b93e320d15b25a5409d7065adfb16564_12.png)

采用各种方式在这里注入的时候。啊，注入参数的时候，它其实就是把我们后面。

![](img/b93e320d15b25a5409d7065adfb16564_14.png)

填写来这个注落语句啊。写入到了这个扣角室里面。啊，但是我们在网页上输入的是这个。给种方式对不对？但是到我们再采用这种方式的。注落的注落的语句啊。那么他直接代替代替到放在这个后面来进行。

通过这个程序来实现这个注入。那么下面我们就。介着你在本地啊，因为我这个网站是在虚拟机里面哈，那么接着你在这个本地搭建一个这个本地城市啊，这个就是小型的一个搭建微博站点的。要不站点。嗯。好。嗯。

我们接上这个。这个生请出来的文件。

![](img/b93e320d15b25a5409d7065adfb16564_16.png)

好。那么你在这里可以看到。嗯。关下。ID等于58。当前这个页面不对。页面应该是不需要记录的。

![](img/b93e320d15b25a5409d7065adfb16564_18.png)

![](img/b93e320d15b25a5409d7065adfb16564_19.png)

应该是这个地址。

![](img/b93e320d15b25a5409d7065adfb16564_21.png)

但是我们这个地址这个地方。

![](img/b93e320d15b25a5409d7065adfb16564_23.png)

嗯，忘了。他这个地方还要接送他这个pos的提交值这个地方。

![](img/b93e320d15b25a5409d7065adfb16564_25.png)

注意好。我们在这个地方需要这里。这样写。他这个是这么回事，是这么写的，这样的话就OK了。来到了跟我这个打开远程的跟本地打开是一模一样的。你看到没有？对不对？你对比一下啊，对比一下，这样是OK的。



![](img/b93e320d15b25a5409d7065adfb16564_27.png)

啊，也就是这个页面是我这个。这里生通过这个侏肉军菌生成器生成出来的一个文件，那么后面也要接上这个。这个pos提交了一个值，也就是说这个。重奖工具里面这个值这个值是我。是我手工改的，就是说我们在这个。



![](img/b93e320d15b25a5409d7065adfb16564_29.png)

你的ID参数值为多少就是多少，但是他这个。一般前面这一节你不需要改好，你只要改这个值就行了。那么生成出来之后，用这个地址。那么通过这个地址，你站在这里，你看我在这里，你看首先你看一下这里，当我输入安y。

一等于一，你看他也。

![](img/b93e320d15b25a5409d7065adfb16564_31.png)

防御的吧，对不对？防堕落程序防御的，等我在这里输入了，你再看效果，你看。没有防御，你看没有？这就是扣子是中矩了，你看。现在报错，你看对不对？说明这个地方存在注入点。等就说这个这种方法就绕过了这个。呃。

仿筑路就是这个我们变成了扣就式筑路。但是我们这里。在这里提交参数的时候，我们使用的什么ge触方式吧。嗯，通过我这个。工具生产出来的文件，也就是说它这个我现在当前的是这个页面。

这个页面就是我这个工具生产出来的。你看。

![](img/b93e320d15b25a5409d7065adfb16564_33.png)

就当我ge走输入的时候，它自动把它写入到了扣室里面，带入到扣学室里面。它是这么回事的。

![](img/b93e320d15b25a5409d7065adfb16564_35.png)

好，下面我们接着操作。那么我们接着后面就直接。把他这里。

![](img/b93e320d15b25a5409d7065adfb16564_37.png)

代入到这个把usname跟 passwordssword代入里面，嗯查询用户名和密码就是了。啊，这个前面给大家讲过啊，这这这里嗯我在这里大概演示一下吧。



![](img/b93e320d15b25a5409d7065adfb16564_39.png)

20个字弹吧。

![](img/b93e320d15b25a5409d7065adfb16564_41.png)

前面在用BOIRP的时候，大概是第三个自动吧，跟第六个吧。Yourそ name。怕死我了。Hello。这样的话，用户名就出来了，你看吗？用户名密码。关于前面什么欧do半啊这样的语句啊。

我在这里就不再演示哈。这个你看一下这个BURP呃，前面有个30之啊，包括这个呃BUIRP手工作。当然这这里我只是教大家这个方法啊，这老老早以前的采用的这个。呃。

扩小时速度如果也可以通过这个post也可以。啊，pos制度，因为有些有些站点就是说防御的get头，但是没有防御pos，这样你通过这个工具也是可以的。还有一些夸张是对不对？去构造啊。

你有的人不知道怎么去用，就是po夸张，怎么去生成文件，怎么样去。呃，钓鱼怎么去操作啊，也可以通过这些。中转工具来进行实现来进行实现，这样也是OK的。呃，这个方法我们就给大家讲到这里。好。

下面我们接着讲解。

![](img/b93e320d15b25a5409d7065adfb16564_43.png)

嗯，还有一种方法，如果通过工具来讲的话，也比较简单。第一个是穿三甲。说上句，也是第三种方法吧。第二种方法采用这个军装工具。嗯。在这里做了是吧，我们在这里我说过，你这样你这样操作是绝对是防御掉。冯御瑶。

那么如果我在这里通过穿山甲怎么去操绕过这个防御啊，就采用这个扩折是住。你在这里显定克折式，你看到没有？就这么简单，你在这选定一下就行了。我在住路，你看。你看就出可以了OK了，你看没有很快的，对不对？

你看你再开始菜表就是了。对户取表，你看A厘米对不对？嗯。你通过这个表，你再忽列。这。ID已经出来了，你看。胖死傅的已出来了。嗯。接着看吧，哎，右手name目也出来了。就说你在这里。嗯。怎么回事？😔，哦。

你前面有一些信息。哦，这是点错了。嗯，你在这里来操作就是了，这很简单的啊，你鼠标点点就OK。看着这里浪正在运行，很快这速度。比我工据比我们手工快一些，因为他这里都已经填好了，有默认的一些表知动。

再列就获取出来了，那么你就直接获取数据呗。你在这里直接获取数据就是了。那这个素质还还不行。他自己暂停了你看。我们不用管他吧，你自己在这里。去测试一下，一般的我很少用穿酸钾。然后就哎哎可以了，出来了。

你看。拿上出来用户名用户名为AD名密码，看没？是吧。这叫穿三角，你在这里选定一下就是了pos，你那么你就你在后面要构造参数。



![](img/b93e320d15b25a5409d7065adfb16564_45.png)

那么我们主要给大家讲解一下这个SK SK map。这款工具来实现这个科学思路。嗯，这款工具看起神器啊，功能比较强大哈，比什么穿山甲啊。SVIG啊。这样的一些萝卜头这样的工具啊，强大强大M倍啊，强大M倍。

你像这还有一类工具就是用的比较多的。也有一款叫这个工具。就是SVIG。但是这款乐它有很多缺点哈。那明小智跟阿D这样的工具，我在这里提到不提什么NBS啊，什么教主啊，垃圾工具都是过时的。而且在渗透过程中。

一般的用这用什么明小字去一些的NBS啊教主啊这样的工具啊，什么小优啊这样的工具啊，那这样的工具一般都是嗯就是不是搞渗透的，就是瞎鸡巴胡闹的啊，因为垃些工具都是。跟这些SK的卖工具啊没法比较。

就是我建议大家学习过程中。你那些根据碰了没有必要碰，因为没用没用，因为它的功能极少极少极少极少，太弱了太弱了。大部分注入点你基本上是注入不出来的，稍微复杂一点的就都不行。

所以所以说你还要你还是把大量的时间。就有这个时间你去研究研究，学习学习SK了 map这样的这样的工具。因为它这个工具。



![](img/b93e320d15b25a5409d7065adfb16564_47.png)

在国际上黑K排名榜里面，也是排到前几位的，搞生特的基本上都用到SK map。所以说你把这个。时间用在这个。把有限的时间用在这个。对的地方。这才是关键，就是事半功倍啊，在学习过程中，你看这类根据就。嗯。

HNAVIG在这个get跟pose做度过程中还是更量比较不错的。但是它的更能比较渺小哈。太小太少了，你看所以我也不怎么推荐你怎么扣就是柱，他是压根是没有那，压根没有什么其他的表单式的乱七八糟。东北。

所以说。不推荐给大家呃不推荐给大家。在这里就。嗯你如果你是用这个地址，你是注入不出来的。

![](img/b93e320d15b25a5409d7065adfb16564_49.png)

你不相信你试一下，对不对？

![](img/b93e320d15b25a5409d7065adfb16564_51.png)

因为他这里没有显人，你也是跑不出什么乱乱七八糟东西的。跑不出来。所以说呢。在这里说一下。好，我们还是。回到头看一S map。



![](img/b93e320d15b25a5409d7065adfb16564_53.png)

这款工具大家去首先安装一下这个配偶。直接在网上去下载，就是SK的m怎么样去安装。你看。在网上很多的哈。小恩读疯啦。我们打开Q狗。那我这里怎么打开这么慢？你在这里SQ卖安装，对不对？从各狗搜索一下。

这里很多安装教程啊，你首先下载这个配L这个程序进行安装一下，再把这个工具。这个这个这款工具可以使用的，在网上很多哈，你自己去安装一下，我在这里就不再太多的讲解，很简单。



![](img/b93e320d15b25a5409d7065adfb16564_55.png)

嗯，这这里什么51CT啊，乱七八糟，这这里都有，你自己看一下。首先下载这个啊下载在这里下载地址也提供给你了。你看。2。7对不对？



![](img/b93e320d15b25a5409d7065adfb16564_57.png)

一步一步啊，很简单的。

![](img/b93e320d15b25a5409d7065adfb16564_59.png)

啊，那么在这里会议。安装好了，那么他的用法扣学式用法是。呃。共有。首先更优是接我们的这个地址，更优参数接地址哈。注入注入地址，那么这个注入地址怎么填写的？我这里也大概写了一下。



![](img/b93e320d15b25a5409d7065adfb16564_61.png)

写这意见。因为我们这个ID这个参数是存在注入点的。

![](img/b93e320d15b25a5409d7065adfb16564_63.png)

但是我。

![](img/b93e320d15b25a5409d7065adfb16564_65.png)

但是我们要采用ge种方式被已经。

![](img/b93e320d15b25a5409d7065adfb16564_67.png)

被拦截了，对不对？被拦截掉了。如果假设好，我我跟你说一下，在这里提一下，如果跟说没有被拦截，那么你直接这样就行了。回车就可以注路了啊。这样是可以的。如果是post啊post注注意。

如果要是pospos组，那么你在这里刚刚d头后面接一个什么？后面介绍我们的参数。就是ID等于。ID等于58。啊，如果是po组，那么这样就可以了。啊，也是可以啊，没问题。但是我们这里是什么阔就是足。

那么COKIE。

![](img/b93e320d15b25a5409d7065adfb16564_69.png)

采用这种模式，就是我们现在讲到的。采用这种把这个ID。

![](img/b93e320d15b25a5409d7065adfb16564_71.png)

把这个ID单独拉出来，也就因为这个地方存在注入嘛。但是我们的这个这套程序。针对这个get跟pos做了防御。所以我们这个把这个参数放在这个co里面，co里面。那么前面要加一个刚刚。破酒。



![](img/b93e320d15b25a5409d7065adfb16564_73.png)

哦，这这个地方我多了一个C。好，对呀，别打错了。那么接着我们在后面嗯ID。等于58。其实这个地方嗯嗯啊这个地方加引号加三加引号跟不加引号也是可以的，应该是。没问题。你在这里，因为要采用扣掉十猪。

采用课旧式注入的话，那么你这个级别例。要改为2，默认是一的级别。注意哈，默认一的级别，如果你只要采用这个参数扩掉是注入参数，扩掉是注入，那么这个级别必须要。大于等于2。大于等于2，最好要大于等于2。



![](img/b93e320d15b25a5409d7065adfb16564_75.png)

哦。嗯，进去啊。等下啊。你进来吧。啊我。

![](img/b93e320d15b25a5409d7065adfb16564_77.png)

我接着讲解。

![](img/b93e320d15b25a5409d7065adfb16564_79.png)

嗯。SK那个默认。它是一的级别，也就是说不用解参数。但是你如果使用这个扩制注入，那么你必须要级别大于等于2啊。一般的我们我输入是2。它的最高级别是5，就是对所有的参数进行注入测试。嗯。所以我见。

大家输入二就行了啊，输入二就行了。那么你在这里回撤。他就开始注入。平快了。

![](img/b93e320d15b25a5409d7065adfb16564_81.png)

![](img/b93e320d15b25a5409d7065adfb16564_82.png)

他发现的ID存在注入点，问您是否。保持。啊嗯，你这样的话，他就OK了。你看2003系统，它马上拆出的嗯，它这个是采用ISOS6。0的SP程序数据库是什么？



![](img/b93e320d15b25a5409d7065adfb16564_84.png)

access数据库。那么接着你需要接是接类接其他一接一个参数，就是刚刚tables。现在我们知道了它是access数据库嘛，现在我们来看一下它这个库里面的什么表，那么怎么做呢？tables。



![](img/b93e320d15b25a5409d7065adfb16564_86.png)

![](img/b93e320d15b25a5409d7065adfb16564_87.png)

很快的哦，他这个。

![](img/b93e320d15b25a5409d7065adfb16564_89.png)

你看这他现在是他这个方法也是通。

![](img/b93e320d15b25a5409d7065adfb16564_91.png)

也是暴力破解，一个个的猜，没办法，你大意。哦，他这里提示了你这个现场默认是一。呃，这个现在你可以设大一点，设个十啊，设个十，建议为什么设个十这个十跑的快嘛？在现在在那个玻璃铺解速度快一点。啊。

他也是一个的也是猜，没办法，你看这个速度也在这里也是猜。你看现在我们已经猜出了AD名羊右手表啊，这些表，你看是吧？book6表。这里我就不让他猜了，对不对？



![](img/b93e320d15b25a5409d7065adfb16564_93.png)

抗学加C。暂停。他这里是拆出的表。就是我们这个库里面的表。那么现在看到这个ADM表出来了，那么我就知道大概这个账号密码是存序在这个ADM表里面，对不对？那么我们接着。接到输录一个什么参数呀？刚刚DMP。

灯普公司。不是不对不对不对。诶。现在我们知道了表表知道之后，我们需要一个什么。自动吧自动。也是说。用这个参数。把这个表。你要你要去。读哪一个表里面的字动，那么你把这个表，如果你想读右手。

那么你把右手放在这里。现在我一看到AD面就知道管理员账号密码是在这个里面。那么我把这个。表写在这里，杠T这是杠t叫tabletable tables的意思，就是表ad me这个是clolo。改肉。

goms这个是一个嗯。知道啊知道。我现在来来。AD I AM I N。我们来看一下它里面有什么字段。

![](img/b93e320d15b25a5409d7065adfb16564_95.png)

![](img/b93e320d15b25a5409d7065adfb16564_96.png)

把这个线场切大一点。这样很快的。好，现在我们可以看到它这里面有ID字档标题，用户名，什么单价。对不对？😔，还差一个还差一个什么怕死我的吧。他在暴里破解。6%。哎有6%他就暂停了。好。

pasword已经出来了，那么我们就只需要这两个市的。因为用户这个是用户名，这个是密码，你知道吧，对不对？



![](img/b93e320d15b25a5409d7065adfb16564_98.png)

嗯，这我在抗加息暂停了。好。那么现在我们已经知道了。user passwordword跟 user name。这两个啦。好，现在我们接着后面怎么做呢？我脱裤。嗯。

就是把这个usname给 passwordssword里面的内容。把它脱下来，就是说读取出来直接。保存在本地。刚刚大幕就是说再加一个杠C。刚刚大婆是一个脱裤啊，脱裤。针对我们这个。我一个知道。

里面的内容不大。拖到本地。好。来自于A厘米这个表，对不对？来自于这个表。这两个是A表里面的。自动us name这个字动跟password这两个字道。

现在我们把这个us name跟password里面的内容。把它读取出来好回撤。

![](img/b93e320d15b25a5409d7065adfb16564_100.png)

现在才开始那个人。读里面的内容。但这个过程有一点忙好。

![](img/b93e320d15b25a5409d7065adfb16564_102.png)

啊等着吧。好，看到这里，我们已经知道了，大概这个密码马上就要出来了。

![](img/b93e320d15b25a5409d7065adfb16564_104.png)

![](img/b93e320d15b25a5409d7065adfb16564_105.png)

，按理说他应该是没有这么笨呀。他应该是直接向。嗯。联合查询一样，应该直接可以直接督取出来的。当然在本地你们自己测试的时候，你看会不会有这么慢。按理说是应该直接他是。应该是直接OK的，应该很快的。

应该是我这边的问题。你看。好，用户名跟密码已经OK了，已经出来了。你家 a点名。这是密码，对不对？

![](img/b93e320d15b25a5409d7065adfb16564_107.png)

我现在开始对密码破解。来到这个过程哦，这个过程我直接回车了，他这里是。他这里已经告诉你这个。呃，问您是否采用这个他这个密码字典来进行。破解一2一的些话，他就是。

他利用SK map自带的这个呃字典来对这个我们这个MD5加密的值来进行破解。就是说我们这个值破解。来进行破解。嗯，也可以加载你自己的。MD5的这个字典来进行破解，也是可以的。

他还在这里还问你嗯采用什么方式来进行？呃，快递方式还是慢点啊。一般那按N键吧。哎，他这个地方我这个。我这个SK应该有点问题啊，他这个在破解过程中经常会。出现一些暂停。哦，已经已经OK了，已经完成。

完成我们在这里可以看到这个他没有破解出来，你看。没有破解出来。如果他破解破解出来了，他就这个密码password直接。为AD米呃AD名它他说明他这个字典比较弱小。一般的情况下，我不建议大家采用他的这个。

方式去破解啊，他这个破解不行，嗯，这个只是破解一些相对而言简单的一些加密的纸啊一些密码，像什么。嗯，卖SQ这里面的路车账号，如果密码为录出啊，他这样的密码它是可以破解出来的。

你看这里他一个警告没有走到呢。那么这里其实我们这个一般前通过这里就可以看出来了，它的用户名干密码，还有就是在SK的 map里面。



![](img/b93e320d15b25a5409d7065adfb16564_109.png)

他这些信息他都是保存掉。嗯，当前我这个地址是109。他已经脱完库之后，在这里有一个，如果你的数据库里面的账号跟密码比较多的情况下。那么它都会保存在一个excel表里面。



![](img/b93e320d15b25a5409d7065adfb16564_111.png)

这个CSV里面。啊，CSV里面你在这里可以看到。这个是密码，这个是用户名。

![](img/b93e320d15b25a5409d7065adfb16564_113.png)

他这个厂子里面有点弄。现样的话你可以。

![](img/b93e320d15b25a5409d7065adfb16564_115.png)

全部把它倒入到。这个CSV里面去，就是我们这个。他指定了一个文件里面去。到这个里面，我们再把这个账号密码整理出来。所以说Sk曼捕槽这一点是比较方便的。



![](img/b93e320d15b25a5409d7065adfb16564_117.png)

而且每一步他都会。

![](img/b93e320d15b25a5409d7065adfb16564_119.png)

有一些详细的记录，他都会以站点的形式。你看。我当前对这个站点做一下注入是吧？扣就是注。那么他这会在当他这个SK麦SK map这个。auto put这个文件夹下面有一个。你当前的一个站点的一个文件夹。嗯。

他有他的日志，你呢。你可以用记事本打开。你写字板吧，也可以。

![](img/b93e320d15b25a5409d7065adfb16564_121.png)

装一个其他的嗯，装一个好一点的这个记事本。可以一行一行的有先行的，先说行的。那么你看这些详细信息都会。每一步操作它都会有一个记录你看。最后是个什么样子的是吧？灵魂面面貌。



![](img/b93e320d15b25a5409d7065adfb16564_123.png)

嗯，在这里他都会记录下来。比较方便。包括这个哪一个是做。注入地址，你看他都有啊，它都有。包括他这个回话。



![](img/b93e320d15b25a5409d7065adfb16564_125.png)

当然这个我只是演示了一下它最基本的功能哈，后面还有更多的一些提选的一些功能。在SK的里面啊都可以实现。



![](img/b93e320d15b25a5409d7065adfb16564_127.png)

![](img/b93e320d15b25a5409d7065adfb16564_128.png)

到到时我会单独画一节口，后面给大家讲解一下这个SK map。关于这个SK map，我们先讲到这里吧。

![](img/b93e320d15b25a5409d7065adfb16564_130.png)

诶。就讲这几个就讲到这里吧。

![](img/b93e320d15b25a5409d7065adfb16564_132.png)

再见。