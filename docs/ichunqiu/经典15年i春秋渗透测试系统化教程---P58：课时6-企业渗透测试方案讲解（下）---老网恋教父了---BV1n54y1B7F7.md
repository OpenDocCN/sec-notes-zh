# 经典15年i春秋渗透测试系统化教程 - P58：课时6 企业渗透测试方案讲解（下） - 老网恋教父了 - BV1n54y1B7F7

哦，我们来看一下这个。另外一个企业的一个渗头测试方案啊，这个也是大家参考的一个目标哈。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_1.png)

呃，也是比较好的一个相当大的一个企业。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_3.png)

那么这个文档，那么你看一下别人是怎么写的啊，文档编号啊，秘籍。你告诉他这个是呃商业机密啊，就是这个一般的是都是属于商业机密啊，就你帮别人企业甚至测试一个网站或者一个一个系统。那么你出报告的时候。

那么这份报告就是商业机密啊，是不允许给任何人的，只愿许给当前企业。那么日期写一下版本编号写一下，再就是版权声明啊，你必须要做一个版权书声明。就是本文出现在任何这个文字叙述文档格式啊，插图啊等等等等。

就说未经授权不得全输的给任何人啊。才纳这个知识板权保护。我们在这里做一个简单的一个版权说明。再就是说版权的一个变更记录啊，这个文档创建啊，有哪哪个部门，就是你们公司的哈，这个就是再接着我们这个。

一件一啊丰富了内容，做一个简单的一个描述。那么这个就是一个目录啊，这个就是说整个网站上一个目录，这个没什么太究，你学word的就知道了。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_5.png)

好，我们再接着看一下摘要。呃，摘要就是说对这个当前渗透测试这渗头渗透测试这个企业的一个大概的一个描述啊。就是说经过什么什么啊管理股份有限公司授权。啊，我们公司什么什么赛的赛区小组在哪一年的这个。

对你们这个公司啊管理公份有限公司。把，进行一个渗透日期在这里说明一下啊。这个都是文字上面的一些东西啊。文字上面的东西就是说你把这个模板这个新要啊改成对方企业，给你自己的企业就行了。

那么这个模板直接可以给盗勇的改一改啊，大概就是这样的形式。那么这里标明了哈严重问题啊，中等问题，轻度问题，用不同的颜色标明一下。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_7.png)

展出一个图，用一个s用一个s自己做一个图形啊，图柄在这里输出一下，就是说啊严重的漏洞有几个中微漏洞有几个轻微漏洞有几个再接之后，你在这里啊做一个插入一个表种类严重来的啊。

例如管理员密码可明案获取strs two啊，阿巴奇的第一版本可以被录侵。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_9.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_10.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_11.png)

啊，包括一去那种DMZ未授未授权道具信息泄露。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_13.png)

再接受你服务的概率啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_15.png)

这个服务概率就是说你们公司对对 center的这个企业。呃，进行一个。服的一个概率啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_17.png)

这个再接做一个测试流程啊。这个跟我们上一份的这个报告啊有一点区有还是差不多哈啊，信息收集啊，深透测试啊、缺陷利用啊、成果收集啊、循环啊、威胁分析啊，输出报告啊，大概这样一个流程专用信息收集啊。

你看啊你看刚才也也是有的吧，信息收集啊，是1三周装。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_19.png)

此阶段中啊三车测试来样进行必要的信息收集，例如IP地址DNS软件版本信息IP档go狗中的公开信息，这就是渗透这个测试。此阶段中啊采用对根据这个三车测试来样，根据第一阶段获取到的信息。

对网络系统进行渗透测试利用。嗯，是吧。如果成功的话，可能获取到普通权限。那么这个其实跟我们刚才上一节课讲到的这个渗透测试流程其实嗯差不多啊，就也是做一个描述。啊，但是在文字上面哈啊有一些小的区别。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_21.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_22.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_23.png)

所根据你自己的选择吧，比如说我大概就讲讲几个大企业的一个。山度测试方案讲完之后，大家就是说参考啊，大家今后进行学习。这个是在企业里面工作的时候，投到每一个框架，等你学完我这套构展之后啊，做三条测试。

你不要只会写扫内证，菜内障，你要最终要出报告。那么出报告你要有一个模板，不是这个报告，你也也许你你在你的这个能力范围之内啊，尤其是初学者，你想不出写这样的报告的，你想不出来，你没有这个规范化的话。

你是写不出来的。😡，这这个是以。很多大企业这个很多这个工作人员不断的进行修改，网上在网善成这样的一个方案啊，三至测试方案。所以今后的这个三择成市人员，只需要在里面就是在这个测试这个。

这个测试这个测试结果这个地方。干。小岗村委。对方企业的这个。网站的一些漏洞啊，系统类洞啊，微部内动啊，网络类洞啊填进去就行了。把你现D测置的一些结果输出到这个报告里面。啊，其在其他的东西保持不变。

其他东西保存不变。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_25.png)

我，接着我们后面讲解哈。呃，风险管理的这个包括这个规避。我我这里面包含了哪些哪几个方面呢？就是说为了保证客户的系统在渗度车试工过程中稳定安全的运转，我们提供。将提供以下多种方式来进行风险规避。

所以说我们为了保证在渗头推市过程中，不会对造成对你企业业务有影响，主要是业务有影响嘛啊，我们采用哪些方法？那。规避这些风险。那么你在这个渗透C的报告里面要说明一下啊，这样的话就。看看 you。正规啊。

你的团队比较正规啊，不然您不要就是说没有这个目的的进行一个深度分析攻击，因为很容易出事。有了出事之后，我有这个报告，我参照我这个报告来进行做的。比如说第一，我们这个对象的选择。所是为了更大程度的这个。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_27.png)

避免这个风险的产生啊，一般现在测是我们可以选择对备份系统进行一个。测试尤尤其像这个负杂平LVS的是吧？那么这些这种情况，我们可以对这个备份的系统就是。

因为备份的系统一般都是这个没有去在生产环境之中正确的人家正常的这个启用，就是用户直接嗯就是不会影响这个说白了就是不会影响这个正常业务啊，不会影响正常业务，因为它只是个备份的嘛。

那么我们其实当时备份里面的数据是跟这个生产环境，正常用的这个里面服务器的数据是一模一样的啊一模一样的。那么我们只需要对备份系统上态测试。这找出来的那种其实就是这个正在生产环境运行的这个。对动是一样的。

所以说我们一般的情况下。有备份系统，那么我们就对备份系统进行渗度测试。尤其在深度设置过程中，为什么呢？为什么要对被分析的？尤其是一些登录扫描啊，有些登录扫描之后，它有一些什么删除功能。

它一扫描是它瞎点的，它不会像人一样啊，我们一般扫描的时候，这是瞎点啊，执行各种操作发发生各种这个测索命令。有的时候没搞好说把这条数据删掉了，把这个用户删掉了啊，或者直接宕机了，你扫描宕机了。

所以一般的我们在深度这置过程中，大家注意哈如果对方没有要求这个登录扫描或者不允许登录扫描，你不允你就不允许这个登录扫描的。因为登录扫描，有的时候你出了问题那，你要负责任的啊，这个还要负法律责任。

说的吧你把这个。😡，业务搞断了，尤其一些大企业交易交易性的，涉及到金钱方面。所以是比较危险的。啊，你这我在这里说了一下啊，你看与战线系统所安装的应用存在的这个数据差异是较小，几乎是相同的。

备叛系统几乎是相同的。尤其像LVS，我们只要对一台，如果两个内容是一样的，然后只要对一台进行渗透就行了。那么而其稳定性要求比上线系统低，因此选择对备范散度测试也是规避风险的一种常见方式。

那么第二个中就是时间的控制。那么一般时间限制，我们是从时间慢上去深度测出来啊，将尽力尽量。避免在这个数据的高峰高峰时候进行一个测试。主要是。减小这个测试工作啊，对这个被测试的这个系统带来的压力。另外。

渗透测试呢每次渗透前也通过电话或者邮件告知相关人员，以免就是说渗透过程中出现意外情况，这个都有情都有可能好。这个渗透测试过程中出现意外，宕机啊，扫描的时候断机了，你要马上告诉对方们。

我上到哪马上重启一下，把服务清圈看看看怎么回事啊，排查一下是不是我执行了某条语句或者什么这执行了这个。发生的这个现场连接数太大了，导致这个。服务器这个承受不了，这是断机了。那造成巨留服务攻击啊。

都有可能。所以说这个。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_29.png)

呃，必须要电话通知一下。第二个就是继续手账。呃，深度赛试人员一定要具有这个丰富的经验和技巧，在每一步三度赛试前，都有预预估可能会带来的后果啊，对于可能产生的这个影响的这个测试啊。

某一区攻击啊呃一区攻击啊将被记录并跳过啊，并在这个随后。因为疫区有的时候一区的不好就拦平的。我来数数理崩溃了，我想怎么啥数就可以啊，一思没讲工的数据课来崩了。并在这个随货者与客户这个协商决定后。

是否进行一个测试及测试方法。你要告诉对方一下，这个接着是监控测试，就针对每一系统进行一个测试的钱，测试人员会告知被测试的这个系统管理员，并且在这个测试过程中啊，会随时关注啊目标系统的这个复荷等信息啊。

一旦出现异常，停止渗透，CPU哎呀打了百分之会发展，还是会百分之百了。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_31.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_32.png)

其实工具使用啊，这推试的应院通过设置线材。有些是扫描的时候现场，包括这个SK住这个住了那个SKMM跑的时候，不然现在太高，级别不要，再搞个利V-5啊，太太大的话就这伏器受不了。呃。

插件塑料啊有些像那个扫呃漏扫这些扫描工具啊起名的呀，嗯包国外的呢。一个是啊。啊，这个X这个扫描器啊，它一些插件，有些插件是会造成局对辅攻击。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_34.png)

所以是比较危险的啊，就是说一些参数通过这些参数禁止这些参数来减少这个对系统的这个压力，同时还会去取这个任何可能对目标带来危害的一些插件。尤其一一区类攻击。一区类攻击。

我们经过与对方企业协商后再进行攻记哈。啊，进一攻击。呃，这里有一个参考依据啊，这个是比较好的呀。所以为了保证此次深度测试先进性。完备性、规范性。

就是说我们的三头测试工程师啊会参照下列国内的国际的啊与这个三车测试有关的一个标准进行工作。那么你要告诉对方啊，我我们这样的话就是比较啊怎么给对方一个企业的一个感觉是相当好的啊。所以我们做三头测试啊。

我们会参照一些国内的呀国际的一些标准啊，就相当于你读书一样啊啊，你是哪里毕业的呀是吧？不能做事啊，我我我我是清华毕业的那你跟你这个东西你给别人的感觉就不一样啊，给别人感觉不一样。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_36.png)

本在这里啊争选这个国际IS5啊S127001这那个标准。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_38.png)

啊，你在这里多多写一下哈。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_40.png)

啊，标准这个是国际的可参考的一些标准指南或者规范。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_42.png)

预期的收益，那你也写一下。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_44.png)

嗯，明确这个就是说。我们这次实施这个渗头测试服务啊，和对贵方的这个信息信息化系统啊起到如下推进作用。所以我们渗头测试的目的是做什么啊，目的会给你带来什么但给你企业带来什么。那么这个是别人关心的。

呃明确安全隐患，你要告诉这样啊，我跟做三头测试首先告诉你企业有什么名啊，你这个企业有什么内洞，有什么安全隐患，那么我我在模拟黑客根据一下啊，还原真实，还原真相啊。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_46.png)

啊，在这里多写一下啊，就从整体从外部整体切入到。最终落实到某个这个危险点，并加以利用。最终对整个网络产生威胁，以明确这个整体系统中的一个安全隐患。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_48.png)

第样就是提高安全意识。啊，提高安全意识，提高安全技能啊，大概是这样的目的。那接着这个服务这个测试服务说明啊，测试对象啊、环件啊。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_50.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_51.png)

那这里多写一下这个跟前面一样的，测试人员时间，注意事项。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_53.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_54.png)

再技住我们就是说现在开始用到的工具你都写一下啊，用到SQ map and map。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_56.png)

嗯。别不诉出啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_58.png)

包括这个新脏滴血呃滴血的一个扫描工具啊，NESSUS啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_60.png)

lets little speak那个扫描器AB scan看都写一下。我用到这些东西。呃，具体分析这个在winds平台啊啊用到浏览器啊，就你都把你三度车始用到的工具。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_62.png)

嗯，都写进去啊都写进去，告诉对方。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_64.png)

因为有的时候对方也关心好，就是说你用的什么攻击工具啊，找出这个内灯啊。啊，怎么样去验证的呀？也是别人是企业所关心的，一般技术上也喜欢关心这个细节上面的。那么这个呃领导一般呢不会去对你这些工具感兴趣啊。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_66.png)

看了指定结果看先全了。啊，我们看一下基本信息探测。就是说我们一般通过现在筛想，通过什么NNSlook up来对主机的IP地址NS记录等信息进行个查询，对站点进行一个基本信息探测。

这个主要它现在有DNS啊、max记录啊、IP地址啊，我们在这里都可以探测到啊，解系的地址。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_68.png)

你看一下。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_70.png)

包括DNS区域全区列的啊，然后都可以啊，通过这个。可以互议查询。就是说你这个域名。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_72.png)

忘总注册的时候。一明收益则，一明的到期时间。管理员的邮箱，尤其这个邮箱姓名很重要。我们有了这个之后，我可以对你这个邮箱的进行调用发送APT攻击。啊，发送木马到邮箱来来操作都有口能啊，都有口感。

包括一些电话号码啊，那我就打个电话问你一下一些相相关信息啊，来骗一下啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_74.png)

来进行钓鱼啊。包括注册时间啊，如有有些这个厂商这个域名注册时间。嗯，2015年到20116年几月份啊。那时间比较短，比如说快要过期了。那么这也上过一个漏洞，就别人忘了，这你的这个域名忘忘记这个续费了。

那说不定你把它抢过来了。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_76.png)

Oh。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_78.png)

这是开放档口与服务探测。啊，应用到那些工具，里如爱你买房就挨你买房是吧？

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_80.png)

那天津就天津啊你蒙的这个鸡杠就写几杠。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_82.png)

呃各个黑客探测。就通过这个的搜索引清。各个搜索眼擎，你改一下你这个号时就可以用了啊，或者代理都可以。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_84.png)

我们就通过这个Q狗可以搜索把哎 set这个命令。可以探作霍俊明的罗这个网站是GSP的那么可探着GSP的一些备份文件，PSP备份文件都可以看作用这样的语句来进行实现。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_86.png)

再接着我们可以用这个。那么这个命令干什么呢？查询是否有SK。脚本文件所有些就是。它直接这个脚本文件SQ这个数据库的一些脚本文件，直接放在这个网站这个 game目录下面。

你扫描直接通过搜索引擎这边把它搜搜索到了。那么这个文件里面也包含了一些针在你当前这个生产环境的一些数据库里面的。正常的一个。这个表账号密码都有可能都在里面。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_88.png)

包括找一些日志文件啊，logo啊FDV啊、奥利啊，通过这个命令都可以找，还有怎个找TXT啊，一些敏感文件。有些TXT里面写一些重要的东西啊啊，账号密码也有可能在TST里面。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_90.png)

还有一些配置文件啊，CONF。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_92.png)

啊，包括这个。XML这样的文件。就是反正通过这个搜索引擎找各种。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_94.png)

包括查第三方面组件啊，通过各个搜身引擎也可以查。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_96.png)

啊，这么早。看找后台怎么找？

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_98.png)

找后台。搜二级域名怎么搜？

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_100.png)

拿什么书我这里都写了。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_102.png)

那么后面就是写一些这个内同内洞。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_104.png)

这测试发现的问题整理。啊，那后第一个类的啊，例如我这里有一个。And。密码全进来哒。就是说发生密码会发送到管理。就是说在这个地方你可以看一下哈，经过BRP拦截。我把这个邮箱，这个邮箱是管理员。

默认是管理员的邮箱，但是我拦截数据包之后，把管理邮箱改成我自己的。那么这个密码。这密码找回这个姑娘，那我们这个密码直接发到我的邮箱里面去了。宝宝在我的邮箱里面，我直接把密码粘贴在这里，就登录上去的。

你看啊他发送了一个密码就过来了。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_106.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_107.png)

啊，这个是一个直接进入后台啊，对内部系统进行渗透。啊，这个是相当危险的啊一个密码，这个是我在这个渗斗这些过程中。也是遇到一个客户的一个案例啊，我这里加了个图。结用是这去远程命令执行来的。

大家可以也可以看啊，这个在教程里面讲过。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_109.png)

但是也不再做太多的而去。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_111.png)

包括这个。嗯。版本低的一些这种存在风险啊，这个是你是怎么判断的呀啊，通过这个。嗯。办本好，好把气得办本，就指纹躺走。啊，发现他这个版本比较低，而且经过测试。嗯，阿巴嗯这个系统这个阿巴其实存在一个。嗯。

取留服务工具CSRF等等，你在这里都要写一下。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_113.png)

包括一些疫区类的，他么在这里不带入探子扰去啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_115.png)

一冇子。这个是。嗯，安装文件没删除微博系统。那么这个这一块其实跟我们上一份报告一样啊，这个建议就是说也是差不多啊，测试结果修复建议，修复建议怎么修啊，那么在这里啊三级版本会删除这个泄露文件页面。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_117.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_118.png)

啊，其他一些建议那么在这里你说一下。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_120.png)

啊，大概就是这个也是后面也附呃附附录的这个附录这个地方啊，你写一下这个安全等级的一个评定，怎么能去评定这个高中低啊这些类种风险等级啊，在这里都说一下。我们大大概就是这么写哈。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_122.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_123.png)

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_124.png)

呃，在这里我们就讲这么多吧呃，等一下这几份报告我会打包给大家。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_126.png)

这己去看一下垂子写。嗯，这里还有几个。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_128.png)

这里就是一个分流测始方案的一个。整体的一个框架哈，现对测试工作的一个概率啊必要性啊。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_130.png)

啊，等客。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_132.png)

听下。这个对大家作用不是很大，有些企业需要。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_134.png)

呃，关于其他的方案，我们就在这里不再做太多的耳叙哈。呃，大家自己去。

![](img/d0c8ebe06b3c60df8ae853baa068bbc6_136.png)

到了企业里面都会有不同的一个方案。也是说呃我们就讲解了几个大的企业的一些渗头测试方案。希望大家就能对大家一定的帮助。呃，以后就是参照嗯我给的大家的一些方案，可以写一些三周测试报告。呃。

关于我们这个膳车测试报告这个方案的讲解，我们就给大家讲解到这里。大家有什么不懂的问题，到时我们再进行。



![](img/d0c8ebe06b3c60df8ae853baa068bbc6_138.png)

讲解啊。