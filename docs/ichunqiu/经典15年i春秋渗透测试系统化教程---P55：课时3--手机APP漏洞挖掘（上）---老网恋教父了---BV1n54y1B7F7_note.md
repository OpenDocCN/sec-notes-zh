# 经典15年i春秋渗透测试系统化教程 - P55：课时3 手机APP漏洞挖掘（上）📱

在本节课中，我们将要学习手机APP漏洞挖掘的基础知识。前面课程主要讲解了Web渗透测试，随着移动互联网的飞速发展，APP的安全性也变得至关重要。几乎每一款APP软件都存在一定的安全漏洞，且数量较多。本节课将带领大家认识APP的安全性，并了解如何进行安全检测。

由于移动APP安全涉及面广，一两节课无法完全覆盖。但我会将检测流程、手工方法等核心过程讲解清楚，并进行部分演示。其余部分需要大家自行实践，未来也可能会有专门的移动安全课程。

## 行业现状与安全检测的必要性 🔍

上一节我们介绍了课程概述，本节中我们来看看移动APP安全的行业背景。

当前，国内互联网发展过程中，PC互联网市场已日趋饱和，而移动互联网则呈现井喷式发展。智能手机普及后，人们更多地使用手机上网，电脑上网的比例反而减少。

根据工信部公布的2015年2月通信业经济运行情况，我国移动互联网用户总数已达12.9亿。同时，Google Play和App Store的应用数量已接近300万个。各行业纷纷进入移动互联网浪潮。

然而，APP开发相对简单，导致产品在安全性、可用性、稳定性等方面存在诸多问题，给企业和个人后期推广使用造成了很大障碍。这就是当前移动APP安全的行业现状。

## 主流厂商安全检测平台对比 🏢

了解了行业背景后，我们来看看目前国内提供移动APP安全服务的主流厂商及其平台特点。

以下是目前国内知名度较高的几家厂商：
*   爱加密
*   邦邦
*   通付盾
*   腾讯御安全
*   阿里聚安全

当然，还有360等厂商未全部列入。下面我们对比它们的产品形式、检测功能和主要特点。

以下是各厂商平台的核心特点对比：

*   **爱加密**：采用产品形式。检测功能涵盖应用安全、源码安全、数据安全、动态调试等，并可检测病毒、加固识别。它是首家提供iOS/Android加固加密的服务商，支持SO文件、H5、协议加密等项目。
*   **邦邦**：提供云端和产品形式。主要提供移动应用渗透测试服务、安全开发咨询等，以安全加固为核心业务。
*   **通付盾**：从应用层、网络程序层、数据程序层、服务器层进行检测。其亮点在于增加了服务器层（交互式）安全检测，能检测APP与后端服务器通信时的漏洞（如注入、XSS）。
*   **腾讯御安全**：主要功能包括病毒检测、仿冒跟踪检测、源码检测、DEX安全检测、盗版APP监控等。其亮点在于钓鱼网站和盗版APP的监控服务。
*   **阿里聚安全**：提供六大块检测功能，包括恶意代码检测、漏洞扫描等。宣称扫描速度快，漏洞库覆盖全面。同时提供应用加固服务，通过加壳、加密、代码混淆等方式防止反编译和二次打包。

各家厂商的检测维度划分不同，但核心检测内容相似。需要注意的是，没有任何一款扫描器能保证100%漏洞覆盖且零误报。对于已加固（加壳）的APP，部分平台的静态检测能力会受限。

## APP安全检测流程详解 ⚙️

在对比了各家厂商后，我们来看看标准的移动APP安全检测流程是怎样的。

一般情况下，我们可以利用上述厂商提供的在线免费检测平台。流程通常是：将APK文件上传至平台，平台自动进行扫描分析，并生成详细的检测报告。

以下是平台自动化检测的一般流程步骤：

1.  **上传APK**：用户提交待检测的APK文件。
2.  **黑白名单匹配**：平台检查该APK是否已被其他用户检测过（存在于平台缓存中）。如果是，则直接返回已有报告。
3.  **验证加密**：检查APK是否已被加密或加壳。如果是，则识别其使用的加密厂商，并进行有限的动态分析。
4.  **静态/动态分析**：对于未加密的APK，平台会进行反编译、解压等处理，然后执行静态代码分析和动态运行分析。
5.  **安全维度检测**：从多个维度分析安全性，主要包括：
    *   **应用自身安全**：如组件安全、权限滥用、代码混淆等。
    *   **源码安全**：如程序完整性、机密性。
    *   **数据安全**：如敏感数据存储与传输加密。
    *   **交互安全**（部分平台支持）：如与服务器通信的漏洞。
6.  **生成报告**：汇总分析结果，更新平台缓存，最后生成漏洞报告反馈给用户。

![](img/c4ddc9a6b1a99e987e852baf36917c68_1.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_3.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_5.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_6.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_7.png)

报告会明确指出漏洞位置、风险等级，并给出修复建议，与Web漏洞扫描报告类似。

![](img/c4ddc9a6b1a99e987e852baf36917c68_8.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_10.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_12.png)

## 手工检测分类介绍 ✋

![](img/c4ddc9a6b1a99e987e852baf36917c68_14.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_16.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_18.png)

了解了自动化流程后，我们进入更核心的部分——手工检测。自动化平台能发现大部分问题，但深入测试仍需手工完成。

![](img/c4ddc9a6b1a99e987e852baf36917c68_20.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_22.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_24.png)

移动APP的安全测试主要分为两大方向：

![](img/c4ddc9a6b1a99e987e852baf36917c68_26.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_27.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_29.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_31.png)

*   **APP自身安全**：指APK文件本身存在的漏洞。例如：
    *   组件暴露（Activity, Service, Broadcast Receiver, Content Provider）。
    *   不安全的数据存储（明文存储密码、日志泄露）。
    *   代码混淆不足导致的反编译风险。
    *   权限滥用等。
    *   检测方法主要涉及反编译、静态分析、动态调试等。

![](img/c4ddc9a6b1a99e987e852baf36917c68_33.png)

*   **交互式安全（业务安全）**：指APP在运行过程中，与服务器端交互时产生的漏洞。这部分与Web渗透测试高度重合，例如：
    *   SQL注入
    *   跨站脚本（XSS）
    *   越权访问
    *   业务逻辑漏洞等。
    *   检测方法需要通过抓包（如Burp Suite、Fiddler）分析请求与响应，并对服务器端接口进行测试。

**请注意**：直接使用电脑浏览器访问APP的服务器接口，通常无法成功，因为APP可能校验客户端类型。测试时需要配置代理，并将抓包工具的CA证书安装到手机或模拟器中，以拦截和修改HTTPS流量。

本节课我们主要介绍了APP自身安全的检测框架和流程，下一节课我们将深入探讨手工检测的具体方法和实战演示。

## 总结 📝

本节课中我们一起学习了手机APP漏洞挖掘的上半部分内容。我们首先了解了移动APP安全的行业现状和检测必要性。然后，对比了国内主流的几家安全厂商及其检测平台的特点。接着，详细剖析了自动化安全检测的标准流程。最后，引出了手工检测的两大分类：APP自身安全和交互式（业务）安全，为下一节课的实战操作打下了基础。

![](img/c4ddc9a6b1a99e987e852baf36917c68_35.png)

![](img/c4ddc9a6b1a99e987e852baf36917c68_37.png)

记住，自动化工具是辅助，深入的安全评估离不开手工测试的思维和技巧。