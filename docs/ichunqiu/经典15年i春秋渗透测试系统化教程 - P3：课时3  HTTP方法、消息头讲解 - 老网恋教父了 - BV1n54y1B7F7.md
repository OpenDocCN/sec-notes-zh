# 经典15年i春秋渗透测试系统化教程 - P3：课时3  HTTP方法、消息头讲解 - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。好，我们接着接着讲解。现面我们来讲解一下第二大块。HTTP的这个响硬包。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_1.png)

好，站点我们随便打开一个。就百度吧。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_3.png)

随便好。反正不是现在还嗯还没有到时上。这个软件我们要要看这个响应包，就是HTTV的这个响应包要怎么样去看。把它。右键在这个地方，右键。发送到。李play啊这个。看到没有？发送到这里啊，这个是调试的用号。

这个功才是专门调试的，包括我们经过调叉SS啊、支路啊、防护墙啊，全部在这里来调试啊，这个更能相当强的。好。那么。这样的话我们抓到了这个请求的包吧，这是请求包吧，这是请求包吧。我们请求包刚才给你讲解了。

好现在我们点购。啊，这个就是。返回的服务器返回的给我们的这个数据包。首先我们从第一栏开启。在这里啊，这个HTP刚才给你讲解了1。1啊，对默认一般的情况下，现在流览器都是1。1200okK。

这个是代表的是正常响应啊，200。呃，这里我们直接看这个文档吧。这个是二期啊，时间，想应的是什么时间啊。如果是。税我税我是服务器返回的这个。就是对方服务器的是。采用的这个中间键。

就是说LIS啊或者是阿巴奇啊啊，几6。0是代表6。0是依看这里，我们知道对方的服务器操作系统是。2003操作系统啊，2003。因为是按S6。0嘛，如果是7。0或者是7。5，那么是2008这样的操作系统。

是吧？你看百度百度这里返回是什么？嗯他这里还没有方悔。然后他这里做了是不安全。我们不用管它吧，每一个不一样是吧？对方做的一些安全上面的一些配置。这个是代表的是什么？

AP点let头是多说明对方的服务器采用的是。AP点late头就说明是。点let头的这个程序，就是说这个是那个。嗯，APX的扩上品SPX。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_5.png)

这样吧，我们在这里嗯虚拟机里面开一个开一个网站。演示一下。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_7.png)

你操作一下哈。随便。配IP地址IS。这样打开一下。好。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_9.png)

在这里呢。我重新抓包。我掉嗯。刚开始。哎乱七八糟的包还挺多的。嗯。好。已经抓到了哈，发送到这个里面。嗯，你配的吧。好，点击购。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_11.png)

好，这样的话抓到了哎，抓到了看这一点。呃，这个是SDB啊，1。1，刚才讲讲解过贝，就是时间，就是呃现在是2015年7月19啊。呃，可以看到这里啊，2015年。19号7月。

这个是我啊是我们这个minofIS6。0。哎呀，这个是4。它是么还要补下时间。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_13.png)

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_14.png)

这个是呃对方的。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_16.png)

刚才说过。看一下啊，这个是不是。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_18.png)

因为我这里是2003操作系统。通过这里来看一下。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_20.png)

是吧。2003。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_22.png)

N啊版本。看到没有？6点0。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_24.png)

抓的包是不是6。0，没错吧。哎，对方是呃福务建这个AP点la头。啊，这个地方还还真的还不准确啊不准确。我打开的这个站点是。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_26.png)

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_27.png)

嗯，真的。这页面没打开好。我们转发一下。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_29.png)

用它打开。其实这个是SP啊SP的。你看到这里就知道A是P那为什么我这里抓到的是。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_31.png)

点那头的。点那的我说过是ABX是吧？扩张名就是说我们这个地方是SBX。原因因为我这个地方你可以看到这里嗯。微博组微博这个扩展里面。我这个地方是。启用这个SP点la，就是说我安装了点la框架。

而且我这里也有站点啊，也有点la头的站点，你可以在这里。嗯，我看一下。稍等一下啊，这个打开有点慢。哎，等一下，我的站点是。是18，你说。我这里确实是。有S变X的，所以他这里检测。他只反馈一个啊。

不可能打个翻译号啊，这个还有1个SP啊，所以说。呃，他这个地方就是说你你要知道就是对方服务器这个网站。不一定就是。对方是SP的啊，不一定就是这个地方就显示AP。也许也许对方他根据这个框架来的。

你的一面打不开，后门不用。哦，好好，我这个地址错了。不好意思，这个地方应该是这个IP。我说怎么打不开啊，是吧？😔，现在可以打开了。我就这个地方看没有S撇X。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_33.png)

我们这个是一个长度啊，这个我们在注入的时候会给你详细讲解。根据这个长度就是每次碰到按1。1。2，这个长度不一样，我们确定它是否注入。所以说一些扫描器啊，它也是通过这些方式来进行碰的，它是不是。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_35.png)

这个连接类型啊，STMYL啊采用的编码UTF8。再说长度啊长度就是说这个小音包，我们打开这个页面，它的总长度是多多大，就多大这总长度也是8578。它每一个页面是不一样的哈。

这个长度是每你你没返回每打开一个，你在这里调试你你会发现每次是不一样的。但是同一个包它这个大小是一样的。啊，同一个包。对，这个是扣制信息，就是服务器给我们返回的扣件信息。

好在这里你大家看一下这个地方我也解释详细的解释。呃，状态码200啊这个200，当然它还有呃4。4啊这样的状态码，等一下在后面会讲解。嗯，你看一下这里还有哪个地方没有讲到的呀。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_37.png)

啊，这个消息统。这个消息的在后面会有。呃，这里我这个地方还没有这个嗯消息图。再返回的这个头啊，有些是有啊，有些是没有，所以说不一样。这个消息头设指浏览器，不要将响应保存在缓存中啊。

他这样等等一下会在后面会看得到等一下我后面这个文档里面写了。但是我这里没有没有去做这个IS搭建比较简单。也没有做这个缓程这各方面的一些，所以他这里是不会显示的。这个是过期的时间啊，过期的时间。

这个是做什么用的？这个我说过，这个尤其是在搞你搞个运维，你就非常清楚。都认为这个调这个阿巴奇的时候，我们需要对网页啊。啊，进行压缩啊。就是说你看淘宝打开淘宝，你淘宝应该会做我那个事也好。淘宝。哦。

我不知道BOIP能不能抓到，但是我我我也给你演示一下。呃，要用火狐的插件，可以看到这个火狐的插件在这里个地方能不能看到，我还不我还没看，我以前都是用火狐插件，看对方就是说做了优化没有看他图片。

就是打开一个页面。先抓包吧，等一下再解释。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_39.png)

嗯，好吧，OK发送到你呗。这个应该有。才那些缓程。😔，保存时间。缓存都久在你电脑上面。好，他这个还是淘宝还有点不一样，他有些地改掉了。但是他这里你也可以看得到啊，他这个具体的这个。呃，保存的这个就是说。

他的意思是什么意思啊，你要明白。淘宝他这里做的是就是说。我打开淘宝这个页面。淘宝这个页面。他会把他的首页他这有些信息啊，就是在首页基本上不变的像logo。它会保存在本地一份。

在保存在C旁这个扣技这个目录这个呃TEMPR这些目录下面。它保存了之后，等你下次打开的时候，它不会再去。淘宝上去下载这个。保持不变的信息啊。就是一个缓存作用一样，而且它这个信息是保存有个日期限制的啊。

它是保存90天或者一个月啊，或者是待多久啊，这个是对方服务器做优化的时候可以调。啊，不是要你来决定，他可以来进行。置啊，当他前提调件，你可以把C方这这些。保证信息把它删了。啊 don得。

你要重新去他的淘宝下，这样做有什么优点没有有他的优点是。你像淘宝它提供这样的服务，这么多每天有这么多用户，这么多流量是吧？要访问他。那么如果每个人打开这个页面的时候，每个人他他请求这个页面的时候。

不要占用淘宝的这个带宽。因为你每次打开要打开这个页面到对方服务器请求这些资源吧，来返回给我们。用户吧。这样的话你。当你去打开淘宝的时候，如果他采用了这种方法，就是。啊，一个谎称的形式，就是说这个。

把他的一些。经常保持不变的信息保存在你自己电脑一份。这样的话他不需要下次去再打开淘宝的时候。再进行去淘宝服务器去下载，直接通过你本地来读取你本地的资源。这样结算双方结算的这个相应的这个带宽啊，这个带宽。

当然他他前提条件，他有一套算法来进行对比。如果我这个页面更改了东西，那么他会在你本地马上更改。啊，他是这么回事的。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_41.png)

好。你要知道这个消息头，这个消息头它他只要只设这个浏览器，不要将小面包保存在缓缓存中。等然他一般的是。是保存的好，一般是保存好。还有这个。这个在这里有吗？可以看到吗？有没有啊。也て没有。没有，就算了。

我们打开其他的账可以去看一下。这个是来确定这个消息头指出这个响应内容是否已经过期。啊，是否过期？因此，不保存在缓存中。这样的话以确保这个浏览器获取到最新的这个内容。这个长度给你讲讲，这个是类型。呃。

方法好，现在我们来看一下方法。呃，这个HTP响应啊，你还有什么不明白，到时候单独QQ啊群里面再聊一下，讲解一下。呃，也可以通过百度去查找哈。我大概就是。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_43.png)

想这么多。A照DDP方法，我刚才给你讲过方法有get，有poss。当然还有其他的方法。我刚才讲错了哈，好像方法这个地方没有扣9时分。哦，那他是接接收的时候有扣就是。

那么这些方法这里每一个方法我在这里都给你解释了，它具体的含义我就不对着这个文档念了。那么我教你测试在渗透测试过程中。写包告过程中，这个方法就是扫描器扫出来之后，你怎么去验证这个。

HDD方法对方是否开了这个方法？什么方法是危险的方法？一般的如果。对方就这就是我们这里看到就是get是么请求的有po，对不对？这个是正常的啊正常的方法。什么是不正常的方法？我举个例子。我这里好像是。

留了一个包。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_45.png)

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_46.png)

通过IE抓包吧。先把那个袋理放下。取消。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_48.png)

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_49.png)

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_50.png)

这个包还没抓到。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_52.png)

卡住了。这包是错的。一。こ。这个是正确的吧。过一下。我们给种方式请求，我们来碰到他这个地址。他开启了哪些？方法就H的DB方法。我们怎么念测试它呢？在这个地方。输入大写open。说这个选项。

把ge头改一下哈，这样的话我们可以看到。对方服务器这个网站允许，这个是允许的意思啊。哎呦罗这个允许的意思，这原许就是说。有这些方法。有get，有ha有pos的方法，有postush方法，有dla方法。

还有测试，还有这些pass。那么这些方法。这些是OK的，没什么问题。但是这些。这些是危险的方法。尤其还有一个方法叫做木屋。把这打标公墓舞啊这个方法。还有这个有些时候看见了这个。如果。

这个也开启了MOV也开启了。那么这个服务器，那么这个网站就完蛋了。为什么玩蛋？跟你解释一下。因为铺车是上传的意思，就是说开启这个方法，我可以。通过BRP，你在这里铺头。啊，接一些内容啊。

你可以伪造一些呃，一句话木马可以铺除一些。木马到对方的服务器。啊。dele头是可以删除。删除的意思可以删除对方服务器的。一些文件。当然你要知道路径去删除它的服务器上上的一些资源，一些内容。

因为因为你他给了你这个delete这个方法。如果要木黑，那就更好了。我刚才说过了。这个是上传的意思吗？不骤我我我负责一个一句话上去。当然这个破轮你不能直接铺着一个。TSPPSPSP这样的。啊。

一般是不允许的。我不允许。他只能你这个把一句话写到TXT文本里面，直接复制上去，就上传上去，再通过move把TXT这个。名字改掉。改成PSP这样的话木马就可以运行了。对方网上就入侵成功啊，这个我在。

深透测试过程中啊，经常也遇见不少这样的案例。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_54.png)

通过就是因为开启的这些方法，导致服务器自动被入侵啊被录侵。同安这个有IS的这种模式。好像有一个这个这个工具。好像是有。你可以看到这里啊，专门针对IIS写利用利用的一个工具。

看改种方法铺仇木一般的我们先是你把木马写到这里啊，提交的数据包。啊，放到这里啊，你这这这填写填写数据包啊，对方网站。这一般的是TT要请求文件啊，在这里有个铺头啊，把木板放放这里。不者之接显电灯。

PST文本这个把木马写到文本里面，直接铺上上去，再通过这个木啊改名。把这个。TS你改成SPR或者PSPR。啊，改完之后你就可以。登录你的木码。这就是这个。方法啊在这个生车测试过程中你的危害性。嗯。

这点你自己看一下。快接着我们来看一下URA。对一个网站，它有哪几部分组成？1万人0吨。有这几个单词的一个缩写，它统一它是什么意思呢？统一资源定位符。他主要是标识为我资源的唯一的标识符通过它可以获取。

标示的资源。那么最常用的是这种。那么在这里我给你解释一下。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_56.png)

就在我虚拟机里面来吧。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_58.png)

工作是哪个站点啊？

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_60.png)

那权限IS权限配置有点问题。好。我不管他吧。那么我给你讲。嗯，讲一下这个。这一部分。所代表的这个协议。协议采用HTTP啊，还是FTP啊是吧，还是HTTPS啊。他是这个意思。那么这个。这一部分是代表的是。

域名或者是IP地址。百度的那么这里下填写3W点百度点com是吧？淘宝的是3W点淘宝点com。就是这个意思。这主界面。这个是代表的当口。就这点是端口，我当前是采用的是807档口。807那可以8。9哎。

还8。9。嘿，哪个单子啊？不对呀。808。应该是这个。807坦口。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_62.png)

对不对？😔，pass路姐。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_64.png)

那可以看一下。我们找到这个。也可以看到这这个路径是什么意思啊？举个例子，我这个页面是吧？因为这里没有权限分围，这个无所谓的，你不用看到有。这里是有这个文件夹的，应该是百分之百是有S开头。

是不是有这个文件夹？看到没有？这个文件夹这个文件夹里面。应该是indiaX。天在视频。在这里可以调一下哈，这个无所谓。在这个安全里面啊，应该是没有加这个用户呃，右手用户。你其实。你再去房问。刷新一下。

好，这次不会谈那个地话坑的吧。来点一个新闻。Yeahや。这个目录的权限的问题。应该是他们的权限，好像是。你可以看一下，应该是没有集成下来。哎，集成过来。他是拒绝了。没有浏览目录的权限。我见单。

我给他权限。变成这种模式。内容已经删去。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_66.png)

等一下我再调吧。嗯，现在在录教材。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_68.png)

嗯。好，这个是这个文件夹的这个路径。啊，一个档口。那么。这个是路径，那个路径是举个例子，你像这里是吧，这里这里一层路径吧，在这里可以看得到对应的外博站点的这个站点是吧，DJCSRF。

我们的网站是在程序在这里吧，这个路径下面吧，对不对？那么现在我打开了这个页面，那么这个页面是。通过这个文件，就是说我们这个文件这个路径率上需要。这个父母。这个文件。这个文件我们可以在在大码里面。

我们可以看得到这个mod等于这个ID等于二的，就是说把这个ID等于二等于去。查询ID等于2的显示这个数据。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_70.png)

文件哈你你可以看对应的这个。文件路径。所以说你在这个URL。每一层每一台对应的服务器大概的是什么样子的？你在心里有数啊，一般这种都是目录，目录在对应的文件，文件下面有1个UID啊。

就是说我们代入1个ID等于多少啊。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_72.png)

你把列入ID点2。给那个FID。来进行查询。的。其实我们在注路的时候，后面会给你详细讲解。他其实我们在这里，他其实在这里，它程序里面都已经定义好了。这个我们就不用看这个代码了。



![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_74.png)

好，这个是URAA了。好，接着我们来看一下这个HTB消息统。呃，这个消息头前面大大部分都讲解了。买什么类型啊，长度啊。那这个跟前面都差不多。请教头啊，这一部分刚才给你大概也讲解了。啊，这个用于跨域的。

嗯，回去之后，你们认真把自己看一下啊，这里我由于时间关系，这里不一一讲解了。后面在实战过程中遇到这个，我们再补充。乡应小息头。就是我们呃最主要是讲结了这个请求和回应啊。扣解信息啊，这个扣就。

或计是或者是里面它里面在这里，每个里面都有。在这里。你这也是百度的是吧，你看百度的。他有几个参数，你注意一下。库存的有几个残所。第一个是这个。它这个参数它是主要是设啊来设定这个或者是有效时间啊有效时间。

它主要是这个浏览器将快件上保存在远程的这个。永久性的这个。

![](img/ac7b6a9b67744dedde2f75f79d4a4ba1_76.png)

程序戏里面就。