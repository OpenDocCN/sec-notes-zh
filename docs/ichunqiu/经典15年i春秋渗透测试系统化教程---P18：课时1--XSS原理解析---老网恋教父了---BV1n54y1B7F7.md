# 经典15年i春秋渗透测试系统化教程 - P18：课时1  XSS原理解析 - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。好，我们这节课给大家讲解一下这个叉SS。那么首先讲叉SS之前，我们首首先了解一下什么是叉SS。咁一。唱SS的全称是。呃，cloose search也就是说呃中国的一次是扩张脚本攻击啊。

翻译成中文，就是跨上脚本攻击，也是最常见的微博应用程序安全漏洞之一。这这个内洞啊夸张这个漏洞啊，就是大网站，小网站基本都有啊，基本都有。你看那个写一些现测试报告，基本上都写叉SS是最多的啊基本都有。

但是它的危害性啊也是呃也挺大的。就是说后面我们会给大家实例讲解它的一些危害啊，拿一些实例给大家进行分享。他是位于这个在2013年的时候，在欧瓦斯特公开的这个十大漏洞之地啊，这个十大漏洞啊就是微博内洞啊。

他是。排名第三名啊，我晚是排名第三。就是关于这个外博方面的。那么叉SS它是指攻击者在网页中嵌入客户端脚本。通常呢是ja姆斯格里编写的一个危险代码，就当我们用户。使用浏览器浏览网页的时候。

那么脚本就会在用户的浏览器上执行，从而达到攻击的目的。这个就是呃叉SS。他是怎么呃，他是怎么一个过程啊，但然这也是呃我自己把它总结出来的一些东西。那么通过我们这一段话，可以得知叉SS属于什么客户端攻击。

他不是不是服务到更强，也就是说，受害者最多的是用户。最终的是用户，他这就跟你讲，就是说属于客户单，而不是服务单号。他是最终是用户，一般是嗯针对服务器啊影响不大，一般是呃对用户有影响。

但特别要注意的一点是什么？也是很多人问的意点，就是说嗯这个叉S只能针对这个用户，那我要攻击网站的有什么用呢？是不是？那我在这里注了一下，大家注意的是，网上管理员也属于用户之一。注意哈。

管理员也是属于用户之一，这就意味着叉SS可以进行服务当攻击。因为管理员要比普通用户。他的床下要大很多。那么一般管理员可以都可以对网站进行啊文件管理啊、数据库管理啊、文件上传啊等等，他都可以找操作。

那么攻击者就可以通过一般也就是说，靠着管理员这个身份作为跳板来实施攻击啊，比如说到处管理员的扣体信息，例如。ge出税了，直接。我们在后台就是上传地方写一上代码，通过夸张调用啊，新建一个管理员啊啊。

上传一个码，创建一个模板等等。我们都是用。这个。彩色是都可以实现的。那么这个叉SS攻击最终的目的是在网页前路这个恶E的这个什么。OE的脚本代码，也就是说像钓鱼啊，欺骗用户点击一点击去就上当了。

那么最常见的攻击蛋模式，那这个专乌斯克利普预言系的。大家知道学过编程的啊。都知道d的语言，它是非常强大的啊，一般我们抓能做到的。那么我们这个叉SS也是可以做到的。但也也会使用这个其他的叫搅拌语言啊。

这两种比较aconcVBc，这个是几乎用的比较少的。用的最多的是抓我个礼。而逻机互联网这个客户端脚本是基基于什么？基于是d的，大部分都是这个哈。所以你要研究，你要对叉叉SS这个。内动啊要非常熟悉。

那么你必须要精通这个我。那么换句话来说，抓过斯个地浦能做到什么样的效果？那么叉SS它的胃口就有多大啊，就有这。呃，这完全不是这么危言耸听，因为抓gos可以用来获取用户的客取信息，弹居窗口。

那么存在的这个叉S漏洞的网站。那么拆S就可以用来道具扩捷信息啊，废掉页面啊，导航来导航到这个恶意网站啊，更高的这个拆SS代码，完全可以进行监控你的键盘操作，模拟这个windows的聚销。界面等等。

包括这个开机密码都是可以实现的啊，都是可以实现。好，那么这个。我们就给大家简介到了这个什么是叉SS叉SS的危害，它到底有哪些危害。那么接着我们来看一下呃。叉SS的分类它有什么反射型。

还有一个什么持久型XSS这两这几个还有一个就是道路型啊，它分这么三类哈啊一个是反射型，一个是不持久性。也就是不持六星是什么？就是你看注要不错搞错了，反射性，也就是说。他的有的人叫反射型。

有的人把它叫做什么不齿就行。那么这个等一下我实例会给大家演示哈，这三种，一个还是一个程序型啊，程序型夸张程序型夸张。呃第二部分我会讲解第三部分就是我们盗墓型的夸张啊，这个首先你要这个是一个重点啊啊。

在有一些面试过程中啊，考试过程中会问它有哪几类啊，你要知道它有反射型的，有程序型的，有盗墓型的，对不对？那么下面我们来看一下如何去挖掘叉SS的人啊，如何去挖掘我们来实例研。那么我掘这个彩色是。

你要在哪些地方挖解选找脚本的程序的输出显示的地方，包括搜索关键字的地方啊，有个对话框有我们在这个框里面输入，还有什么显示输出哪一个变了的地方。那么我们跟踪这个变了是否被过滤了。那么如果没过滤。

那么我们插一段OE代码，看能否执行。这个就是挖掘这个叉SS的方法啊，给大家总结了一句话，总结一句话。那么下面呢我们就给大家拉一个简单的实例给大家演示一下。好，在瞬机这种大把这段代码复制。到虚拟机里面。

那么这里我已经复制过来了。好，那么我在这里取命名为PSP。那么我们在这里浏览一下。HTTP。呃，当前的IP地址我们来看一下。IP地址103。摇铃3。叉SS1点PHP对不对？那么我们在这里后面还要接一个。

没有。我们来看一下它这里的参数是name啊，这个边量是name。成数 name。我们在这里输入有name。嗯，这个代码大家知道哈，这个代表PSP语言啊，开头结尾。

这个就是定一个变量类目变量再获取我们在这里。欢何 name。获取这个get得到的就是说我们这里name等于什么？要等于111啊，111。举个例子哈，那么他这里就是说。就我们给他1个111啊带入进去。

那么他把它复制给类这个变量。那么这个ESECHO最输出的意思就是Y要com输出这个变量的值Ycom111，也就是说我们这里全值。也就是我们把这个111传值给这个类目。在这里get就是获取啊。

这个我们输入的值给这个类目这个变量，再接着把它输出啊，welcome这个输出这个变量的值。那么这样welcome111。这个就是我们这个一个简单的一个实例。但是大家会发现没有？他没有做任何过滤。

没有做任何过虑。你看。他这里直接我们当我们用户输入值111给这个类目这个变量的时候。他这个变量没有做任何顾虑，在这个地方没有没有顾虑。就是这一点。就是说我们用户输入的只单独进去之后啊，他没有过滤什么。

没有顾虑。没对对什么过滤的监控号等等这些过滤。也就说你输入啥，它就输出啥，你看。啊，是吧。啊，那种TTTTT。那么你说什么，他就。啊。用户输出什么，它输出什么，它直接输出什么。

这是比较危险的啊比较危险的波线在哪里啊？举个例子，我们插一段OE代码。啊，我们随便插了一段O一单吧。当我就当攻击者在这个。把一个愿意当恶意代码。输入给这个变量的时候，那么你看他他输出什么？



![](img/9b1824f8f52466f3252dee247e786fb4_1.png)

他会输出什么结果我们回收一下，他就会弹出个对话框，对不对？这个是比较危险的。啊，就是说当我们这个用户，也就是说我这张OE代保，如果他这个换成其他的呢，对如嗯。



![](img/9b1824f8f52466f3252dee247e786fb4_3.png)

调入一个页面。对不对？不给我换成其他的。哎，你会发现看到没有？它跳转到这个百度了，对不对？是不是？就是说我这个地方不管说过什么，我把这个地址，把这个地址发给用户。嗯，会给我插入到一个对话框里面。

如果是个程序挂账，管理员一点击，那么它就会跳转到这个页面。对不对？所以如果他这个是个钓鱼的网上呢。那么用户他是不是上当了？来到这个钓鱼网站，对不对？啊，当然我们可以在这里插出到道具扣件信息的啊。

也是可以啊，都是可以的。所以说。那么如果防御的话，那么直接在这个过滤这个什么煎过后啊。是不是还有如果是转移的话，31%啊、百分号啊、井号啊、红泰换符哈都可以过滤的，都可以过滤的。

那么这个过滤这个安全防御，我们在后面的一节一节课会给大家详细的讲解，单独花一节课讲这个叉SS的防御。那么这里我们就不讲这个防御哈。那么我在这里演示这个时间就告诉大家这个叉SS啊，怎么去。

是怎么样的一个形式啊，是怎么样一个形式。

![](img/9b1824f8f52466f3252dee247e786fb4_5.png)

![](img/9b1824f8f52466f3252dee247e786fb4_6.png)