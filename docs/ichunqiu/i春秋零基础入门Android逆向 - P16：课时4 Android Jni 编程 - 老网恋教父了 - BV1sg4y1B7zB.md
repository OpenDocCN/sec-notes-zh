# i春秋零基础入门Android逆向 - P16：课时4 Android Jni 编程 - 老网恋教父了 - BV1sg4y1B7zB

![](img/f3f1012c50c8250de4910c7f1f5b1600_0.png)

。🎼呃，大家好，我是蒋子8。那么从今天开始的话，我们就将来正式的去接接触一个安卓netttic层的一个编程。那来说一下，安卓的话，它的代码原称的代码可分为两层，一层的话是java层。

还有另外一层就是一个netttic层。那么java层的话就是我们前几节课结的一个课程中所可以接触得到的一个java层的一个代码。它是通过把一个java文ja源代码给编成一个ds文件。

那么对应的这样一个ds文件的话，它是一个。可以被反变译为一个类似于。蚂蚁代码的一个中间代码还有类似于一个ja云代码的一个方式的。所以对于这样一个java层的话，在分析上是相对比较容易的。

而和它对应的一个net体上的话，它只是把一个C加加代码给编译成1个SO文件，也就也就是一个呃动态运行库了。那么这样编译出来的代码，它是使用1个AIM或者说是1个叉86的一个呃会面代码来进行一个运行的。

它在一个隐蔽性，还有安全性上来说的话，是远远要比价层要高的。所以现在的一些加密软件啊，或者说是加密算法之类的，基本上都是把一个主要的操作，或者说教育都会放在一个类体层上面去。所以对于我们来说啊。

学好这样一个类体层的一个加减密的话，是相当相当之重要的。那么这也是呃这套教程中啊，最重点的一个地方。那么从今天开始的话，就来正式正式的去接触这样一个类体层。那么作为第一节课程的话。

我来现来跟大家来说一下这样一个JAI的一个编程，我们得先知道要怎么写，然后编出来是怎么什么样子，我们才能对它进行一个逆向，对不对？好，那就跟着我来一起来学习这样一个编程吧。呃。

首先我们这一次使用的开发工具呢还是一样是一个安卓 studio，它本身就已经自带了一个原生的DII代码支持了。如果是比较原始的。

喜欢在一个ECIPSE的呃文件EC些PIPSE也就是这样一个程序的一个同学的话，那么这样一个相应的一个教程的话，就需要从网上去进行一个搜索了啊呃，步骤也是不难的。那么代码的话也是类似的。



![](img/f3f1012c50c8250de4910c7f1f5b1600_2.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_3.png)

好，那么这一次我们就以安卓 studio来进行一个呃。这是一个事例。首先我们来创建一个呃安卓的一个pro呃，创建项目的一个步骤化和以前是一模一样的。



![](img/f3f1012c50c8250de4910c7f1f5b1600_5.png)

呃，他们主要的呃区别或者说是不一样的地方的话就在于它一些代码会放在哪里了。好，呃现在说一下的话，这样一个ja层，还有let层的话，主要是通过一个JNI来进行一个强进行一个链接的。

这就意味着呃如果你想在ja层所能够做到的事情。那么对于这样一个let层在C加在里面也同样可以通过JNI来做到一样的东西，只是说呃在一个netnet层中做起来比较比较的麻烦。



![](img/f3f1012c50c8250de4910c7f1f5b1600_7.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_8.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_9.png)

嗯，那么这样这也是呃相对的相对的。好，我们现在创建一个原始的一个呃hello world的一个项目。

![](img/f3f1012c50c8250de4910c7f1f5b1600_11.png)

啊啊，这是一个最为原始的一个hello one5在前几节课中已经看到过它的一个运行效果了。然后它的代码是这样一个样子的。那么在这里我们为了让它来提供我们的一个呃GI知识的话。

我们首先要对它的一个啊配置文件，一个编译文件来进行一个相应的一个修改。那么修改的相关的说明的话，可以在这个网址中所能找得到啊，他们他也会对于不同的一个不同的一个编译版本会有不同的一个修改方法。

还有说一个修改的一个呃。

![](img/f3f1012c50c8250de4910c7f1f5b1600_13.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_14.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_15.png)

一个配置。好，那么这里我们呃在这一套教程中车啊，之前的话，这是目前最新版的1个2。10的版本，我们来进行一个呃版的一个设置。首先，在一个安卓系统中切换到一个proch系头上。



![](img/f3f1012c50c8250de4910c7f1f5b1600_17.png)

好，我们来现在修改这样一个workplay通的一个呃版本，原损是2。8的，我们修改为2。10。好，这是已经已经切一个版本了。那么它在一个刷新的时候，就会自动的从这样一个网址上去下载1个2010的版本。

如果网络不好，话可能需要进行一个翻墙才能够完成。这点请大家进行一个注意。接着我们就来用它的一个测试的一个版本。好，在这里在这一个目录下，在这个目录下一个B文件中，这里就给人修改成一个测试的一个版本。



![](img/f3f1012c50c8250de4910c7f1f5b1600_19.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_20.png)

好，呃，那么这个时候我们刚装进去的时候，它就提示我们要进行一个刷新。呃，这个时候大家可以选择一个刷新，不过是呃。



![](img/f3f1012c50c8250de4910c7f1f5b1600_22.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_23.png)

如果是应该会失败的，因为它不是它标准的一个语法。好，我们在给创新之后，它就已经失败。他说找不到这样一个p的一个路径，那是必须是当然的。好，因为这里在这里面的一个B文件。

这里这个文件也是需要进行一个修改了。好，这个文件在我们的APP录一下。好，那么这里我们就要进行一个修改了。首先它的第一行是ly，然后是要按装一个一个application。好，这里要改一下。

中间要加一个module的一个子类。

![](img/f3f1012c50c8250de4910c7f1f5b1600_25.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_26.png)

好，我们添加上去。Yeah。接着我们就要用model来包含里面的这样一个类。呃，对于最新版来说，它，语法和2。8的原始未修改比较类似，要改要改的东西也相对比较少。好。

现在把用model来库出一个暗卓的一个选项。然后这里的一个编译的一个version的话，就加1个APPI level。这是最小支持版本，还有最大一个支持目标支持版本。好。

这是是这这样就把它的一个啊混淆的一个规则文件的话，使用一个ad的一个方法来进行了添加。

![](img/f3f1012c50c8250de4910c7f1f5b1600_28.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_29.png)

呃。好，这里再进行一次刷新。哦，再把test comp给就是掉了。可以。好。好，那么这就是一个呃最为基本的一个呃。最基本的一个呃编异特施。



![](img/f3f1012c50c8250de4910c7f1f5b1600_31.png)

好，这样就能够刷新成功，我们就可以在这个基础是上来进行一个代码的一个编写了。

![](img/f3f1012c50c8250de4910c7f1f5b1600_33.png)

好呃，编写的时候，我们找到我们要写入的一个lect代码的一个类。然后比如说我要在这个类中一个8L hello lucky里面的一个man activity class中来添加我们的一个l代码。好。

这里就这样写。首先假设我来添加一个静态的一个方法。好，publiclish前面的声明，还有说函数定义。都是呃和一个普通的一个java的一个声明是一样的。好，那不一样地方就在这里了。好。

这里本来就应该添加它的一个内容。这里我就来把它设置为一个本地的一个函数。这里这里就会添加一个内体的一个声明。好，如果有这样一个类体的一个分明之之后，它就会知道这个方法是一个来自于1个SO库的一个方法。

好，那么我们这样这里来就会从SO库中来寻找这样一个方法了。好，识明完以后，然后就来在相应的1个SO文件中去创建它的一个对应的一个实现。呃，它的实现的话就在在一个GI folder里面。

这里也可以来创建一个呃目录。GI folder也就是一个目录下呃，就在这个目录下的话实放的就是一些C加加的一个内容。这个C加加的话就是我们的一个本地代码的一个路径了。啊我们来创建它对应的一个呃实现。



![](img/f3f1012c50c8250de4910c7f1f5b1600_35.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_36.png)

好，这里已经创建这里这里已经利用安卓 studio来为我们自动的创建好相应的一个函数。理论上。嗯嗯嗯可以看到它创建出来的还是。嗯，还是很奇葩的啊，可以看到他嗯。它的一个相应的1个CR加支持还没有实现啊。

这是理所当然的。因为我们还没有在这样一个module中给添加对应的一个实现。如果我们要想要把1个NDK给编译出来的话，那么这里还是要再加一个属性。首先是1个NDK的一个设置，然后这是1个module。



![](img/f3f1012c50c8250de4910c7f1f5b1600_38.png)

好，那就是上面跟着好，modode链里面就跟着了我们我们需要编辑出来的1个SO文件。

![](img/f3f1012c50c8250de4910c7f1f5b1600_40.png)

嗯。平アへシアがしわれて。好，比如说我LP存在一个C的一个文件啊，就命为这样。好，然后然后。然后它的整个然后进行一个刷新。那么整一个呃一个编译工具的话，就会把啊这里的一个JI的目录给编译成这样1个SO。

那么编译出来的SO文件文件就是LB，然后一个man点SO的一个类型。好，回到这里就会看到它对应的一个呃已经有一个高量的一个选项，但是它的代码还是很奇怪哦，我再来重新来试一遍。M。好，我再来创建一遍。

那么这一次创建出来的就是已经啊比较好看啊，就算是成功了啊这样一个情况，我们进行一个刷新。就会看到它的一些代码高亮啊，还有什么的什么的一个代码提示啊已经出来了。对吧。

这是tudio呃对于一个C加加支持的比较好的一个地方吧。好，那么这里它整一个函数意思的话好，这个函数这个在C加加里面在C里面设置函数聚合我们这里的一个hello文函数是一一对应的那这个就能够进行一个相应的一个跳转。

可以看到，比如说在java里面是这样声明的pub，然后一个的一个声明。那么跳到这里来说，就是一个现在将它的一个路径位置，比如说这是一个函数是在这样一个java目录下。

然后F发目录后hello目录里面的一个man activity文件中，那么它就会把相应的前缀给补充回来，然后这是一个manac类，这是一个类中的一个hello函数。那，他就可以把这样一些前缀给补充回来。

然后后面再加一个函数，接着中间可以多传递出两个参数呃参数过来。这是呃与一个教层代码相对应的一个函数。那么它最终变义生成了SO文件的话，也是以这样的格式所命名的。

所以说呃如果你想在一个SO文件中找到对应的一个体层的代码，你就可以按照这样的一个命名规范去进行一个寻找，先是一个一个类名。然后这是一个呃函数名，然后呢是参数一个形式啊。

对于每一个体函数的话都会以固定多两个参数的。首先设计一个JIEV的一个参数，那么这个就对应着一个viment，它是主要是调用这样一个参数里面的一个JNI的一个库，那么后面跟着的第二个参数的话。

就根据我们的函数不一样所传递不一样。所如果这里我这里上的上面的是一个静态函数，那么这里就可以传递一个那么一个对应的就是这样一个的一个。如果我这里传递的并不是的话。并不是个来话好。好，这里我们要和它区别。

然后传递一下其他参数。好，同样的来进行一个创业。哎，这里就可以看到区别了。呃，这里和我这里并不是一个静差的一个st函数的话，那么这里传递过来的第二第二个参数的话就是一个ober文件。

那么就是对应的调用到这个函数的一个ve的一个ob一个一个对象。啊，这也是非较好理解，对不对？然后它后面接着的就是这样一个函数的一些参数了，这里有有一个int参数，那么转换科过来就是一个最硬的一个格式。

好，通过这样的一些基本类的话，在C加加里里面中也也是会有一些对应的一个实现的。比如说它的一个反回雷反返馈内存是一个sstream。好，那么这己的反馈内存。环形式的话，还就会以一个小写的追训来表示。

那么相关的东西的话，那么请大家去查一下文档，会有相关的一个提示。比如说呃java中的int可以转换成一个int啊，那么其他的话也是一个类似的。好，这里我们就来给它添加一个实现吧。好。

那这里可以看到它会调用到一个1个AIV1个一个环境中1个JIEMV就这样一个GNI interface就是一个GNI所提供的一些函数中的一个其中其中一个函数，它名字叫 string它的功能的话。

就是把我们传递过过来的这样一个 stream给转换成一个ja stream格式的一个东西。那么转换而来了这样一个呢才能够被java一个代码所识别的。才能够被这样一个str的一个函数所识别。好。

别说这里啊，我板还有一个helloG，然后这里方还有个hello2。好，那么这样一来，就算是把一个代码的一个功能给写过来了。我们在这里就来尝试着去去写个调。好，在这样一个啊大钮点击以后。

我们来进行一个呃这样我们来打印出来。好，然后里面就这样到一个hello问题。好，那么类似再调一个号2。好，可以看到这里第二个方法和普通的java函数是一样的。

那么调用起写来的时候呢那它它就会自动的把这样一个方法的参数给传递到一个C加加强上面去了。好，我们可以来进行一个测试啊，现来进行一个测试。那么大家看一下这一个代码是不是呃正常可行呢。好，运行变音运行。呃。

注意一下这里的话我就是用一个真实的真实的1个AIM手机来进行一个调试了。嗯，如果是呃。这在这里的话使用一般S模拟器也是可以看到类似的效果的。但是如果是想要调试SO的话。

是必须要有一台一个支持AIN的手机才能够正常的调试起来的，不然过过程中会出现很多奇葩问题。啊，这里整一个程序就已经运行起来了。我们我来尝试了点击一个按钮。好，看一下，哎，这也就报出了一个错误了。

报出了一个错误。大家可以看一下它的错额内容是什么东西，他的错误内容就是一个net max no fun，然后他说他找不到我在一个helloween的一个方法，这是为什么我已经在这里失迷了。

但他却说他找不到这一个方法，这是为什么呢？这是因因为这样的，它整个程序虽然编译好了，也运行起来，但是它并没有加载我们的SO没有加载起来的话，那么对应的实现啦或方法原理就不会加载起来。

那那这样整一个程序运行到这样一个方法的时候，哎，发现它没有实现，就可报出这样一个错误的。那么在这里的话，我们就要添加上相应的一个加载的一个代码。那么再讲加载的时候的话，一般一般来说就是这样实现了。

现在添加一个呃静态的一个构建类。然后在里面这样一个系统的一个漏 library的一个函数。好，看一下我这里编译出来拉百鱼的名字是这样一个东西。好给。别给设置上去，然那整一个程序在运行的时候。

运首先就可以加载这样一个S搜库啊，到后面才可以给弄出来。好，我们再来测试一次。好，在这里的框应该可以看到相应的1个编译传的1个SO文件了。看一下。好，呃，我们城试已经运行起来了，来来尝试一下运行。可。

可以看到这里已经正常的打印出来两个东西了。我们再来看一下编音刷的1个APK文件，是不是生成了相应的USO文件嘛。



![](img/f3f1012c50c8250de4910c7f1f5b1600_42.png)

好啊，这是一个以GIP格式压缩的一个文件。

![](img/f3f1012c50c8250de4910c7f1f5b1600_44.png)

在LIB幕录下可以看到它拼译出来这么多呃属性。然后我们找到对应着我们机子的一个安的API，以后找到这样1个SO文件。264位的，然后是一个超到6上的一个，还有超到664的一个对应的一个设置。

它是对应着不同的一个运行环境，都对出了一个不一样的1个ISO文件的。

![](img/f3f1012c50c8250de4910c7f1f5b1600_46.png)

好，那么这是一个呃静态注册的一个类型。啊，除了静态注册以外，还有另外一种方法叫做动态注册。适和这样一个静态注册相对应的。那么在这里大家都可能已经注意得到了。这里静态注册所有编译出来的一个函数或者说是类。

无论在编写上还是说在阅读上都会变得非常不方便，可以看到哎在这好像声明是这么简洁的。但是到了这样一个C加层里面呢里面的话，这边的这么长唉，非常的非常的难看。好。

而且如果我们要对这样一个参数进行一个修改的话，就需要的对后面这么多东西进行一个修改。如果让人人为人来人为的来操作的话，很容易出现一个问题。好，那么这这样一来问题就来了。

我们有没有什么好的方法来对它进行一个改善呢？可有的。那么对应的方法的话，就是一个动态注册。好，那么这里我就来可以大家来说一下这样一个动态注册的一个呃操作。啊，动态注册的话也是类似的。好。

我们这里先来呃重新的修改一下，试试这本来是给你一个这样一个app对体对不呗？我改一下。好，我编辑一个howlog activity，然后我再来编写它对应的一个代码。添加一个西交教的一个文件。好。

并命为hello，为了为了一个好看，我经命名为一个hello。这时候他需要我提提是我就，第四我进行一个刷新。如然个案的话，他没有办法使用一些呃相应的一个呃高程序高亮或者说代码提示好。我。

就创建一个hello裤，接着这里就包含了一包含它的一个GNI的一个这样的一个文件。好，这是一个最基本的一个框架。好，然后我在一个min中确认我要填写的一个内体代码。这是一个puppy。

然后是一个nett。传递的内容是一个把怀只是一个str，然后它的名字是hello衫。啊，它是一个呃有一个参数的一个函数，它里面参数是一个嗯。是一个慢量可可以34吧啊。呃，假设是一个manTC参数吧。

哎好，那么假设我们要对应的一个net是这样一个方法，我们要如何的对它进行一个动态注册呢？那么动态注册的时候哎，也是一样，它也提供了相关的一个注册函数，就是一个regmatic的一个一个函数了。



![](img/f3f1012c50c8250de4910c7f1f5b1600_48.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_49.png)

好，我们就来调用这样一个函数来进行一个实现。好，来看一下我目我们的目标是来注册这样一个方法的方法的一个本地实现。然后上面的话可以在点击以后可以调到这样一个方法。は。这里是它调用，然后是一个hello。

从递上的参数是一个m和T学参数。看一下来是吧。Can not be a。嗯嗯嗯，还有3四小弟一个嗯嗯嗯。这也到底是一点错误还是什么？好好。嗯，那这样吧。哦哦。

那这样就改成这样一个样子来对让它来进行一个调用。那么下面就来进行一个呃进他的一个注册。好嗯，对注册就。开始我们来编写我我们的一个现加代码。首先我们得让整一个ja程序。

知道我们在这样一个SO文件中给实现了这样一个呃hello的一个方法。我们来编写它对应的一个实现。好，看一下它的一个满意值是一个stream的。好。然后他明这是号三。我们来解它方法，然后呃请大家记住啊。

每一个代代写方法它都会对多的出字两个参数。第一个是JRENB的参数。然后第二个参数是一个J class，或者说是一个J object它。



![](img/f3f1012c50c8250de4910c7f1f5b1600_51.png)

他有可能是这样两个方法。如果他如果他这个方法是一个静态方法的时候，第二个参数就会是一个G class。如果是一个普通的一个呃方法的话，那么第二个参数就是一个最。



![](img/f3f1012c50c8250de4910c7f1f5b1600_53.png)

那么这里就是一个呃就用op的参数。因为这里我并不是some respect的一个属性的。好，接着在这里可以看到它还会有第三个参数啊，第三个参数的话它是一个magacXT的参数，并不是一个J加。

并不是一个JNI中它原生自持的参数。那么对于每一个这样的参数都可以使用一个objectject的一个参数来进行一个进行一个代替的。而就是这样一个东西。

over卷 over卷的话是一个呃每一个类的一个基肋，每一个类肯定会都是从一个op中进行一个派生的。好。那我就来选一个op拳。好，这着它里面的内容啊还是一样。我这里简单一点。

直接就返回一个呃注册后的一个函数。那么这里是一个呃CPP的文件，注意其要是1个CPC文件。那么刚才它自动创建的时候是一个系的文件。那么他们对于这1个EMEM的写法也是不一样的。

那么CPCP的话相对来说它的写法就可以简单的多。好，我们也是一样使用1个6 string来创建。一个呃。字不串的，然后让它来返回我们的一个值。好，我们来创建一个str。How三 for。

那么这个函数就可以相当于静态的去绑开这样一个呃。那相相当于静态反馈，这样一个是不错的。好，接着我们就要来通知呃整一个程序。我们在这样1个CPT文件中实现了这样一条函数了。哎。

那么我们要怎样去进行一个通知呢？怎样进行一个通知呢？好，这个时候就要需要用到这样一个register一个net的一个函数了。啊，我们来看一下它相应的一个说明。



![](img/f3f1012c50c8250de4910c7f1f5b1600_55.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_56.png)

好，可以看到它里面有这样几个参数啊，这样有这样一个几个参数。老师首先是一个jclass，也就是我们是一个把这个方法所在的一个类，然后是一个J追Inet体 mix的一个函数指针。

接着这也就说明了哎有多少个方法在这样一个要说明的类中。好，我们来看一下这样一个let体 mix的一个定义。好，首先是方法名是然后是方法签名，这着是一个对应的一个函数指针。哎，这也是非常清晰可见了。

我们就来按照这几个来进行一个实现。

![](img/f3f1012c50c8250de4910c7f1f5b1600_58.png)

好，那我们在注册的话，可以使用这样一个方法来进行一个呃注册。

![](img/f3f1012c50c8250de4910c7f1f5b1600_60.png)

使用这样一个reg练的方法。好，我们呢进行一个注册吧。首先呃这里我已经写好了一个封装好的一个方法。

![](img/f3f1012c50c8250de4910c7f1f5b1600_62.png)

好，我就来急了去行个调。呃，来看一下它的一个呃整那个操作。首先嗯首先。呃，首先它就可以这也是我自己写的一个分装好的一个代啊。首先它就可以从一个class链中，也就是这样一个class中哎。

这样一个名字的一个中来寻找这样对应的一个class。如果找到这样一个class之后，就调用到这样一个函数，在这样一个class中进行这样一个metal的一个注册。然后这一个方法就用了这么多方法。



![](img/f3f1012c50c8250de4910c7f1f5b1600_64.png)

好，我们来传递对应的一个参数。首先是首先第一个参数是一个呃classus的一个名字。

![](img/f3f1012c50c8250de4910c7f1f5b1600_66.png)

好，这里我就要把它注册到这样一个内中了。一个F8然hello那一个win hit，比如说class好，进行一个对应的一个修改。然后是一个mac，然后是我对应的一个想要注册的方法，这是一个数组。

这是一个对let的数组。第一个是一个方法名，第一个是第二个是方法的签名和smar代码是类似的，然后是一个函数指针，对应着这样一个方法实现。好后这样一个方法名是一个hello3。然后他的签名的话。

唉大家其是不是还记得。首先是一个括号，括号里面更着的是呢是它的一个呃参数。好，它的第一个参数是一个magac是一个呃 object的一个类型。好，我就把一个个t题给改给写进去。

如果是如果是其他的一个也是类似的。好。好，前面加个在一个L楼，然后把点都改成了一个呃分号。然后然后后面的话就加一个呃这样一个呃分号来进对一个al卷来进行一个描述。

然后它的返回类型的话是一个句类型的一个呃返回类型。好，那么使卷呢也对应的就是这样一个描述符了。好，这是一个整一个方法的一个签名。然后然后第三个就对应着这样一个方法描述的一个函数指针。好。

指向我的hello沃3好，可跳转到这里。好，这样一个啊alrange一个数数就表明了哎这样一个方法，对应着let体的方法就这一个了。好，接着接下来就是用一个reg练型来进行一个注册。好，那么问题就来了。

我们注册的位置在哪里？我们总要找到一个好的位置来让它给注册到注册到了吧。哎，那么这个时候哎就会发现，其实啊整一个安卓的话，它就提供了这样一个JI or load的一个呃一个方法。

这样一个导数方法来让我们来进在函数一个SO库在加载的时候给先来执行一些操作。我们就可以一般来说我们就利用到这样一个方法来在SO库加载的时候，同时给注册上一某一些本地函数的。



![](img/f3f1012c50c8250de4910c7f1f5b1600_68.png)

呃，当然还有一些比较旗葩的SOQ啊，就可能会使用一个静态的加载，或者说一些静态函数啊一个。

![](img/f3f1012c50c8250de4910c7f1f5b1600_70.png)

好，我们这里就在一个最load的一个方法中来进行一个加载。好，给拷贝进去。我这里他说并不支持1个LGlock库呃，因为lock lock库的话呃是需要是实需要一个。



![](img/f3f1012c50c8250de4910c7f1f5b1600_72.png)

把安卓的1个LG的1个呃SO文件也那个一个静态文件也要打包进去的好，我们加一个libry。

![](img/f3f1012c50c8250de4910c7f1f5b1600_74.png)

好然后选一个ad函数。好，我们就把look库给包含进去，然后在前面呃在前面的话，我们还需要。包含了相应的图文件的实件。好那么这里来这里的话就。对不是呀哈。好，那么这然这样就是一个呃GI no的函数。

在这样一个on里面的话，它有两个参数，第一个是一个JRVN的一个指针，然后第二个是一个保留的一个参数。首先会从这样1个GRVN虚拟器中去获取到我们的1个GLENV。

然后再调用EMV中的一个register体的量体的一个函数来进行一个静态注册。然后最后如果加载成功的话，就会返回我们的一个版本信息。如果失败的话，就会返回复一。

返回复一的时候点一个验缩文件就就表明它一个加载失败，然后就可以从内存中进行一个卸载来。这个时候点一个按卓程序就会报出一个错误了。好。

我们在这里就样发鹏在注册成功的时候返回一个呃一个正确的一个注册信息来进行一个测试吧。好，这是一个测试。我们来对整一个函数进行一个呃编译，来看一下它的一个运行效果。它是不是像我们的一个呃所说的那么好好。

这一个层序已经启动起了，我们点击按钮。哎，还是帮我靠。哦，我看一下他的一个错误信息啊，他说一个net make phone，哎，这还是放了一个那个错误，我们没有把相应的libvery给加载出来。

那么这一次我们编译出来的libary加用hello是在这里已经说明了，是一个叫hello的一个libry。我们重新来一遍。好，我们来重新的并写一个变译，然后运行看一下它的结果。完了吗？

那么运行的一个结果，它就是说哎他并没有这样一个方法来说。就是说他注他并没有找到我们对应的这样一个方法的一个呃实现。这可能是我们在静态注册的时候来出现一个报出一个错误了。我们来看一下错误在哪。

是不是我原始的代码中嗯存在什么一个问题？嗯嗯嗯嗯。哎，好的，hello呃，这个这里我犯了一个错误啊，这里的卷的话呃，它里面这里是应该是小写L，是刚才是在复制的时候给考错了。

那但它注册方法还是大致是一样的。因为这里的时卷的一个等一个声明是一个这样这样一个样子的。我们再来进行一个你均行运行，来看一下它的一个运行效果。好，我们来进行一个比拟化。啊啊。呃看一下运行效果。

点击按钮哎，可以发现它已经正常的呃进行一个运行了，但是又充分证明了我们的一个动态注册是呃成功了啊。如果大家家还是不还是担心的话，可以来进行一个调试。在调试的话方法还是一样的，在对应的地方下好一个断点。

在这里请希换到1个APPnet的一个方法上进行一个调试。呃，注意一下，这里的调试的话，必须是1个AIL手机才能够进行一个调试的。所有的模拟器基本上都是必挂了。好，我们来进行一个调试。好。

这里说它一个at。哦，看起失败，那我们再来尝试一次。啊，多次几次啊，它一个挂件的时候经常会出现一个其他问题了。嗯。我再来一遍啊再几遍啊，如果还是失败的话，线上就不能脸色了。嗯。

如果啊这里的话可以看到我呃不知道调试这里老师是败不知道出什么问题。啊，那果大家在下面的话可以来进行一次一个源码的一个调试，来看一下它调试了一些呃。来看一下它调试的一个呃运运行的一个呃流程。

或者说它每一个函数先激活会先运行哪个时，那么大家在下面先来机制的进行一个。进行了一个测试来看一下。那么理论上来说，应该是程序在SO键下的时候会马上运行这样一个啊on node的一个函数的。

接着还在我们点击按钮的时候，才会运行这样一个hello上的一个函数。好，那么这就是啊这一节课的一几个内容这几个内容了。



![](img/f3f1012c50c8250de4910c7f1f5b1600_76.png)

那么作用的话，就请大家在下面自己去对这样一个类来进行一个熟悉。然后来学一下它的一个编码方法。

![](img/f3f1012c50c8250de4910c7f1f5b1600_78.png)

![](img/f3f1012c50c8250de4910c7f1f5b1600_79.png)

好，那么这一节课课程的话就到此为止啊，谢谢大家。

![](img/f3f1012c50c8250de4910c7f1f5b1600_81.png)

🎼悟悟空。