# 经典15年i春秋渗透测试系统化教程 - P52：课时10  编辑器漏洞讲解（下） - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。好，接着我们讲解，现在我们来看一下PSHP呃，关于PSP我等一我不再演示哈，跟AP1样，大家自己去下载一个呃FCK这个2。0到2。4。3之间的一个版本。PSP版本。

大家记住一下啊呃必须要在这个坑狗点PSP这个文件里面开启这个上传功能啊，不然是不行的哈，就是针对这个2。3到2。4。3啊，以前的2。3以前的版本好像是不需要的。他的这个上传路径默认上传路径是这个路径。

就是说嗯FCK这个ADC这个再到ADC目录把它费用。慢额子就是这个文件上文件管理up uploadload就是上传的PSP。啊，upload点PHP啊，默认是这个路径。

大家就是说如果别人装在这个FCKSPSHP列上点，你找一下这个路径，看有没有有的话，一般情况下就可以。啊，进行一个上传，关键是看它的一个版本哈，它这个版本如果是在这个之间，它就存在这个上传漏斗。

这个是EXP。大家把这张代码。嗯，保存为放在记事本里面，就是把它放在记事本里面，再这再到这里历成为为HTML文件。



![](img/c4e63c655201a8ef9566e70eeb894579_1.png)

![](img/c4e63c655201a8ef9566e70eeb894579_2.png)

啊，库上面有HTMI的。那么注意的一点就是这个地方。啊，这个地方这个地方就是说前面是你的这个域名，后面就是我们这个路径啊，这个FCK的这个文件上传路径。

后面再接着加一个问号TYPE及类型等于MEDIA啊这个类型。啊，他是要pos多上去啊类型。

![](img/c4e63c655201a8ef9566e70eeb894579_4.png)

那么呃保存完之后，那么你双击打开这个一呃HTMI的文件的时候，那么它在这个地方有一个选择文件，你在选择文件，你就上传1个PSP点击这个上传啊，点击这个S。SUBMIT啊这个上传功能点击上传。

那么它就可以上传。上传上去之后，你注意一下啊，如果是本地环境搭建。

![](img/c4e63c655201a8ef9566e70eeb894579_6.png)

啊。啊，这个刚才说过，这就是在这个confi这个你找到这个文件，就是跟这里一样啊，必须要把这个fos改成t啊t。



![](img/c4e63c655201a8ef9566e70eeb894579_8.png)

![](img/c4e63c655201a8ef9566e70eeb894579_9.png)

你在这个地方上传完之后，有一点要注意啊，就是说它会报错啊，它会像下面这个图片一样，就是说这个。

![](img/c4e63c655201a8ef9566e70eeb894579_11.png)

这个这种错误。但是不妨碍哈呃出现这种错误没关系，你就在这个页面里面。

![](img/c4e63c655201a8ef9566e70eeb894579_13.png)

右键。啊，这个。

![](img/c4e63c655201a8ef9566e70eeb894579_15.png)

查看源代码。都可以啊，就是你用IE都可以。这个时候你可以看到这个。

![](img/c4e63c655201a8ef9566e70eeb894579_17.png)

上传的路径它上传的路径是在这个优索菲尔啊这个路径下面。那么这个时候你直接在这个网站的该目录下面接算这个优收费用。你的上传的这个PSPM吧啊，一打开一浏览好，这个时候你会还会发现一个问题。

就是说你点击这个页面打开的时候。也许会找不到啊，也有可能找不到啊，这个路径写错了，应该是这个路径，这个路径。好，这个时候你注意一下啊。你按一下键盘的P键。即可以查看登录页面。

输入设要密码就可以登录进去了。就你的微博设要密码。注意哈，这个是一个小的一个技巧啊，有的时候他就会啊出现这种情况啊，找不到找不到，你就按一下P键。



![](img/c4e63c655201a8ef9566e70eeb894579_19.png)

呃，这个前面给大家演示过，就是FCK的IS文件解析漏种。

![](img/c4e63c655201a8ef9566e70eeb894579_21.png)

挺起来的对新建一个数要点SP啊。

![](img/c4e63c655201a8ef9566e70eeb894579_23.png)

这每1个2。66的版本是这个路径。

![](img/c4e63c655201a8ef9566e70eeb894579_25.png)

2。4。3的是这个路径。大家用BURP去调试就行了哈，这个没什么太多的讲解啊。呃，这个点变成这个的突破方法就是再到再发送一次数据包，就是在BURP里面。呃，这个也讲过，刚才上一节课给大家演示过。



![](img/c4e63c655201a8ef9566e70eeb894579_27.png)

啊，我这里做了一下文字的一个解释。大家可以看一下。好，我们接着看一下后面。这SPX与GSP版本，这个是嗯针对2。4。1。



![](img/c4e63c655201a8ef9566e70eeb894579_29.png)

呃，其他的版本还没调是吧，2点4。1是绝对是可以的。

![](img/c4e63c655201a8ef9566e70eeb894579_31.png)

就是你在这个路径下面修改这个这个文件。这个文件。这个文件的参数改成这个点点杠，点点杠可以进入不同的目录，也就是相当于我们前面讲到的AP这个。呃，以外 ID生意。就是说快目录。



![](img/c4e63c655201a8ef9566e70eeb894579_33.png)

访问跨目录访问。关于木头访问有一个优点，就是说我们可以嗯牛郎捧虎。会相当于我们这个本地去读取我们任意。目录的文件啊，因为这尤其是一些数据库文件，这些文件我们就是它里面包含了一些账号密码。

包括这个配置文件啊，都是很重要的。呃，因为有些版本是这个。FK啊以微博ID3它的账号密码，它都是写在这个配置文件里面，就后台管理员登录啊，因为他是不需要这个数据库的啊，这个我们这个在前面给大家讲过。



![](img/c4e63c655201a8ef9566e70eeb894579_35.png)

JSB版本的路径啊是这个路径。

![](img/c4e63c655201a8ef9566e70eeb894579_37.png)

大家自己去把这个路径放进去就可以了。就是说大概大概就是说以后遇到JSB版板试一下这小的路径，看能不能直接浏览啊，留了相应的物录。



![](img/c4e63c655201a8ef9566e70eeb894579_39.png)

![](img/c4e63c655201a8ef9566e70eeb894579_40.png)

如果是SBX啊，它一样可以报这个报路径队的。

![](img/c4e63c655201a8ef9566e70eeb894579_42.png)

，暴录下。还有的就是我们这个嗯原续上传，因为我们。

![](img/c4e63c655201a8ef9566e70eeb894579_44.png)

呃。

![](img/c4e63c655201a8ef9566e70eeb894579_46.png)

FCKL包括以外部ID上，他这个文件。

![](img/c4e63c655201a8ef9566e70eeb894579_48.png)

![](img/c4e63c655201a8ef9566e70eeb894579_49.png)

看一下黑名单的文件，黑名单的文件就是说他在这。就说默认他是拒绝了这些文件上传。对不对？呃，这个是2。4。3，这个也拒绝了。它有些版盘它是AHTACCCSS它这样的文件它是没有呃。



![](img/c4e63c655201a8ef9566e70eeb894579_51.png)

拒绝上传的。呃，如果没有拒绝上传，我们可以完全可以新建一个文本啊文本文档。比如说把我们这个SP码上传上，以GPG的方式改革扩展上传到服务器上去啊。因为GPG是完全是可允许的啊，图片是可以上传的。

再接着我们通过这个来进行加载啊。就要保存为就是说把这行代码放在计算里面，计术本里面保存为这个STSCCESS文件。把算传到服务气里面。通过这个文件。

我们因为这个文件来进行解析我们这个点击PG这个扩展名的当做这个PSHP来进行一个解析啊，PSHP来解析。这个在我们这个课程里面前面的课程有这个文件上传啊，文件上传这个内洞这个演示里面给大家讲过。

就是说我们。上传一个这样的文件上去之后，这个允许这个就是说把PSH把GPG当做PSHP来解析啊，PSHP来解析。



![](img/c4e63c655201a8ef9566e70eeb894579_53.png)

![](img/c4e63c655201a8ef9566e70eeb894579_54.png)

呃，这个大家看一下我们以前的教材，以前的教材讲的很详细的。

![](img/c4e63c655201a8ef9566e70eeb894579_56.png)

那到自己回去去练习一下，但这里不再做太多的讲解。好，我们看一下这个另外一个呃连接器啊，SPAW。呃，这个编辑器我们用的比较少啊，我几乎没用过。



![](img/c4e63c655201a8ef9566e70eeb894579_58.png)

呃，那么在这里我也写了一下啊，目前我发现的就是说存在的版本1。0和2。0版本。

![](img/c4e63c655201a8ef9566e70eeb894579_60.png)

就是SP点类的于PHP版本。呃，这两个版本的嗯。V1。0杠2。0版本。他也存存在一个解析漏洞，而且这个我们可以上传这个。



![](img/c4e63c655201a8ef9566e70eeb894579_62.png)

你的这个特殊的内容一点。一点AP分号点GPG上传上去之后，它这里有个路径啊，上传路径是这个路径啊这个路径。



![](img/c4e63c655201a8ef9566e70eeb894579_64.png)

![](img/c4e63c655201a8ef9566e70eeb894579_65.png)

啊，上传一个这样的文件，上这个是你上传完之后，一般是在这个路径下面哈，就是默认路径啊默认路径。如果是你那个事来讲的话。



![](img/c4e63c655201a8ef9566e70eeb894579_67.png)

他需要配合阿巴奇的解析流种。阿巴奇的解析内容就是说我们例如意见。PSP。再是点叉叉叉啊，当我们当解析的时候，RY解析的时候遇见叉叉叉的时候，往前面解析，它就直接解析为11点PSHP了。

这样的话我们就可以直接浏览。这个我们在文件上传漏动里面也讲过啊，就是说针对这个嗯PSP这个28起的一个解析漏洞。我们在前面节讲过，在这里不再讲解哈，我这个上传路径啊。

我主要是把这个上传路径给大家列出来了，大家之后会用得到。

![](img/c4e63c655201a8ef9566e70eeb894579_69.png)

那么上传后的所有路径啊，它是这个路径。

![](img/c4e63c655201a8ef9566e70eeb894579_71.png)

哎，这个地方应该是应该这个地方是PSP哈。应该估计是这个。还是这种形式。户籍是。好，我们来看一下这个kind的ed扇。呃，这个是存在这个。变内目录的灯号，但是版本是3。4。2到3。5。5啊。

PSV版本的这个kind addition。那么他的这个。呃，变力目录这个漏洞它是在这个路径下面。这个录音下面。后面几个牌子等于啊换些讲。你看一下反亮。我这加了一个图。然后他就会爆出绝对路径。绝对不题。

他这里一个路径什么MNT微博613是吧，669。就要这样的话，把这个绝对路径报出来。而且还可以实现这个木木子便利啊。目录编利这个关键是看你这个pass这个路径后面接什么路径。



![](img/c4e63c655201a8ef9566e70eeb894579_73.png)

![](img/c4e63c655201a8ef9566e70eeb894579_74.png)

好，我们总结一下，最后就是说网站就是编辑器那种。嗯，它主要一方面是这个解利用IOS解析的一种，包括阿巴奇的啊，这个ang的这个他们都有一些解析内种，这个参照我们前面所讲解到的这个上传的那种。

他们有不同的这个解析啊，第二个方面就是默认账号跟密码，对不对？就是说一般的是AAAD888A232是吧？这样的一些密码。还有这个目录便历啊，就通过目录便历，我们找这个。

后台的登录账号密码一般是它因为它是编辑器，一般是没有数据库的，它是写到配置文件里面账号密码。如果遇见这种情况呃，我们直接就是说通过这个。读这个配置文件里面的账号密码。因为通过这个目录编辑。

我们可以下载这个相应的配置文件的这个。相在相应的这个confi点SSPR这个PSP这样的。啊，配置文件通过这个配置文件，我们去找啊另呃一些重要的文件啊。



![](img/c4e63c655201a8ef9566e70eeb894579_76.png)

叫账号密码。

![](img/c4e63c655201a8ef9566e70eeb894579_78.png)

还有这个摄产漆片啊，就绘画欺片。呃，冷一文件删去啊，包括我们这个。后台就。就像以微博A3在后台这个改密码的地方，我们直接可以插入呃一句话木马，对不对？还有就是我们编辑器的一些注入类的啊注入类的。

还有就是他的这个嗯连林载当，就是说白名单logo，还有黑名单logo，黑名单logo就是说它有些像CERASA这样的呃扩展名。他是没有加入到这个黑名单里面的。那么这个是我们通过这样的一切。



![](img/c4e63c655201a8ef9566e70eeb894579_80.png)

扩展名可以进行绕go啊，直接上传这个对应的这个wabra show密码。

![](img/c4e63c655201a8ef9566e70eeb894579_82.png)

![](img/c4e63c655201a8ef9566e70eeb894579_83.png)

啊，这里我都总结一下，一个是上传那种。啊，就是说呃在这里编辑器节不像网站后台的目录，就是说会员扣件信息，或者是其他的方式进行一个权线这个链站，防止未授权的访问。但是在站点不经意退意加固的情况下。

很多编辑器的的目录以及页面都是可以直接访问的几乎所谓的外部浏览器都有上传功单。编辑器编辑器就是为了给管理员什么带来方便，就是说上传图片啊啊，我们一些。呃，维护网站一些天天要更新的一些文章啊文件啊。

那么主要是起到这个作用的话。那么一般那么那么起到这个作用的话，那个PN机器它都有上传上传的功能，要上传图片啊，是吧？哎，小视频啊。那么都需要这个要上传。

那么通过这个我们就可以进行一个上传我们的这个木马程序。有些方点还经过大家这个编辑器的二次开发。那么二次开发的话情况下就是说。嗯，他的安全级别有的时候会更低，尤其是没有安全经验的这个。嗯。

程序编写来源来讲的话，他开发完之后会存在一些意想不到的这个。

![](img/c4e63c655201a8ef9566e70eeb894579_85.png)

这个我也不能懂。这种是目乳便利啊，在前面。

![](img/c4e63c655201a8ef9566e70eeb894579_87.png)

讲结果这样是通过VIRP这样根据拦截这个数据包，我们要进行手修改来进行一个目录编历。

![](img/c4e63c655201a8ef9566e70eeb894579_89.png)

![](img/c4e63c655201a8ef9566e70eeb894579_90.png)

还有就是编辑器之文件操作啊颜值限制这个不演散啊，这个也有可能哈，但是比较少，就是说主要是对上传之后的文件可以进行操作啊，修改文件名啊，修改属性，修改后缀啊，目认情况下，你是没有这个权限的啊。

除非这个管理权单独的这个目录啊，配置到这个所有权限。就是说你可以任意用户都可以对这个目录进行一个。修改，那么这终就是比较危险的。大家可以测试一下，但是。



![](img/c4e63c655201a8ef9566e70eeb894579_92.png)

很少。呃，这个是渗透思路啊，渗透思路就是嗯一个是操作系统会者中间件的一个类型判断。在解析内容，这个没什么太多的讲解。



![](img/c4e63c655201a8ef9566e70eeb894579_94.png)

![](img/c4e63c655201a8ef9566e70eeb894579_95.png)

啊，如何突破就是上权页面的验战方式怎么突破？啊，有些就是说啊有坚实念的，这个在我们前面课程也讲过。就是说针对这个前端的监设来呢，我们直接把这个coon里面的就是这个禁用，那么就可以了。在这里配置里面哈。



![](img/c4e63c655201a8ef9566e70eeb894579_97.png)

![](img/c4e63c655201a8ef9566e70eeb894579_98.png)

这个我们在前面这个课程里面都有。啊，或者是通过PIP拦截数据，帮我把这个GS代码删掉也是可以的啊，也是可以的。还有黑名章捞过，白名章捞过。白名当一般的我们都是呃空制付载荡哈，就是邻里载荡这种方式来捞过。

呃，关于我们今天这个嗯这节课我们就从嗯就讲就完成了。呃，有关于编辑器的那种，到时候大大家有什么问题我们。再进行一个讨论啊，有什么问题，就或者哪个地方讲的有问题啊，错误了都可以进行更正。



![](img/c4e63c655201a8ef9566e70eeb894579_100.png)

呃，大家也可以在网上去多看一些相关资料好进行一个总结啊，我会把这个文档也会打包给大家。大家嗯通过在这个基础上面再进行增加一些新的那容，或或者是完善这个文档都是可以的。



![](img/c4e63c655201a8ef9566e70eeb894579_102.png)

![](img/c4e63c655201a8ef9566e70eeb894579_103.png)

![](img/c4e63c655201a8ef9566e70eeb894579_104.png)

好，我们就讲到这里吧，下一节课再见。