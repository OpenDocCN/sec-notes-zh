# 经典15年i春秋渗透测试系统化教程 - P48：课时6 暴力猜解原理及方法 🔓

在本节课中，我们将要学习渗透测试中最常见的一种攻击手段——暴力猜解。我们将了解其基本原理、常见工具以及如何进行有效防御。

## 概述

暴力猜解在渗透测试过程中是使用最多、最常见的一种攻击方式。很多网站在渗透过程中，当没有找到其他漏洞时，通常会尝试对管理员后台、操作系统服务等进行暴力破解。只要机器性能足够好、网速够快，并结合社会工程学知识，通常有很大概率能够获取到用户名和密码。

## 什么是暴力猜解？

上一节我们介绍了暴力猜解在渗透测试中的普遍性，本节中我们来看看它的具体定义。

暴力猜解，简单来说，就是将密码进行足够次数的尝试，直到找到真正的密码为止。

![](img/a8b1d247eae88e5e05d97369b6e13f40_1.png)

![](img/a8b1d247eae88e5e05d97369b6e13f40_2.png)

## CS架构与BS架构的暴力猜解

![](img/a8b1d247eae88e5e05d97369b6e13f40_4.png)

了解了基本概念后，我们来看看暴力猜解在不同架构中的应用。

### CS架构暴力猜解

![](img/a8b1d247eae88e5e05d97369b6e13f40_6.png)

CS架构即客户端-服务器架构。基于此架构的应用程序，例如SSH连接、FTP、数据库服务等，往往提供高权限用户账户。这些高权限账户（如SQL Server的sa权限、MySQL的root权限）一旦被破解，危害极大。

以下是针对CS架构的常见暴力破解工具：

![](img/a8b1d247eae88e5e05d97369b6e13f40_8.png)

![](img/a8b1d247eae88e5e05d97369b6e13f40_9.png)

*   **Hydra**：功能强大，在Kali Linux等系统中默认安装，支持多种协议。
*   **Xscan**：早期常用的扫描和暴力破解工具。
*   **Bruter**：图形化界面工具，在Windows上运行，支持多种协议。

![](img/a8b1d247eae88e5e05d97369b6e13f40_11.png)

### BS架构暴力猜解

![](img/a8b1d247eae88e5e05d97369b6e13f40_13.png)

BS架构即浏览器-服务器架构，一般针对Web应用程序中的高权限用户进行破解，例如网站内容管理系统的后台账户。

以下是针对BS架构的常见暴力破解工具：

*   **Burp Suite Intruder模块**：目前最常用、功能强大的Web暴力破解工具，几乎可以替代其他工具。
*   **国内针对性小工具**：针对某些特殊服务或场景。

掌握了这几款核心工具，对于常见的暴力破解需求就基本能够应对了。

## 常见暴力破解工具演示

在了解了不同架构的工具后，本节我们将通过演示来熟悉其中几款工具的使用。

### Bruter 工具演示

Bruter是一款图形化工具，可以用于破解CS架构服务（如SMB）的密码。

1.  选择协议（如SMB）。
2.  输入目标IP地址（例如 `192.168.1.105`）和端口（SMB默认445）。
3.  设置用户名（例如 `administrator`）。
4.  加载密码字典（如 `top100.txt`）。
5.  点击开始破解，工具会快速尝试字典中的密码。

如果目标密码简单（如 `123456`），工具会很快显示破解成功。

![](img/a8b1d247eae88e5e05d97369b6e13f40_15.png)

### NTCan 工具演示

![](img/a8b1d247eae88e5e05d97369b6e13f40_17.png)

NTCan专门用于批量破解Windows操作系统的账号密码，支持导入IP地址列表进行扫描。

1.  输入或导入目标IP地址列表。
2.  设置用户名（如 `administrator`）和密码字典。
3.  选择扫描选项（如SMB端口）。
4.  开始扫描，工具会报告存在弱口令的主机、用户名及密码。

### 密码读取与生成工具

![](img/a8b1d247eae88e5e05d97369b6e13f40_19.png)

暴力破解的成功率高度依赖密码字典的质量。因此，收集信息和生成针对性字典至关重要。

![](img/a8b1d247eae88e5e05d97369b6e13f40_21.png)

![](img/a8b1d247eae88e5e05d97369b6e13f40_23.png)

![](img/a8b1d247eae88e5e05d97369b6e13f40_24.png)

*   **信息收集**：在获取一台服务器权限后，应尽力收集各类密码信息，包括Web配置文件中的数据库密码、操作系统缓存密码、浏览器保存的密码等。公式可以表示为：`成功渗透 = 信息收集 + 密码复用规律`。
*   **字典生成**：根据收集到的信息（如公司名、年份、常用符号组合等），使用字典生成器创建针对性强的密码字典。许多人习惯在不同平台使用相同或规律相似的密码，这为横向渗透提供了可能。

### 其他辅助工具

*   **Mimikatz**：可以读取Windows系统内存中的明文密码或哈希值。但在非交互式命令行环境下可能不便使用，可选用其他类似工具（如 `getpass`）。
*   **WebBrowserPassView**：用于读取IE等浏览器中保存的网站密码。
*   **MD5破解工具/网站**：用于破解经过MD5等哈希加密的密码。
*   **PDF/Office密码清除工具**：有些工具可以直接移除或破解受密码保护的PDF、Word文档的密码。

![](img/a8b1d247eae88e5e05d97369b6e13f40_26.png)

![](img/a8b1d247eae88e5e05d97369b6e13f40_27.png)

## 如何防御暴力猜解？

学习了攻击方法后，我们必须了解如何防御。无论是BS还是CS架构，防御暴力猜解可以总结为以下核心方法。

### 1. 设置强密码

这是最底层的防线。强密码应满足：
*   **长度足够**：不低于8位，建议8-16位。
*   **复杂度高**：混合使用大小写字母、数字和特殊符号。
*   **避免关联**：密码不应与用户名、生日、手机号等个人信息有关联。
*   **避免通用密码**：切勿使用 `123456`、`admin888` 等常见弱口令。

### 2. 使用验证码

验证码能有效防止机器自动化攻击。
*   **作用**：防止暴力破解密码、刷票、论坛灌水、机器人注册、CSRF攻击等。
*   **类型**：图片、短信、邮箱、答题等。应使用难以被机器识别的验证码（如带干扰线的图形验证码、行为验证码等）。

### 3. 限制登录尝试次数

通过登录日志监控并限制失败尝试。
*   **策略**：例如，同一IP或账号连续密码错误3次，则锁定该IP或账号10-15分钟。
*   **实现**：在登录逻辑中查询日志，对连续的错误登录行为采取限制措施。

### 4. 提升安全意识

对于个人和企业管理员：
*   **密码隔离**：重要密码（如网银、邮箱）不应与普通网站、管理服务器的密码相同。
*   **定期更换**：对重要账户密码进行定期更换。

## 总结

![](img/a8b1d247eae88e5e05d97369b6e13f40_29.png)

本节课中，我们一起学习了暴力猜解的核心知识。我们首先明确了暴力猜解的定义，即通过不断尝试来破解密码。然后，我们区分了CS架构和BS架构下暴力猜解的不同目标与常用工具，如Hydra、Bruter和Burp Suite。接着，我们通过演示熟悉了部分工具的操作，并强调了信息收集和密码字典生成的重要性。最后，我们从设置强密码、使用验证码、限制登录次数和提升安全意识四个方面，全面探讨了如何有效防御暴力猜解攻击。理解并实施这些防御措施，对于保护系统和数据安全至关重要。