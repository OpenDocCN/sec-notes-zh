# 经典15年i春秋渗透测试系统化教程 - P19：课时2 XSS的三种分类（DOM，反射，储存）（上） - 老网恋教父了 - BV1n54y1B7F7

🎼Yeah。好，我们接着讲解。现在把这个。呃，夸张的三种类型给大家讲解一下，就是说呃防射型叉SS跟这个。呃，程序型还有盗墓型这三种类型这个实例给大家讲解啊，这个例子我们刚才呃前面给大家讲过。

下面我们来看一下这个有一个网址。这个网址。呃，国外的一个网站，大家这个网址大家需要VPM拨号连接上去。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_1.png)

嗯嗯你可以使用一个免费的VPM。在网上你自己去下载。下载完之后。呃，连接到这个网站。连接上去之后，它这里有各种夸张这个。提供了黄金这个源代码给你测试，大家自己去在这个网站来测试，有程序型的，有防射型的。

有有盗墓型的。还有其他类型的啊，f兰石猪鹿啊这些等等。他都有啊都有。那么这里我们这里是讲防射型的夸张。那么我们就点击这个防晒型的。反射型大家注意哈，反射型夸张它这个我们插入的恶E蛋吧。

它是不保存在这个服务当的哈。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_3.png)

也就是说我前面给大家讲过了这一个。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_5.png)

这个夸张是吧？你可以在这里测试。就说我们在这里插一档二一代嘛。移动跨张代码。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_7.png)

他弹一弹过这个是吧，你看它是不保存在这个它这个服务端就是服务器里面网站程序里面。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_9.png)

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_10.png)

他就说你说过什么弹出什么，他就马上执行。那么反射这个反射型的只能通过钓鱼的方式。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_12.png)

啊，伪造的方式去。呃，发送给对方。啊，发给用户来进行钓鱼。要配合这个C红社会工开学来使用。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_14.png)

有冇。那么我们在这个实际过程中。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_16.png)

这个就是看你的运气了啊，不一能百分之百能成功啊，就是说你能入侵成功来钓鱼呃，钓鱼能成功的。最关键的我们这个成局性挂上，它的作用是非常大的。啊，程序型的。那么我们就给大家在这里来演示。啊，我们先把这个。

粉射型的给大家演示完哈。粉射型的我们刚才教大家去点击。啊，已经进入了这个页面。那么首先我们看一下。body底。也就是说。它这个地方各种地，你看一下原旦码，比就说他这个A，你看哈。我说在这个包。

包底之间在这个之间。也可以插夸张代码。啊。夸张代码也就各种输入的地方，只要你能输入的地方，我们都可以试一试。啊，来进行夸张。你看啊现在我们在这个。这个之间呢把这个A替换成其他的。我们举个例子。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_18.png)

你看我们这个扩散代码。啊，你看弹一个对话框出来了，说明这个地方是存在扩张的，存在扩张。也就任何参数有参数的地方我们都可以输入啊，输入然后返回。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_20.png)

返回现在我们看一下头之间。这个是在第一个是呃玻璃是在主题之间哈。现在我们在这个头。来插O一代码，我们来看一下能不能弹出，哎，也是可以。其实它这个地方我们可以看一下。他是在这个地方。

他这个head就是我们在其实在这个headd。他这个之间插了一张这个代码，你看夸张代码，对不对？所以他这个。这种程序是非常不错的，还还有在标题的地方。啊，也是可以，你看这标题。你看。这个时候在标标题。

你看这个在我的这个这个页面看看到我的鼠标前面这个地方看标题改成这个了，我们的OE代码。啊，后一单嘛，你可以在这里我们可以看到。tate take就是标题的意思。啊，在标题之间插了一张快夸张代码。

我们即动返回。我们再看一下这个。啊，这个就不插了哈。擦吧，没事。那他他这张代码是在哪里啊？在这个地方。还有一个注式的一个点也是可以插的。但他这里把它注射掉了，所以没弹出这个对话孔。

在配个标签下面也是可以插框架大码啊，后面大家自己测是吧啊，各种地方都是可以插的那这这么多实例，你看这个才是HTML的。啊，有ts的，有CSS样式的，你看是吧？全部有有GS的。啊，装个c的呀。啊。

这个地方都可以啊都可以，你把这改一下就行了，对不对？哎，不对。你看看一下源代码，它这个插到这个地方来。还这个地方。有EVAR的。所以说他这个。UURL的。要这个史尼斯汀也。

他这个粉色的环境大码是特别多的啊，三号类的。太多太多了，这个是专门就是提供了一个环境来给你测试各种夸张。你看你看他这里面太多太多了，实点。你直接点进去测试就是了。夸张的城市。我睇。对不对？

都有各种有弹墓类型的，你看这是弹幕的。盗墓测测盗墓夸萨。当时扣件信息的。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_22.png)

好，下面我们就。仿射型我们就给大家讲到这里。讲到这里。好，现在我们来看一下程序型的夸张。那么这个我们拉这个DVWA给大家测试。那么与反射性这个。相比，那么唯一的区别就是它这个X大，它直接带独到数据里面。

也就是说。它是保存在这个服务器里面的。啊，服档里面。就是在下次浏览的时候又被读取出来。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_24.png)

啊又被读取出来。那么我们现在呢给大家用1个DVWA给大家演示一下。看下这个效果。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_26.png)

好，这里有一个叫什么程序型的夸张。我试一下级别。高这时候它是没有没有这个款的。好，我们来看一下。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_28.png)

他这个演示的话，我直接。呃。那插路哈。直接在这个对话框里面插入一可。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_30.png)

标题就是说尤其像程序这块的也在了一些。呃，论坛。啊，留言板啊。这样的地方就是冷速度的地方。一般都是有程序型夸张的。呃，举个例子，我说个test。是吧扯术。用户名才是，那么里面的内容消息。

我现在插一段恶意代码。插一张这个夸张代码。好，我们点击。好，现在我们在这里刚才看到一个弹出一个对话框来。对不对？你看啊。当我现在。点击其他的页面不谈对话钩。比说我刚才插入了一张夸张代码。

当我下一次就是管理员去点击这个。页面的时候，它马上会弹出一个对话框，所以每次只要你点击这个。他都会弹出一个这个夸张代码，这个就是程序型的。反射形的。就说他就不会这样的。明白没有？

防射性的就是说你第一次你你这个。插入OE代码之后。如果你把这个页面关闭了，你再去打开这个页面，它是没有它是没有这个OE代码的。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_32.png)

所以说他与这个。放射线的一个区别就是。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_34.png)

他这个代码被带入到数据库里面了，代入到数据里面去。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_36.png)

也就是下次流转的时候又被读取出来了，又被读取出来，这就是成局性的方法。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_38.png)

那么这个成觉这个代码到哪里去？为什么第二次去点击这个页面的时候，这个OE代码被读取出来？我们可以来到这个数据库来来分析看一下。吓。买SK的杠EXE，我们直接把这张代码复制出来。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_40.png)

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_41.png)

诶。我们这样输入吧，嗯，这里没有。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_43.png)

我没有把单码你。讲有就是用户名，用户名是录侧。更批是密码，这个是连接这个mySK6的用户名和密码啊，我的用户名密码MSK的用户名密码都是录程录程。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_45.png)

好，就登录进来了。登录进来之后。嗯。我把这个命令写到这里了啊，给大家下次使用。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_47.png)

啊，这样每次不不需要就是我就没有粘土。呃，首先我们可以看一下。呃，我们这个DVWAD数据库。数据库是查看数据库是dabb。等学。这个是我的DVWA的库。啊，也就是说你把这档恶意代码插入到网站。哪个网站？

我我这个DVWA这个网站，这个网站的数据库是叫DVWA啊，我的名字就是叫这个名字。那么借着我们右手DVWA。进入这个数据库，进入这个数据库之后怎么做呢？也可以用s tables查看一下。查看当前的表。

这个库里面有这两个表。那么这个我们这个钢丝布就是我们这个留眼的地方。才是我们这个就这个留眼的地方。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_49.png)

就对应的是这种表。那么我们只需要看这张表就是。那么你在这里。呃，用s个依句哈。查看s克信号，查看所有人来自fron。来自哪个呀？来自这个表。Gst。不可。在那块您可以看到。你看到没有？标记为taste。

内容为这个这个是我刚插的这个恶意代码吧，对不对？被。它直接插入到这个数据库里面去了，这段O一代码插到数据库里面。所以说你下一次去浏览这个页面的时候。他直接从数据库里面读出。在读取里面。

读取了这一段OE代码。明白没有？跟反射性的区别就是说这个。所以说它这个程序性的夸张，它的危害性是比较大比较大的。啊。比较大的。你想删掉这个。删掉的会那是这个里面的内容。嗯，你再去看一下。

它里面就没内容的。哦。你现在我把这个夸张代码公司删掉了，是吧？里面是空的。像它里面在表内容是空的。那么现在这当我再去。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_51.png)

再点击这个页面的时候，它这个对话恶一大码就不会读取出来了，对不对？所以说他这个存就行，这直直接存到数据库里面去了。好，我们直接可以在这里看代码。他这个软代码。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_53.png)

他就是没有过滤。啊，没有顾虑。你可以在这里可以看得到。他第一点这些呃变量啊。那我都没有对他进行一个过滤。都没进行过滤。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_55.png)

你看一下他的高。点样答你。他是怎么去做的？哎，我这里改了还是还是变成。低的级别。呃，没有改过来算了吧，大家自己看一下吧，看一下他的高的源代码。他高的点击高的时候，他的这个。嗯，程去去卡上。

他就进行过滤了。嗯，你直接是躺醉。差多一单嘛没用的啊，他直接把它过滤掉。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_57.png)

呃，所以我在这里给大家看到了一个成局性的一个夸张一个实例。那么嗯还有其他的实例啊，十例2。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_59.png)

也是这D给大家啊，这个例子大家自己去看一下吧，这里我就不再演示了。要适量。好，现在我们来看一下第三个实力，盗模型况子。在讲大冒险快张之前。



![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_61.png)

我们在百度里面很多人不太了解这个盗模型的。它是什么样的一个概念？

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_63.png)

好，我们来看一下它区别啊。

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_65.png)

![](img/a430cbe0c33cdfc8edfdec4e50f8b8c8_66.png)