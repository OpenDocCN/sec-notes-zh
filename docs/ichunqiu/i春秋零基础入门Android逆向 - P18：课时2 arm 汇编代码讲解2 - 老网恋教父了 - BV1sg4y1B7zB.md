# i春秋零基础入门Android逆向 - P18：课时2 arm 汇编代码讲解2 - 老网恋教父了 - BV1sg4y1B7zB

🎼。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_1.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_2.png)

ううん。嗯，好的呃，大家好，这里是凌日安全论坛的安卓零基础逆向入门培训教程，我是蒋石爱方。那么今天就来讲第十7课，这一节课的话继续来讲一个R配备代码的一个分析。啊。

那么这一节课的内容的话可能会比较琐碎啊。但是保证的话这里的一些内容是比较重要的东西。所以如果这节课说呃听不懂的话一定要多看几次，把这些内容给弄懂才行。呃。

首先的话呃这一节课内容和和window上是比较类似的，他用到一的一些T技巧啊，或者说是说是分析方法和那个win3V上的一个逆向是很类似的。好，首先先来说一下这样一个E文件。那么这一次我们的一个。呃。

目标文件话还是这样1个hellonet的1个APPK文件。呃，这是我们上两节课所编译出来的一个程序。那么我就对它的进行了一点小小的改造，让它来适应我这一节课要讲的一些东西。

我们先用JEB来打开来看一下它的一个java层的一个调用。我们看一下它java层是怎样调用那个netttic层呢。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_4.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_5.png)

好，我们这里我们这里就等待它1个GDB的一个反面运的一个完成。顺便来做一个记录好，找到它掉的地方。那么就是就是这样一个man体的一个入口的窗体中，看到它首先可以静态加载一个hello的1个SO文件。

那个动态库。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_7.png)

接着它里面就只有一个let的函数，叫叫用hello衫。我们找一下它的一个电路。会发现它就会在一个按钮的点击试卷里面。只要当这个按钮给点击完以后，它就会调用到这样一个hello3。

接着给它传递了一个叫做100的一个参数过去。然后把它的反馈的结果计算出一个some的一个值。啊，它就是这样一个这样的一个地方。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_9.png)

啊。我们就把这个关了，我们来开始进行一个分析。好，请大家记住啊，它整一个程序的调用的话就是hello3，然后传递的它参数以是1个100的1个整形数值。好，我们找到我们要分析的一个目标的SO文件。打开它。

然后在1个LB幕下找到对应的一个动态库手机的快译办公是RABIVC。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_11.png)

好。找到它以后，我们就开始对它去进行一个分析。那么首先我来给大家介绍两款1个SO文件的一个分析工具。呃，第一款是一个readEF，还有另外一款是一个SO help啊，现在说一下吧，这个SO文件啊，呃。

对安卓SO文件或者说是属于一个lin系统的EO文件来说，它们都是1个ELF格式的，用1个16字文件查看工具打开，然后来看一下的话。

可以看明显看到头4个字节是1个ELF的一个标志位是一个非常明显的一个魔术。那么如果你用其他文件打开，而现它头4个字节都是这个样子的。那这些都是ELF文件，那么这些东西都可以用一个。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_13.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_14.png)

相关工具去对它进行一个打开，然后分析。好，那么既然知道它是1个EF文件了，那么我们就自然而然的就能够使用相应的工具去对它进行个分析。首先第一款的话是一款最为经典最为常用你就也为是最为强大的一个分析工具。

它是另英尔上带了1个ERF文件的一个格式查看工具。哎，他再看一下他提供了这么多的功能，基本上对于1个FG1个SO文件所需要的一些信息，都它都可以提供得到。

但是唯一的不足之处之就在于啊它是需要一个linux环境去执行的。也就是说哎就是说。当你的机器唉你只能用一个虚拟机去对它进行一个使用。比如说我们的一个污包度的系统，哎。

那么就能够用这样的系统来进行一个打开了。那么这里为了方便的课，就用另外一款就是一个min，还有还有另外1个CICI go的话，也是可以去进行一个呃打开了。那么大家大家在在下面自己操作的时候。

也可以相应的哎在虚拟机上进行一个使用。好，我这里就用minW来进行一个操作。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_16.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_17.png)

呃，这是一个linux的一个命令行。那么它的命令和一个window上画是挺类似的。哦，也是用CD来作为一个目录进去的一个操作啊。好，接着我们来看一下一个readEF的一个呃参数说明。

我们传递个杠H的参数过去，就能够看到它的一个啊使用方法的一个一个说明了。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_19.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_20.png)

好，with theEF然后一些是一些选项。那最后就是我们要进行一个查看的1个EIF文件的一个名称了。我们看一下它提供了这么多的一个小选项啊，有这么多。那么但是我们实际用的到的话，一般来说就只有这几个。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_22.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_23.png)

好，这里杠A的话就包含了下面所有的一个投入，它就是显示S文件的所有信息。我们我们这里就直接使用个1个杠A。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_25.png)

好杠A，然后然后后面跟着的是我们的一个目标SO文件的名称LBhello。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_27.png)

好，可以看到可以看到它分析出来了这么多的一个信息，嗯，就一页就这里一个命令行，唉，甚至都不能完全显示。那么这个时候怎么办啊？来这个时候我们可以把它显示出来的信息给打印到一个文件上去。然后我们这样写。

把它打印到一个log的KT上去。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_29.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_30.png)

好，就来这里就生成了。我们用于用一个文件查看工具来进行一个打开。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_32.png)

然嗯来看一下它的一个呃详细的一些内容吧。首先整一个文件查看工具，一个有LF，它提供的第一个信息就是1个ELF head，也就是ELF的一个头信息。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_34.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_35.png)

对应着就是这样一个杠下H的一个指令E文件头，它是转这一个子的，首先是一个魔术，然后class类的啊，慢慢走下去会是一个 head选 head就是它的一个解就是对应这这是正态分析加载的时候的信息的就是用这一个选 head来加载一个文件接着再下是一个pro headpro head的就是程序它动态加载的时候。

那么程序加载的时候就会根据一个pro head值来进行一个加载。如果说个S文件被混淆的话，它的它的 head可能是错的那pro head肯定是对的因为程序加载就用到这样一个信息。

所以它不能对这这组表进行一个修改。好，我们慢慢走下去，下面的话就是一个动态的一个d，就是动态节。你可以看到的程序一些依赖库的一个文件，还有它的相关的一个表的一个位置信息之类的。好。

比如说呢这个S文件遗样了这么多的1个SO。让慢慢走下去。好，可以找了找到它的一些函数的一个入口点，还有它相应的一个法馈意义的内容。好，这是它另外的一些导入导出的函数。好。

那么这一个的话就是一个VEF所能够为我们所提供的一个SO文件的一个信息。那么更加详细的内容的话会在这一套教程的最后几节课中，最后几节课的1个EI格式的一个介绍中进行一个详细的讲解。

那么这里的话就暂且只进行一个简单的一个说明。啊，如果想要理解了解更多的内外框，也可以自行在下面去查阅相关的资料。好，那么这里就先暂且先暂介绍到这里为止。好，那下一个的话就是一个SO helper。

SO helper的话是一个大流行的，那么它能它呢也能够提供一个不错的一个分析功能。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_37.png)

嗯，当然bug的话还是有的。好，我们就不能够全部镶下，它bug还是有，不过它提供的功能的话也勉强可以吧。那么可以看到话从符号表可可以查到相关的函数信息，有它入口点评一料，然后是一个区段，可以查到一个呃。

这里是一个是下水赫德。然后ha跨架所信T，然后也提供一个不错的一个反编译能力。啊。那么这个就是一个筛选筛选 head，喜欢的话，哎，比如说喜欢一个大额ID这边的一个修改的软件的话。

也可以用这个来进行一个分析了。好。好呃，那么下面的话就是我们一些内容的这节课内容的正式开始。由于它的一个内容比较熟，所以我就先来做一个呃简单的一个介绍。先，然后后面才是一个正式的一个分析。呃。

首先是一个SO加载顺序啊，就像我们的程序加载一样。那么整个SO它在加载的时候，它会有一些函数来对某一些变量，某些全群变量啊进行一些初始化的一个动作。哎。

那么这个就是SO加载时候的某一些被主动调用到的一个函数。那首先是一个IIT里的一个函数就是以IIT起头的一一系列的一个函数。呃整个SO的话会在启动的时候先调用到这些函数来进行一个初始化。

那么接着就是一个系统主动调用的一个JI了，这个函数在我们前两节课中已经有接触者到了，是按卓系统系统中特有的会被主动调用的一个地方。好，另外一些的话就是其他函数，然后在整1个SO文件，它在退出的时候。

还会有1个FII系列为开始的一些E堆A函数啊，不过这个的话一般我不会用得到。因为整一个SO文件它在退出的时候，相当于整一个程序就被消毁的时候，那这个时候就是就是整一个内存被释放。

那么这个函数就不会被调用得到了。所以后面的函数可以不用分析。接着是一个对栈对栈，在上一节课中已经说到，但是还没有详细的分析啊，对栈的话，它主要最后就是用来保存一些临时的变量，或者说某一些集算切的值。

还有用还有这一个函数退出的时候会用来还原一些运行的环境。呃，这里的话这样说可能比较模糊，我就来举一个例子吧，比如说一个函数，比如说一个函数，我们暂需要加一个函数。好。我们这里假设是一个C加函数。

然后它里面新建了一个临时变量。好，某个的问题就来了，这里创建一个临时变量。那么我们在什么地方来保存这样一个变量的值了？哎，对，我们这里就是在一个对象中来保存这样一个临时变量的一个值了。

然后在程序进入来的时候，就可以在对栈创建一个空间，然后把这一个变量的值给放到对象之中，然后在程序退出的时候，直接把对账空件给释放掉。哎，那么这个变量也就不存在了。那么这个就是对栈的对作用。

那么和对栈对应的就是一个内存段的数据，它用来保存一个全局变量的作用，哎，比如说这一个B它就能够在所有的函数中进行一个直接直接的调用。因为它是位于全局变量的之中的，也就是处于那一个内存的数据段之中。好。

那么这是一个呃一个保存的一个值。啊，另外一个就是一个对账平方原理。这个下面再说。好，我们考下去的况还有一个临时变量与全局变量就是一个内存数据，还有对账数据的一个。呃，区别。接着是一个指针。

指针的话是一个C加交中啊，相是一个比较灵最为灵活的一个概念吧。可以说C加加的一个或者说C的一个核心的话，就是一个指针了。啊，你指针用那个6的话，哎，想做什么都可以，就是这是一个指针。

还有另外一个就是一个计算机中所会运行到的一个进制数，呃，就是一个二进制八进制，还有十六进制。我们用一个window上自带计算机给演示一下。啊，首先啊我们的计算机中，在底层所存储数据的话。

都是用一个二进制来表示的。对应着电位的一个呃启动盒外关闭的两两个状态，都是用二进制来表示的。但是我们在看的时候为为了方便。哎，因为我们看二进制的时候看到这种查异段数据我们不能不能分辨出来。

我们在看的时候一般都会转换成一个十六进制。好，或者说是八进制呃，二进制、八进制和16进制的话是可以直接的去进行一个转换的。比如说哎这里这1个12进制对应的二进制，二进制是这个样子的。

它是要按照1个8421的定理来进行一个转换的那，何谓8421，何为8421。比如说哎我举个例子啊，8421。呃，F513。那么根据一个8421的一个定律的话，那么F就等于8加上4加上2加上1。

就等于恰等于15。那么8421的话代表着这里，比如说二进四，它有呃有4个位，那么这个位对应的是8，这一个位对应的4，那么这一个位对应2，那么这里就是一了，就等于1111。

那么五的话就会等于等于等于4加1。那就可以等于0101哎，这里是8，然后这一个4，然后这是二，这个是1，那么这就是一个842要的定义，你要一的话就等于1的就等于1个01，然后三的话呢等于2加1。

那么对应的二进制二进制的话就是0011，这一块就是一个84L定律，在这里也可以看得到转转换过来也是一样的。那么这就这就是一个呃十进制，还有一个二进制的一个转换。呃，但是这里的话有一呃自动的。

我们有一些工具是可以被我们外，而且一个自动转换。那么这里的话最好先来理解一下概念吧。我们内存段中所能看到的数据都是1个16进制的一个数据了。所以如果是比较习惯时间这一块，一定要先来进行一个转换。

一定要熟悉一下石油进制的一个变换才行。还有另外就是一个参数传参规则，就是1个ATPCS的一个规范。前四个参数会用到1个R0到R3的继存器来进行一个传参。

那么其他的话就可以通过一个对账的一个数据来进行一个参数的一个传递了。好，那么这一次我这节课中打算介绍的一些内容。好，那么下下面才是正式的一个开始的一个一个部分。好。

我们打开一个我们用IDA来打开我们的一个目标SO文件，就是一个这样1个LRBhello的一个文件。打开。啊，我们直接拖进去进行一个分析。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_39.png)

好，那么这里就已经完成了一个分析了。这一些这里就就是一个汇编窗口，这是汇编代码。然后这里是函数窗口。那么在这里可以对一个窗口页进行一个切换，可以创造切到一个内存查看中窗口，一个ha的一个窗口。

还有是一个结构体窗口，还有am窗口，然后导入和导出。好，这是几个窗口也用的比较多的好。我我们再继续来往下走的时候。嗯，一般我们在分析的时候呢，会用2个IDA来把这个SO文件来打开两次进行一个分析的。好。

我们就来把这个SO文件拷贝一份，然后重命名。然后再用ID进行一个打开进行一个分析。那么后面的分析的话，我们就会结合两个SO文件来进行分析了。一般一般我们在分析SO的时候都是这样做的。哎，这是为什么？

那是为什么？因为SO它在动态调试，不果说它在加载到内存的时候呢，它的某一些信息，某一些数据啊就会丢失掉了。那么丢了我们就要怎么办呢，丢失了的时候，比如说这些函数，我们在调试的时候，这个函数表可能是空了。

然后整个程序就说哎这个SO文件没有导数函数，那么这个时候怎么办呢？这个时候我们就可以在一个静态分析的这一个比如说这个静态分析的这样一份，我们找到对应对应的偏移，然后在动态调试的地方哎相应的下一个断点。

这是一个调试的一个小技球。对，所以我们这一般是一份用于度画调试，还有另外一份用于静态分析。那么调试那一段名字一定注意不一不要修改。好，我们就来正式的一个开始吧。

现在在动态调试再有就在这一份LBhello原始这一份进行一个动态调试。然后这一份叫AI one的话就进行一个静态分析。我们找到我们对应想要分分析的一个函数，叫hello3。在一个函数。

比如说在一个分ion table里面，那，我们按ctrl加F进行一个搜索。我们的名字已经知道了，就可以直接搜索hello了。好，双击，然后就会跳转到相应的一个地方。好。

这一点就是我们要分析的一个函数叫号3，我们在它在它的函数头下还有一个断点，下断点再选中这一行L后IM2就能够这里变成红色，就证明下断点了。好，这样。下午断点。进行一个正式的一个加载。好。

接着我们就来进行一个动态调试了。连接我们的手机，然后安装好相应的1个APQQ文件，用APDB后指令。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_41.png)

か哈？回声好，我们进行一个呃动态的一个调试。呃，上一节课所说到的一个调试的话是一个R呃RAN star的一个指令，然后程序来填留个在一个入口点件的再用JDP来挂载嘛。

那么这里的话我们就来变换一个这种方法。来，这里我安装完以后的话，就直接在手机上进行一个打开。接着使用ATP的一个attach一个挂接的指令。好，那么这样挂接指令的一个好处。

就是在于我们不用打开monitor，也不用使用一个JDP去进行一个挂接，就可以直接连接上去了。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_43.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_44.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_45.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_46.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_47.png)

呃，就是因为的括它这样启动的时候，它的轿车已经跑起来，不再需要1个GDP去去进行一个跑。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_49.png)

当然话区也有画区也有，就是当一个程序它已经跑起来的时候，哎，它的SO文件就已经加载了。你那你一些可啊可在释放的时候，一般都是这样一个SO文件呃运行的时候，对不对？那这一个时候可能会错过非常非常多的时机。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_51.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_52.png)

这也是比较呃不行的一个地方。哎，但是做为一个调试，这样就已经足够了。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_54.png)

哦，我们使用有一个挂机功能啊，步骤还是一样，先进入到校的一个目录下，然后启启动它在一个手机端的一个服务器。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_56.png)

然OC天B，然后启动一个按卓 server，看到看一下它的一个端口记录一下，然后进行一个端口转端。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_58.png)

这下他。333。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_60.png)

然后就可以可以进行一个调试了。点bug的时候，就就要先设置一下一个process option，然后再进行一个attach。哎，步骤步骤也是一样的，只是扫了后面几步而已。我我们找到对应的一个嗯好。

找到对应的一个程序。helhelloty。确定。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_62.png)

好，接着整个程序挂接起来以后，它就会询问我们的2个SO文件是不是一样的。那就是因为它检测到我们的程序加载的这样1个SO。然后我们静态分析的时候也是这一个名字的。如果他们是一样的话。

那么IDA就会完成整一个节的一个重新的一个定位，把一些函数啊断点也可以从定位到相应一个地方中。那么这里我们两个SO文件是一样的选择线。然后等整个ID它的一个分析完成，还有从定面完成。好，这已经完成了。

我们来看一下它的断点。我们刚才下来那个断点是不是在相应的位置，找到debug，找到一个呃 points对方 list。好，可以看到这里我们有一个断点双击跳进去。哎。

发现它是在hello style里面了，证明我们下断点已经正确的移到相应的位置就算了。好，在这里有几个窗口，有一个识别窗口，还有一个模块窗口。呃，如果你这边没有话，也可以这样一个进行一个打开。

底边口底报到B里面可以找到一个呃现场窗口，还有一个模块的列表，甚是甚至还有一个logo，然后有一个对账的一个表。然后都是可以进行一个查看的。好，还有一个对账跟踪。好，这个不管。我们找到一个mods。那。

to的话也可以查看它整个程询，它所有加载的一个SO文件，我们也可以找到我们对应的一个hello的一个。hello get搜库双击就能够跳到它的一个符号表之中啊，可以看到它导出了这么多符号。呃。

是因为它呃整个同学没有被混淆。那么这里的符号分析还是可以用的。好，这是整一个程序所导出的一些这这些符号。有这么多好，这多我都不管了，我们就来把主要精力集中到分析在都集中在分析这个函数之上吧。好。

这是一个hello3的一个函数，我们来大致的跑一遍。行我们来我们来触发这个函数，整个程序跑起来先。好，然后整一个，然后点击一个按钮，那么这个时候已经P线已经停留在这一个位置了。好。

那么这个时候就可以开始来重点信号以后，开始了进行一个调试，进行一个分析了。好，嗯，首先嗯首先是一些递存器，那么这里设一个存递存器啊，随一个窗口有这么多信息。我们这里主要关注几个啊。

首先是1个LRLR就是程序的一个返回地址。上一节课已经说过了，它就可以返回到这个地方。好，回到这一个地方。那么看一下话，这里ID是没有把它正正常识别出来。因为这里它返回到这里，那么这一个应该是一个函数。

一个是一段数据，我们可对它进行一个强制转换，右键，然后进行一个Ccode，我们也可以用一个快捷键C来把它强进强制的转换成为代码。好，就是这一个样子的。按U的话也可以取消，我们按U也就是也可以取消定义。

比fi。好，这是一个转换。那你就可以你饭。は。这是常述返馈位置，就这个地方进去记录下来。好还是否还定配置。啊，这是hello suntract，然后就是LR函数打开地址在这里。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_64.png)

记录一下记录一下啊，做一个怎样的记录。那么后面就来开始进行一个分析。啊，首先是一个全称呃，这个后上的话它是有三个参数的。刚才就已经说了，前两个的话是一个JIENV还有1个Jop的参数。

那么第三个参数就是我们传递进去的的一个100。那么根据一个。呃，根据一个呃ATPC的一个规则的话，那么前四个参是会使用1个20到R3传递的。那么这里这里的参数小于4这3个。

所以它传递的话就会使用1个20到R2计算器来进行一个传递的。我们来看一下。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_66.png)

首先是1个20的存器，那么这个就是对应的1个JIEMV的一个结构。就是在这里好，这是1个JIEMV的一个结构。看不懂没关系，我也看不懂。好。那么第二个的话只是对应着一个JJ的话我们是不能够截量的啊。

这这里也是不能访问的。好，那么第三个参数则是我们传递过去的1个100。哎，看到这里是64，这什么回事啊？这是1个16镜子的1个64。那么对应着十进制就是100了啊，这是第三个参数，看着这三个参数。

对应着一个G英，还有G object，还有次数我们目标的参数1个100。记住了啊，RL2就是一个我们的参数100。也就是十六进制的64。那么下面这一起的框都是默认是十六进制的。因为程序分析的时候。

我们看到的都是十六进制代码，就不特别的转换成16十进制了。我们开始。首先它的第一行是一个push指令。push指令的话，把一个ICLL安放到对栈之中。好，我们这里先来记录一下程序初始化的对栈。

初始化的时候，对象是这个样子的。在这个位置。首先它可以酷取1个R7和LRD对栈之中，这是什么意思呢？这意思就是就是说他现在要保存这两个继存器的值，把这两个继存器的值给放到对接对栈之中。先好。

我们就把部署到入对战之中啊，留意一下它的一个变化。这个时候站点是50的一个位置走。好，这个时候这里就变成了变成了1个48的位置了。然后对应的这里是就是这个就是1个LR，就是把LR的数值给放到对战中去了。

然后上面就是1个L7的一个数值。嗯，好。这一个时候获许过后，它对这的站点变成这个位置，记录一记录一下。哎，大家在这里可以看得到啊，我说到上面哎上面的这一块叫做站定。我们站对象增加的时候。

它内存的地址反而减少了，哎，对不对？原来还是50的，但是我们哎说它对账增加以后反而变成了48变少了，是怎么回事啊？因这是正常的。因为对账的话，它是反而过来算的地址越低的地方。

那么它对账对应的一个数值的话就是越大。也就是说对账的地址越低，证明它对账的数据量就是越大的一个意思了。如果说是对账被用完的话，那么这里就可以变成零了好，往往上跑往越往上跑越小，这就是一个对栈的数据。

那么对象在它在分配空间的时候的话，就可以继续往上来继续分配。然后释放释放空间的时候就可以往下来进行一个释放。比如说当下当点。现在当显是这一个地方，如果它释放的时候就可以加8。

然后把这一个站点给移到50这里。那么我们在找找数据的时候，上面的这一块数据据都会动了会必被丢弃掉了，这就是一个对账的一个作用，它和普通的一个对账的一个概念是一模一样的。

也可以把它理解为一个呃理解理解为一个弹簧嘛，对吧？因为那虽然是不怎么好的一个呃例子。这就是一个对的。啊，它也是一个先入先出的一个表，先入先先出的一个队列。好，那么这是一个呃对照好。

这照例接的话就是保存了1个RGLR值。对是保持R7啊耳值。暴跌新风。我们接着往下来进行引跑。那么它下一距的话是一个上SP，然后就是1个0叉182值。这一个意思就是1个SP等于SP减去某一个数字。

我们这里已经知道了SP的话就是指向一个堆栈站顶了。那么这就是什么意思啊？这是为对栈来分配0叉18的一个空间。我们注意一下对栈的位置。好，这是这个时候站点是这个样子，跑过去唉，站点就变成一个这个样子了。

好。这个时候站点已经变成这个样子了。好，看一下它越小地方也对应整一个站的一个数据越量越大。那么这一段到这一段位置，这里大概有1个0叉18的一个数据段。哎，从48解下来就是1个18了。

有1个0叉18的一个数据段。那么这里就是我们称为一个对空间的一个数据。这一段堆空间的话就是让程序用来存放一个临时变量的。对吧这里是18，然后对应着我们分配了一个对单固件，以后，是这里分配了一个对单空间。

对空间。用来存放。零食变量。那么后面的话可以看看到它把一些临时的一个变量值都可以放到这一个这里的一段数据空间的。好，我们继续往下跑，这次分配来对一下空间。嗯，创建的还。对为空间。我们再往下跑一个呃。

这是一个把SP2值给放在RRT中。R7等于RRT等于SP加0，也就是一个R7等于SP了。呃，这这个写法也是非常常见的。那么这里它把阿7给变成1个SP以后的话，后面就能够根据阿7的内容。

也就是一个站点的值来进行对一个对账的一个空间的，进行一个寻值。对吧？那么这里就是把一个R0的数据，也就是我们的第一个参数，一个JRENV的一个参数的一个值给放到这个对栈空间中去。

这个对这空间就是对应的站点，然后加加上加18加VR4，也就是18解4解析的一个值。也就是对应着一个C的一个值了。好，我们对应着也就是这一个位置，把把它的一个变量，把第一个变量给存放到这个这里中去。好。

为了方便，我们就把它给弄开了。比如说哎30对应在这里，然后三是对对对着这个点，38这个点，然后40是这个点，我们把它呃给弄开。好，这里是1个34112345号，12345号。

这里呢4个点都分别的对应着一个呃。对的这里的一个位置，我们就来慢慢的看。首先是1个VRC的一个值，也就是一个对应着山西的这里的地方。对在三线这个地方好，第三个点好像这里就把一个阿里。

也就是第一个参数把它放到这里。哦存放进一个参数。这里第一个参数是一个MV。我们看一下，好下去。已经改变了。那么接着它把R一存放到这里，VS的话就是减0叉10了。那么18减10就是减8。

那么寻子就是1个30加8，也就是38，就应在这里看到了吧？它选址的话就可以。因为它对这小的地方是作为大框那它取直的时候就可以使用一个加法来进行一个寻择了。好，这里它就把一个R一放到这一个地方。走。

也就是啊已经对应的改变了。注意一下它的1个21，2楼一的话就是第二个参数。第二个参数是一个oppo9的指针。好，然后第三个参数VR14，也就是对应着一个呃减14。那么18减14等于4的话。

那么它选子寻值就是30加4，对应在这里存放第三个参数。可能。嗯，好。三个参数。这这是一个一定的新参数，它定的实践内容我们还不知道，这是存放第三个参数的一个。临时变量的地方，哎。

这里就是一个临时变量的区域了。好，可以看到这里它是使用了使用了这样3块空间来存放了我们的一个参数的一个临时变量。这是非常常见的一个内容。

那么如果这里如果这里我们已经把临时变量的一个实际的一个代表的一个呃值给已经了充了解的到的话，我们就可以把相应应的地方进行一个重命名了。再选中我们的临时变量哎。右键，然后进行一个重命名。

重命名的话就用一个基本上的那个N的一个快捷键，就也就是这样一个快捷键。进行一个聪命名。V压器的话就是对于你个EV的一个离子变量。好，那么这里下一个就是一个off的一个词针。

最下面一个是一个in型的一个值，就是就是我们从呃传递过来的一个参数。我们命名随便命命一个为你说我命命名为bs。好，那么这里就是一个呃存放。呃，参数到临时电量中。那么下面想要寻择的时候。

我们就可以直接的从这里给调用到我们的参数了。啊，就是呃还是种比较常见的一种写法。好，我们继续往下来跑。这个时候呢它就对LDR对L2呢取出了一个地址的一个值。

就是取消了这样一个gl of set table的月子。然后把它和当前的1个PC进行了一个相加。哎，就是这是怎么回事啊？这实际上是一个纯定位的一个操作。好。

这个句的意思就是把一个gbal of table的一个偏移地址给加载到22中，记得再把22加上当前P7的一个值来完成一个重定位。这个重定位是什么意思？我再来解释一下再来解释一下呃，比如说一个文件啊。

一个文件好，它有00，然后是假如我们它呀我们找一个文件的地偏移为一个呃。

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_68.png)

1110的位置的一个地方，我们要找到这一个地方。那么在文件加载到内存中的时候，我们怎要进行一个地位呢。比如说。比如说这一个程序，它当前已经加载到1个50500的1个位置了。

那么我们要找到它偏名为120的位置，也就是说这一个时候它目标的内存位置应该是620了。那么我们要寻找的方法是怎么办？我那么这个时候我们就应该先找到1120的位置。就是一个偏移，然后再加上整一个程序。

它加载到内存中的位置，也就是500，这样加起来哎就能够定位到它在内存中的一个位置了。那么再一个例子，比如说它这个时候它不是500呢，它加载到1200的一个位置。那么对应着我们相应的内存应该是1120。

对不对？啊，那么寻址方法也是一样的，先找到120，然后加上它在内存中的一个偏移1000，就能够找到我们的一个在内存中的一个值了。好，那么这里就是一个RM配片代码中非常常用的一个重定位的操作。

加上当前PC的值，用一个我们对应的目标的偏移位置，偏移地址的一个变量，加上当前PC的值哎来完成一个重定位。我们来一步一步的看下去，慢慢看啊，注意一下这一句一定要往慢看一定要往慢看。

首先啊是对22找给拿出来它的一个偏移地址。走好这个时候的22是1个30C2。这里要缩慢一点，这个这里也可能会有一个坑，让大家理解不了的哈。这个这里的22是1个3042值。这是一个配地址。

也就是这里的一个group for global of table一个的一个配置地址。然后把22和PC相加好，22是多少？22是3072，然后PC搭起来PC也就是一个呃756AAA812。

就就是这一个值了。两个字相交。帕值等于多少？我们来计算一下。加上。756A8F12好，加起来等于1个FD4。好，那么相架结果应该这个样子，我们来跑一下，看一下什么结果。哎，那我们看一下，哎。

发发现错了发现错了，它放了二的值，计计算出来是这个样子的，这张子起来是这个样子的。这是一个呃75。6ABFD8这是怎么回事啊？我我们算起来的结果不一样了，我靠，是不是我们的算法出现问题了。

还是整一个产线出现了问题了？哎，其实其实这是没错的是没错的。那是因为我们有一个概念，我我要给那里先给大家来说一下，有有一个概念我们给弄混了。有个概念我们给弄回来，实际上下面的这一条算式是错的。

我们这里后面不应该加1个F12，这里应该应该加1个F16。这也是错的。好，我们我们正正确算是应该这个样子的。16，然后等于1个SD8，这里是一个长期执行使用的流程。算法。

然后上面的话是我们分析时候的算法，实际上它是按照这一句来进行一个执行了，这什么会这什么意思啊，是什么意思？实际上在一个M级或者说创级都好。它在整个程序在进行一个预习的时候，它是是分为三步的。

也就是说它PC指针。分三个流程。来执行命令。就是一个曲子。呃，茄子。然后呃。取子分析运行吧。呃，登记代码然后是一个运行，大概是分为这三个步。那么它运行的时候就是分为一个三个流程了。他他分析。

那么他正式运行的时候是会分成这样一个三步来运行。对应着就是一个呃可以理解为是一个三线程的一个云线型了。好，我这里再来把它库存一下。好，等于它完成一个指令的一个解析的话，它就会分成这三步。

现在取消对应的地址，然后分析这个地址是什么哦。接着最后才是把对应的把这个地址进行一个执行。那么问题就来了，由于他分成三步，他不可能一次就做三步，然后再再那他不可能先完成这三步，然后再取消一条指令。

再完成三步，对不对？为了让整个程序能够运行的更加快。那么这三步是同时去进行一个执行的。哎，问题就来了，他如果是同时去执行的话，他就。嗯，不能够保持正确性，对不对？

这个时候它就分成了三个进程来进行三个进进程来同时去实行。也，就是说他真实实事行的时候是这个样子的哈。这这这就是它的一个呃三个流程的一个执行了。这里就对应着这里设定。对应指来说，这里就是第一个和指令。

这也是第二个指令，这里是第三个指令。当比如说哎一开始PC是在这一个这一个地方的时候，它就可以完成了第一个指令的一个取值。好，到下一步了，下一步PC就过来了，它就可以完成对第一个指令的一个分析。

以及对第二个指令指令的一个取子。这这也是同时进行了。然后到下一步，它才会运行第一个指令，然后完成第对第二个指令的分析。这个是就对同时对第三个指令完成一个取子的内容。好呃，这样说可能比较抽象。

我们就来切到这个地方。好，这里它在运行的，它正在运行我们这一条指令，对不对？就对应着啊这里。那么这个时候这个时候它正在运行我们的这条指令。那么实际上哎实际上实际上当前P线指针已经到这一个地方了。好。

停下。啊那他当前比如说这里当前它已经在运行了我们这条指令，就对应着下里，它在运行我们这条指令。但实际上啊当前PC呢就已经在呃在这里这个位置了。也就是它目前的PC它虽然在运行第一条指令。

但实际上它已经在完，同时呢完成对第三个指令的一个曲值。也就是说哎虽然我们看着它在运行这条指令，实际上PC的指针已经指向这个地方来对这一个地址就是一个曲值了。所以它PC的内容。

它实际指向应该是它的下两条指令的。哎，对不对？也就是说他我们在运行这条指令的时候，他已经在对这条指令完成一个曲子，对这条指令完成一个分析的一个内容了。所以我们从定位要加的时候。

应该是加他下两个下两条指令指定的一个地址，也就是这个地址才行。这就是一个曲子的一个呃内容。嗯，可能可能有有点绕，那么下面的话自己再理解理解。总之，那么大家都就来理解一下，当遇到这种艾PC的时候。

加它都是加叉下两条指令的一个数值了。这是有它一个取势分析，和解码运行的一个流程来进行一个确定的。这是他他他在执行的一个三步走。好呃，那么这里就是完成了的一个重定位。

把L2给重定位到一个group of set table的一个位置就算了。这是22值指向一个下pro。这是一个重电位。好，那么下面就是把R3给赋予了一个零的值。

然后把它给存放到一个临时变量VR8的一个值中。好，那么这里这样写法很明显就是一个呃我们要尝序给初始化了一个为零的一个临时变量了。走下去吧。好，电影小VR8也就是等于。VR8也就是-8。

那么简加加减减的话啊，可可以发现它对应的这一个这一个位置，把它呃存放一个临时变量为零的一个值进去。好，只放点4片量。嗯。好，这里我就先来进行一个重命名了，因为我已经知道它是什么意思了，它它就是一个I了。

因为相当于还有一个循环，会有一个循环，它就用到这样一个I来进行一个累加，这是一个临时变量的一个值，它全放围到这里。那们去走。接着它还是一个呃重新的一个定位。

他先来取到一个low base的一个一个偏移的值。然后在我们的gbal of set table，也就是上面从重电箱以后的一个地址之中，取到了我们这里的low base的一个。这有主啥。们走下去啊。

它取的就是R2加R3的一个地址的的一个内容。走。好，这个这点时候2猜等于这个意思。那么这个是不这就是low base low base的一个值呢？哎，不是，这里是一个low base的值针。

然后它它值的大大小在这里，然后它指向的内容呢才是我们这个low base的一个值，也就是1个32。这是一个紫箱啊。好。取出。想。那么实际上哎这里的真实的一个路背的话。

应该会等于对23的一个内容的一个值进行一个取出来才行。对也就是取出1个2L3的内容的一个值了。还是把它这里的指向，把这个地址指向的内容给取出来，把方项取出来，放到2L3之中。好。

那么这里就取出来一个loader base，你要把它存放到这里的临时变量之中，也就是这里的临时变量，我们存放进去。好，这这里带 base的话是一个全局变量。好。

那么这里就是整个函数所用到一些对账的一个信息。下面就是一系列的一个循环了。好，下面就是一个大循环，先是一个跳转，无条件跳转。里眯一下。首先是一个无条件的的一个跳转。

接着哎从我们的一个临时变量之中取出来的一个low base的一个值放到2A中去，然后加上还要再把我们的贝，也就是我们的那我们的一个参数，我们的参数。给取出来放到二楼3中去，对两个可进行一个比较。好。

比较其看看，这是一个比较。如果我们的一个漏变值比这里比这里小的话，就可以继续完成一个循环，进行一个跳转。接着就把我们的一个值的一个L给加出来好，这其实是一个上的一个作用啊。

把我们的一个临时变量中的一个some给取出来，接着把一个都被取出来，相加。好，把它的结果相加放到23中去，然后把相加以后的结果给更新到some。对，但是他送不出去。然后取出一个露贝进行一个加一。好。

然后再放进去，这是一个自加。好，这是一个露贝的一个自加。然后上面是一个上面的要垒加。加上当前再加上当前的那个露背。好，那么下面又是一段循环。帮。当我们的loice嗯，当我们的一个呃。小于倍32。

都会进入到这个循环中去。那么其实这是一个最为简单的一个循环的累加算法啊，它的实际内容就是对一个s哎来完成一个累加。首先把一个s给初始化为0。然后在一个循环过程中，就是当一个漏贝小于倍的时候。

都会对some加上当前的漏贝，然后这个循环结束的时候，就会把一个漏贝进行一个自加。然后当low贝自加到大于一个被子的时候的话就会退出这一个循环了。那么这里就是一个循环。好。

慢慢慢跑下去也会发现它是一个循环，对不对？然后这里的值的话就可以不断的更新一个临时变样的一个内容。好，不用更新。好，这是一个s好，不用更新。好，这是一个循环内容。我们跳出到我们跳出这一个循环棒。好。

我们我已经把一个句化的结果给跳出出来了。我接道。它就取到我们刚才这个循环中所运算所得出来的一个上面的一个值，它取出来。取来放到20中去，接着要用下一个函数，这是什么意思啊？

这里就是给这一个函数给传递一个参数，通过220啊进行个传递。哎，还记得我们刚才说过了一个啊ATATPC的规个规则，对不对？它就把这个函数通过220来进行一个传递。好。我们现在就暂时不跟进去。

我们把上面的啊循环的结果。发送里面去放到220中去，然后传新过去。好，你要这个函数返回的时候，一般都是通过1个20来进行返回的。这个函数返回累加的结果就放到220中去。就是这明它取出函数返回结果。

上面的话就是一个呃。传递。20也就是一个some的一个作业参数。好，我们慢慢走下去，插取出函数反应的结果。我现在是一个碰杀作，不管接着把它的结果放到阿里中去。放到阿里中去。

就是因为在这个程序它快要退出了，他就怕把它返回结果存放到阿里中去。好让我们以后函数知道哎，我这个函数它就反回到这一个结果了。好。そ。接着就有一个对着R7进行一个嘉陵叉18。呃。

大家是否还记得当前的R7的框应该等于一个对这样的一个占点了。我们把这几句给考下来。和这几句来对对照的进行一个看一下，进行一个分析。好，呃，这里是程序进入的时候，所对对这样进行一个操作的一个运行的运算。

就是程序退出的时候所做的一个运算。啊，那么重量高是一个程序运送的一个内容。我们来看一下啊，我们来看一下，可以发现它实际上这这几棋这个内容啊是一行一行的进行一个对应的。好，首先是一个对L7进行一个相交。

加上18唉以后把1个L7的值给放到对栈中去。那么这一句的意思就是释放一个对栈的空间，释放0叉18的空间。那么这句就是把对栈的一个内容给还原到L7PC上去了。好，我们慢慢跑啊，慢慢跑。那是三家。

然后一个还原对战，四方对战。然后到这一句了，把对账内容，也就也就是把对账中哎，这两个内容给放到L7和PC上去。哎，上面的这个值好，看一下是1个348。你对应着这里，哎。

这里刚其是恰好是刚才用来转放L7的一个位置的一个词了，把这个词给还原到L7中去。好，那么可以看到了这里上面用来保存的时候，就是为了用来保存pro机计成价值。那么后面的框进行一个还原。退城市退去的时候。

接着好。这个下面的一个4C。4是用来保存1个L8访核地址的。那么后面哎后面这里就是把CCC这样一个返回地址给拷到1个PC中去。这里去执行以后的话，就可以改变当前PC的值。

把一个PC的指针指向一个返回地址。好，那么这个时候整一个程序就会退出这个函数的执行了。我们走。对，这个时候这经发现它整一个函数完成那一个跳转。那么当前PC的指针也已经指向它返回地址了。

而就是我们刚开所记录的这个地址，已经指向这个地址完成了一个返回了。对吧对吧？完成一个返。嗯，那么这里就是程序用来退出的时候，所要执行的一个操作。可以看一下它函数进入的时候，和函数退出的时候。

它操作是一一对应的，这里分配这么多空间的话，那么后面就要释放多少空间。那么前面保存了多少计算器，后面也要释放多少集选器。那么LR和PC41是对应的L24返回地址。

前面把返回地址给 push取到一个对象中去了。那么后面自然而然的就需要把一个啊它返回地址给放到PC中去来改变程序执行的一个地方。好。就是整一套函数的记录，还要退出，然后注意留意一下。

函数退出时候所有对账哎变成50了，变成50了。好，因为它等明它。对应在这里唉。sね。会发现了。整一个函数过程中，从50到50，函数刚开始进入的时候是50，运行过程中甚至到了330了。

那个等它退出的时候还是回到50，这什么意思啊？证明整个函数的进入，还有退出整一个函数。第二个时候是并不会影响它对栈的一个值了。这也是我们所说的一个堆栈平衡原理。函数的执行。

它进入和退出肯定是要保证它的对栈是相同的。如果不同会发生什么事啊，就会导致它后面的一些函数。哎，他发现它保持这么多的一个对账变量，发现它居然由于某一个函数给破坏了对账，导致它这些变量不能够存取了。哎。

那么这一个时机搜稿整一个程序很有可能会造成一个异常，就造成一个退出。你这是都是很有可能了，这就是我要说的一个函数平衡的一个原理。也就是也就是对应一构这样一幅图，函数进入前呃，分配了多少对推换空间。

那么退出的时候也要释放多少个空间。啊，这是是函数调的原理，它后面如果它甚至还要指函数调，比如说定到一个分水机，然后再进入。然后这里哎它还是一样，要保证一个对账的一个平衡的。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_70.png)

![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_71.png)

好，我们这里再来跑一遍。啊，我们再来再来跑一下。早起。大就几个分析。好，我们刚才没有进入到这个函数中去，对不对？我们这里就进入到这个函数中去进行一个分析，进录一下当前的函数的。的呃山山底是这一个地方。

这是330。这是第一个函数所要所占用的一个位置啊。第一个函数。占用的对账空间。那么下面上面就是一个反回地子所占用的一个好。返回的函数。再用下这的暂顶，我们慢慢跑。

我们进入到这一个函数中去对它进行一个分析。行用好，在这个函数相对来说比较短。好，我们来看一下，我们来看一下它比较短，它也是一样，先把L7LR值给给临时保存了。好，那么这个时候它对象占领是一个证明。

继续跑，然后分配0叉8的一个空间。好，这里是它分配了一些空间。慢慢跑慢慢跑下去，他就把我们的一个啊第一个参数的一个定导值，也就也就是刚才传递进来的的一个上值。你看到这里。它这个还是比较简单啊。

只有一个零食面料给放到这里。熟下去把色儿字进行一个提取，然后哎它就用来调下一个函数了。下一个函数是怎么不管，我们这些路过和它把它反回结果放到阿0中去。好耳增脆。

接着把阿尔加寄存器的一个低的一个位数给赋予一个呃。呃，5B25，我们留意一下253的变化，它的一个低位啊22它的低位就是最下面的几个字节就变成了5B25。接着就乘了完成一个乘法，这是一个呃乘法。

就是等于1个L3乘以L2的一个结果monip。然后只把结果放到23就去。呃，这里的注意一下，这个乘法的话是使用23的第四位和22第第四位来进行一个相乘的。那么这样他们相乘的结果基本会超出一个8位。

于是他就能够把他的结果给放到这个23中去了，这是一个惩罚。好，是1个L3。等于它的一个反馈结果。呃，我们再讲述他的一个保的结果是呃嗯嗯。等看一下结果，我们展示出来就是1个IT了。

这样就乘以1个0叉5B25。我盛上去。好，把乘出来得到的结果放到L0中去作为一个执行器来返回。那么下面就是一个释放对账空间的一个操作。好，释放对账。好，还原到这里，然后返回好，就反回到这个地方。哎。

就是这里这里就是一套函数流程的反回了。这里就是一个第二个函数单的对栈。看一下啊，这里地个函数它一样，要对一个对账进行一个操作，但它返回它退出的时候，肯定还是会保证一个站点是不变的。

还是它进入时候的330。那其实这里。好，我们跑，我们再来看一下第三个函数啊，因为它下面还有还有一个函数调，对不对？我们再来看一下它第三个函数。挤进去。还是一部先对R7进行一个呃push一个保存。

接着呃当前的站点当下站点是1个2020好，然后把1个27进行一个复置操作，放到这一个位置。然后哎然后分配0叉C大小的那个空间。好。那么这里就是几个第三个函数的一个站点了。好嗯，好好好。

这里首先首先把我们传递过去的一个值，一个值放到一个离时变量中，放到VR8的一个变量中。个是我们直放的的一个临时变量走，然后取出我们的临时变量的值进行一个右左移。左移这么多位置好。

然后把左移的结果放到L额中去。然后进行一个相加，然后再进行一个就移好。以后把它结果这照这样一系运算。好，最后还是一样要恢复一个对账空间。好好了，对，可以恢布一个对加空间，然后L加调2机。进行结果哎。

进行一个返回。好，那么这里又是一个一套的一个函数调样的流程。我们来看一下它返回的一个对账，返回时候，对账内容还是这个样子的。那，这就是所谓的一个对账平原理。还做调用，还有退出，并不会影响自终的一个对账。

它必须保证一个对账的值是相等的是相等的。我们用这个图就能够看清楚了。首先是一个函数一的一个调。好。还注意他分配了这么多空间。本来是这样的，它调的时候，分配空间就对到这里。那么这一块的内存的话。

这一块对象空间，这个是对大的。那么这一块空间我们就称为一个函数寓意的一个堆空间。那么它可以用一个堆的空间来进行一个数据的一史这样的一个存放。接着它在函数一中调到函数二。

函数二它又调它又分配了一系列对象空间，就把一个占点往上给移到这个位置，吧上移到这个位置。好，那么这一块内容就成为一个函数二的一个堆空间。函数2它又调用到一个函数3，哎，那么它的占领又往上移。

为一个分子商来调用到一个来分配一个空间。那么这里这一块就像要函数三的一个低空间。它可以用这一这一块空间来存放它的临时变量。然后它整个函数差退出的时候，它就要释放一个空间。好，释放的时候就把它的这块。

它属于它自己的这块空间给释放掉。好，那么就回到这里，函数退出的时候又释放掉，哎，放到这里，那么函数一退出的时候又释放掉，哎，那么就放到这里了。好，那么这就是一个函数对账的对段对账的一个平衡。嗯。

不并不会影响整一个对账，也就是说函数调不会影响一个对账的一个空间的一个使用。这是一个啊对照平台的一个原理。呃，可能理解起来有点难。那么下面请大家去去自己去进行一个调一下来理解一解。

这是呃对价平衡的一个原理。那么假如说它对账是不平衡的时候，会怎么办？哎，比如说它正常的时候，它对账是1个320，对不对？我们人为的手动的去修改一下它对栈。比如说我们假设它这一个函数它返回的时候，哎。

把它的对账给修改了，本来应该返回返回到320的，它返回到324会发生什么事啊，我们修改一下这个对账的值。好啊，这个时候我们的对账就已经被破坏，被人才被破坏了。好，我们假设一个对象被破坏的时候。

还会发生一个什么样的情况？我们来一步一步往下走。哎，留意一下啊，这里就还原了，把这个值哎放到L7中去，然后这个值给放到1个PC中去。你留意一下啊，这一个时候的对象已经被破坏掉了啊，没还没有被破坏。

它这里用1个R器来进行一个还原了，用1个R器来进行一个还原了。呃，它的它的一个还原就导致了我们刚才刚才所对对象所做的一个修改是失效的。我们来看一下，哎，这才反回了，这相当于它的一个保护的一个措施了。

也就是说我们的函数。哎，假如呃假如说它反反回要对象并不正确的话。他也不会实际的影响我们的一个排出的一个行为。因为它有有一个保护，也也就是这样1个L7的保护了。唉，这也是为什么哎，我们在弹出头。

他刚进入的时候，先要把我们的对战而值给放到L7中去，然后寻死都用L7，而不是直接直接的用A个SP，就是为了用来保护我们的对账空间。好，这我们我们所欠我们偏要进行一个修改，进行一个破解，进行一个破坏。

我们就把二切的值进行一个修改。嗯，我赶好赶到来到了1个34。哎，这个时候它函数对对账保护就失败了。好，还有时候哎发现整一个对账错了。那个时候他还原的时候，把应该返回的一个对账地址放到了这里。

然后这里就是一个。这里这里反它就变成那一个返回地址了，我们走过去看一下会发生什么事。厂序就发生了一个异常，发生了一个退出了。好，哎，整个程序序列报出了一个错误。整一个程序去发现了一个错误哎。直接包错了。

那整个程序在跑起来的时候就可以异常退出了。这就是整一个对账的一个行为。包括它的一个对账保护，还有对账的一个呃临时分配，还有一个空间。这就是呃对账的一个相关的一些几节内容。呃。

那么这节课呃以上的话就是这一节课中大致的一个呃内容了。啊，可以看到的话，我要讲解的内容都是比较琐碎的一个东西。嗯，然后这些相关的一些概念的话和windows上是比较类似的。

或者说就是window上的一个概念的。遇上调试也是这种概念，虽然它琐碎，但是它的确很重要。后面的一个分析，还有一个调试的话和这些概念都是相通的，会被经常的用得到。

所以这些概念对于这一节课话一定要好好的去进行一个理解才行啊。啊，那我希我希望大家在下面的快要好好的跟着课程来走一遍，走一遍流程来完成一个分析吧。好，那么这节课练容的话就到此为止了，谢谢大家。



![](img/dfd3e2abf134b8f4fe4f9b057fe8803e_73.png)