# P68：第37天：权限提升-Windows提权信息收集、内核漏洞提权 - 网络安全就业推荐 - BV1Zu411s79i

呃大家晚上，然后大家能听到我声音的，以及没有杂音的话，大家在讨论区扣个一好吧，而其他同学呢，我就两位同学吗，其他同学呢能能听到吗，听到的话在讨论区扣个一好吧，这里17个人是，有在吗。

啊应该应该是都能听得到，嗯啊应该是都能听得到，那么呃其他不多说了，我们正式开始我们今天的一个课程内容好，今天的话主要给大家介绍的是，windows的一个系统提权。

然后我们本节课的话主要的话就是给大家介绍，就围绕windows系统下面的一个提前，给大家做一个介绍，主要的话分为了这四块的内容，第一块第一块的话就是权限提升的一个概述。

第二块是windows提权信息的一个收集，第三关的话是针对windows系统下面的内核漏洞的，一个提前的一个方法，以及相关的一些技巧，第四个的话就是windows系统服务漏洞的一个利用。

呃首先的话我们先来了解一下什么是权限提升，也就是对他的一个概述啊，权限提升的话，我这边用这样子的一句话做了一个概括，就是呃比较笼统吧，应该这样的话呃，就是大概是这样子的一个意思啊。

就是呃攻击者通过安全漏洞，把获取到的这种受限制的一个低权限，用户突破限制，然后的话提前至高权限的一个管理员用户，从而获得对整个系统的一个控制权，就是我们这边的一个权限提升的话，就到权限提升这一步。

这一步的步骤的话，我们前面的话有一个前提，就是你需要有相应的一个啊，就已经得到了目标系统的某一个权限，就是说这个权限是什么呢，这是什么样子的一个意思呢，就是说比如说我们前面对吧，有介绍寻找各种这种啊。

web服务器的一个突破口对吧，或者说相应的这样子的一些服务器的一个漏洞，通过这样子的一些漏洞来去得到一个web share是吧，那么这个web share的话也就是你的一个呃用户权限，一般的话。

你得到了这个web，需要像呃我们的一个阿帕奇对吧，那么就是有这样子的一个阿帕奇，阿帕奇的这样子的一个用户权限对吧，以及的话还有就是这种3w，当然的话呃如果还有的话，就是你通过搜狗输入对吧。

得到了一个sc share，那么你得到的话就是一个像这样子的一个mysql，这样子的一个cl server的这样子的一个权限啊，那么这样子的一个权限的话，它其实它的一个权限是比较低的。

也就是我们这边所说的所说的一个，低权限的一个用户，然而这些低权限用户，他再去对我们的一个目标系统，去进行相应的一个操作，这时候的话它会有相应的一个限制对吧，像比如说你要去访问一个目录。

你要去访问啊root这种目录下面，或者说其他用户的这样子的一个加入的话，你是没有权限去进行一个访问的，以及呃就是你想要去执行一个程序对吧，你也需要有相对应的一个权限，你才能够进行一个执行。

那么我们提前的话就是说它的一个目的，就是突破这样子的一个限制来去得到啊，系统的一个管理员的一个权限，然后的话能够去控制它的一个系统好啊，我这边的话以这样子的一个方式啊，表达了这样子的一个意思啊。

就是windows系统下面的话，就是通过user这样子的一个普通用户对吧，我们把它提前到我们的一个administrator，也就是我们的一个管理用户对吧，好的话，我们得到了这样子的一个管理员。

用户的话，其实这样子的一个administrate这个用户，他不是我们系统的一个啊，最高的一个权限的一个用户呃，admire的话，它还有像啊system这样子的一个，就是这样子的一个系统用户。

然而系统用户的话，他对他对你windows系统的话，它的一个操作权限的话比admin的话要大很多，就是他能够去啊操作windows系统下面的一些比较，就是比较底层的这样子的一些文件，以及一些操作。

然后a linux系统下面的话就是从我们的一个user，一个普通用户，然后提前到我们的一个root用户是吧，就我们都知道linux系统下面的话，它的一个呃root用户的话，它是它的。

它是系统的一个最高权限，我们得到root用户的话，我们就能够去超去对整个系统，整个服务器去做啊，任意的一个操作对吧，然后第二个的话就是提成类别，这边的话给大家介绍一下啊。

我这边的话同样的就是分为了这样子的啊，做了一个基本的一个分类，首先第一话就是本地提权，就本地提取的话，就是在一个低权限的一个用户下，我们通过一些条件来去直接提升到系统的一个，最高权限。

然后这边的话注意的话是有一些条件，这些条件的话就是我们的这样子的一个呃系统，它是有相对应的应用程序的一个漏洞，以及对应的一个系统漏洞，我们通过这样子的一些漏洞，我们才能够去进行这样子的一个提前操作。

来得到它的一个高权限用户，然后第二个的话就是远程提权，远程提权的话就是从字面意思我们也知道对吧，就是通过漏洞应用程序，然后直接获取远程服务器的一个权限，其实在这边的话我们去进行这样的一个提前。

你会发现的话，就是说我们要去进行这样的一个操作，我们都是要需要去利用相对应的这样子的，一些漏洞对吧，就包括应用程序，还有系统漏洞，也就是说你要去提权的话，你首先要明确的一点。

就是你的这个系统你要有相应的一个漏洞，你要有相应的能够去进行一个提前的一个漏洞，你才能够说有机会去进行一个提前，以及在这边的话要强调这一点的话，就是你提前，不是说你你想提前就能够提前的是吧。

你首先要去啊知道，或者说你首先要能够去确定这个系统，是能够去进行一个提前的，当然的话啊，如果说你有知道，我们或者说大家都不知道这样不知道的，这样子的一些漏洞是吧，就比如说年代。

那么你去这个的话就呃就另当别论对吧，好像一般的话像我们要去进行这样这样子的，一个期权的话，通常的话都是利用，就是啊现有的已经被爆出来的，这样子的一些提权漏洞，是对啊，说到提权的话。

这个东西的话其实相当的复杂，因为你要去你的这样一个权限的一个提升，它是涉及到了你的一个windows系统，或者说linux系统下面的，一些底层的一些运行机制是吧，以及它的一些代码的一些机制。

那么针对这样子的一些漏洞的话，你如果你对他的这样子的一个系统，以及你对它的一个系统的一个底层的话，你不了解的话，你是呃就是很难去发现这样的一个漏洞的，所以说要想去找到，或者说发现这样子的一个漏洞的话。

那么你本身的话就是呃对这些东西的话，就是报的就是相当好，就你能够去发现这样子的一个漏洞的话，那么其实你就已经是一个大佬了，好在这边的话我也就是做了这样子的一个，就是第三个操作系统的一个提前。

然后操作系统提权的话，我们通常的话就是呃，就我们常用的以及常见的对吧，就是windows and linux嘛，当然的话呃mac mac的话，这些还有其他的这样子的一些呃。

呃那些系统的话在这边的话呃不会多那个多数，就呃主要的话就是给大家介绍，就是windows及linux系统下面的啊，啊呃我这边还有列举了这样子的一些，而在后面的话就是我们本期的话。

主要就是对windows下面的啊，这样子的一些提权漏洞做一个介绍，以及我们如何去就是说利用这样子的一些啊，提权漏洞的这样子的一个呃方法，来去进行一个提前，然后呃下后面的话还会给大家介绍。

就是linux系统下面的一个提取好呃，第四个的话就是应用程序提权，应用程序的话，就呃我这边的话有列举这样子的一些像呃sex seven，就my cycle对吧，还有等等的。

其他的其他的这样子的一些应用程序，我们通过他的这样子的一个应用程序来去进行，应用程序的一个漏洞来去进行相应的一个提权，在后面的话会给大家介绍，就是说啊my cycle以及sel server啊。

还有那个poor gucycle的这样子的一些，数据库的这样子的一个应用提取，因为其实我们再去进行相应的一个，就说去对这样子的一些去做渗透测试对吧，或者说你去挖掘这src的时候对吧。

那么你像比如说你的一个sql注入漏洞啊，你sql注入漏洞的话，它是涉及到数据库的对吧，你通过sql注入，你得到了它的一个shell，那么你可以去尝试去尝试去利用这样子的一个，呃数据库的这样子的一个提权。

来去得到更高的一个权限，好第三个的话就是提前条件，提权条件的话，其实前面有啊，有大概的说了对吧，就是首先第一个的话，你需要拥有这样子的一个web需要，就是你需要有一个普通的一个用户权限。

我们的一个齐全的话，就是基于这样子的啊，你拥有的这样子的一个，普通用户的一个权限之上啊，不啊，就是在这一个啊，拥有普通用户权限的一个基础之上，而去进行一个权限的一个提升对吧。

如果说你都没有这样子的一个基本的一个权限，你和就是你怎么去进行一个你选了对吧，因为你根本就操作不了这样子的一个机器，也就是说你啊不可能你凭空的，你就能知道它存在有这样子的一些啊。

可以去利用的一个提权漏洞是吧，而第二个的话就是拥有某些软件或者说服务的，这样子的一个账号密码，就是说通过账号密码的一个方式，提前的话是最简单直接的一个方法是吧，就比如说我的一个windows系统。

我都知道你的一个admin的这样子的一个用户啊，以及它的一个账号密码，那么我就能够直接去得到你的一个对面用户的，一个权限嘛对吧，这个的话应该没有什么疑问，那么我得到这一个你的一个admin用户权限的话。

在后面的话会有相应的一些方法，就我们可以基于你要的面对一个权限，来去进行一个啊get system，也就是得到你的一个system用户的一个，就得到一个system的权限啊。

第三个就是本地或远程服务器上，需要存在一个漏洞，就我们就一般的话对吧，一般的话大家去见一个齐全，其实利用的都是现有的，已经爆出来的这样子的一些期权的一个漏洞，零队的话另当别论。

那么我们就说我们它要去进行一个提前的话，就有这样子的一个前提对吧，我需要我们确定，就是说他的一个服务器上面是存在，能够去进一个提前的一个漏洞的，所以的话我们就是说我们需要去对。

我们的一个目标做相应的这样的一个提前的，一个信息收集，待会的话会有介绍啊，最后的话就是拥有漏洞利用工具代码，这个的话其实跟第三点的话就是啊一样的嘛，对吧，就是你知你知道就是说你知道他已经有的。

已经被爆出来的这样子的一些漏洞，你知道没用嘛，你需要能够去进行一个利用吗，那么去进行一个利用的话，那么你就需要有相应的这样子的一个，应用的一个代码对吧，利用的一个工具。

当然的话就像我们去进行这样的一个操作的话，都是就直接去使用现有的嘛，啊，呃第四个的话就是windows的一些基本的一个，提前思路，其实也不算思路吧，就是啊我这边给大家介绍的这样的一个windows。

提前windows下面提取的相应的啊一些一些点，以及相应的一些方法啊，呃首先第一个的话就是前期的一个信息收集，就其实我们再去做渗透测试对吧，渗透测试以及呃你做这样子的一个测试的话，其实信息收集的话。

一般的都是做，都是第一个要去做的这样子的一个事情对吧，因其实渗透测试的一个本质的话也可以，就啊是哪位大佬说的，就是它的一个本质的话，其实就是信息收集为你的一个信息收集，你收集到的一个信息的话。

就决定了你去做这样子的一个呃，攻击测试的一个呃方向，以及你的一个就是你的一个广度以及宽度对吧，因为你知道的，你你收集到的相应的这样的一些信息，就是说它的一些漏洞信息你越多。

那么你能够去做的一个啊利用的方法，那就更多对吧，以及你能够去得到的一个成果也就更多，然后呃第二个的话就是第二个，第二点已经到，第四点的话就是我们本节课会去有介绍的。

像啊matt price的一个提前以及呃，其实下节课的话会讲，就是，m s f以及cs下面的啊，就是我们利用他的这样子的一个渗透测试框架，里面，它自带的有这样子的一些提升的一个呃模块。

然后我们可以直接去进行一个使用啊，然后的话就是内核漏洞，还有服务漏洞，还有注册表等等的，这样子的一点，就是我们再去向在windows系统下面的话，我们可以去着重的去关注这样子的一些点，来去寻找。

是否存在这样子的一个一些提前的一个漏洞，呃最近讲课讲的有点多啊，嗓子有点不是很很很舒服，有可能啊可能会就是清下喉咙什么的，可能会稍微有点杂音啊，好吧，大家就是不要介意，呃呃讲着讲着突然喉咙就有点卡了。

就卡了的话就呃讲不顺，讲不顺畅，呃下面的话第二部分就是我们的一个windows提权的，一个信息收集，呃，在这边的话，首先第一个的话就是获取一个meta的一个需要，我在这边的话就是以这样子的一个。

对msf的一个作为，作为一个例子，就我们呃就是达到呃，达到前面我们所说的所说到的一个前提，的一个条件，就是我们首先需要有相应的一个效，也就是有相应的一个啊用户权限，对吧啊。

关于关于怎么去得到这样一个shell的话，我这边我就不多说了，就呃前面在讲msf的时候，以及在后面去进行相应的反弹，shell等等的这样子的一些操作已经讲了，讲了很多了对吧。

大家应该都已经就是对这样子的一些基本的，一个操作应该是烂熟于心了是吧，就是大概是这样子的一个过程对吧，然后我们得到一个就是普通用户的一个权限，就在这边的话，主要就是模拟前面得到一个基本的一个权限吧。

就是表达这样的一个意思，当然的话啊就是我们通过web的一个漏洞对吧，得到一个web shell，然后的话我们通过web share，同样的也可以去反弹一个shell，反弹到msf上面去嘛。

以及啊cs也是一样的，呃，呃下面的话就是一些信息收集的一些方法，以及呃脚本工具吧，就其实呃我们去做这样子的一个信息收集的话，其实呃前面在讲那个，在讲内网的一个信息收集的时候对吧。

就已经有介绍相应的这样子的一些命令了是吧，命令以及相应的一些呃，就是在相应的一些语法对吧，然后其实在在这边的话，我就不会去单独的去对某一个命令，去做一个介绍，就就是大体的这样子的一些。

就是说我们如何去使用这样子的一些，像比如说w m i c以及sc这样子的一些windows系统，下面，它内置了这样子的一些服务的一些命，令行的一个程序，来利用它来去进行一个信息收集，及。

相应的通过这样子，在这两个这样子的一个命令程序啊，所编写的这样子的一些呃，自动的一个信息收集的一个脚本，就其实前面的话给大家有介绍对吧，就介绍我们如何去一一的去做一个，就利用对应的这样的一个命令。

去进行一个信息收集，对那么我们知道对应的一些命令，那么我们就可以去把它写成脚本是吧，然后的话自动化的批量的去进行一个，我们想要的一个信息的一个收集，呃这边第一个的话就是这个w m i c。

这个命令行的一个工具，这个工具是啊，windows下面那个管理工具，它是一个命令行，下面去进行一个操作的一个工具，然后它提供了从命令行接口，还有啊p命令，p命令脚本执行系统管理的一个支持。

然后在我们去进行相应的一个信息收集的话啊，经常会去使用到这样子的一个工具，然后我在这边的话，关于这个呃，前面应该有介绍吧，有介绍这个命令吧。



![](img/31590aa228067565953652604271e9be_1.png)

![](img/31590aa228067565953652604271e9be_2.png)

关于这两个命令的话，大家看一下那个预习内容，比如预习内容这边的话其实我都已经贴了，然后关于这样子的打开mc这两个命令的话，前面应该是在有讲当，当然的话就是只是啊针对，就是说我们要去进行某一个信息的。

一个收集的时候对吧，我们可以去使用这样的一个呃工具，然后的话对应的一个命令对吧，然后关于就是完整的这样子的一个工具的，一个使用的话，是没有给大家介绍的，关于这这这些的话呃，我这边也不会去多讲了。

就这些东西的话就是一些命令的一个使用，然后大家想要去了解的话，自己去了解一下，然后基本的一个使用的话，其实我们呃就我们可以直接通过。



![](img/31590aa228067565953652604271e9be_4.png)

大家都是windows系统嘛对吧，你可以直接通过当年m i c，然后的话去查看他的一个帮助信息嘛对吧，然后再向在windows下面你去执行的话呃，就是你每一个选项是吧，每一个开关它都是中文的。

有解释嘛对吧，都能够去大概的知道它的相关的一些用法，然后像比如说我这边的话，举一个例子，有点看，就比如说这个就是用户账户的一个管理对吧，用户账户的话应该也是我们。

应该也是我们经常会去用到的这样的一个东西，啊，对吧好，我们输入w m i c，然后的话接我们的一个user count，也就是在这边的这个有用户账户的一个管理啊，我们可以通过这个工具来去查看啊。

当前系统下面的所有的一个用户账户，以及呃，我们可以它还有就是说它的这样子的一个开关，后面的话它还有相应的一些选项啊，这些选项的话，就是像比如说我们可以去做一些设置，以及我们可以去得到它。

就是嗯我们想要的一个信息，就一般的话我们要去做一个信息收集的话，会去使用到像list就是列出呃，就是列出它的一个详细的一个信息嘛，然后list下面的话，它还有就是相应的一些开关选项，像比如说。

嗯full的话就是显示所有的那个东西吗，还有的话就常用的话，就这个brief，然后的话beef的话，就是它显示的就是一些简洁的一个信息嘛，就是它只显示了像你的一个账号的一个类型，以及你的就是域名啊。

sd啊，还有你的一个全名以及名字对吧，就是显示了这样的一些信息，然后这些信息的话我们就不像在这边的话呃，看的太太太多了对吧，就这边的话就有针对性一些。



![](img/31590aa228067565953652604271e9be_6.png)

然后的话简洁一点，然后他还有其他的这样子的一些，就是你可以去啊自己去进行一个尝试吧。

![](img/31590aa228067565953652604271e9be_8.png)

其实使用的话大家自己去尝试之后的话，应该是没有问题的，然而这边的话，文章这边的话有就是有就是有很全的，很详细的一个信息，以及还有这里的就是微软的，它的一个官方的一个文档，对面没有中文的。

大家可以翻译一下啊，然后只要你能看得懂就可以了嘛，对吧啊，其实实际的话其实也不用看这些东西啊，你就是你要用的话，你直接去就是去看他的一个帮助信息嘛对吧，就是斜杠问号来查看它的一个选项的。

一个详细的一个帮助信息，好，下面的话就是呃介绍一个利用这个w mc这一个，命令行的一个信息提取的一个脚本，就是这个答案，你mm s info。b t这样子这个批处理的一个脚本，那个脚本的话其实。



![](img/31590aa228067565953652604271e9be_10.png)

![](img/31590aa228067565953652604271e9be_11.png)

呃这个。

![](img/31590aa228067565953652604271e9be_13.png)

就是这样子的一个脚本，这个脚本的话，其实我们看它的一个内容，其实就是他啊，其实在这边他也有经列出来了，呃，这个应该这个我忘了是脚本里面有的，还是我自己加的，应该是脚本里面有的吧。

然后这边的话是它的一个下载的一个例子，然后大家也可以去那个github上面应该是也有的，然而其实他这边的话他也列出来了，他这个脚本它所收集的一些信息啊，像比如说进程服务，用户账号。

对用户组网络接口啊啊还有操作系统，还有你系统里面安装的软件列表，以及启动运行的一个程序，然后其实它的一个命令的话，他都是使用的这样子的一个w m i c的，这样子的一个命令行对吧。

然后的话接对应的这样子的一些选项，像比如说我们以这个就是呃，刚刚说的这个用户账号为例对吧，可以看到它是啊w m m i c u在看着，然后list for的话就是列出所有的嘛是吧，然后他在这边的话。

它是有做了这样的一个格式化，就是他把输出了一个内容的话，把它格式就是呃输出到了这样子的一个，htm的一个文件当中，就他通过format做了这样的一个格式化。



![](img/31590aa228067565953652604271e9be_15.png)

啊呃我看一下就是执行这个脚本之后。

![](img/31590aa228067565953652604271e9be_17.png)

它的一个实际的一个输出啊，就是我们可以在这个html文件当中去查看，然后的话东西比较多啊。

![](img/31590aa228067565953652604271e9be_19.png)

像这个的话呃，它它是对应的呀，就是跟着脚本这边的话是对应的是吧，但你的一个时区信息对应的话就是这边嘛。



![](img/31590aa228067565953652604271e9be_21.png)

就是这边对吧，然后的话就是操作系统，操作系统的话在这边就是啊，我是这边的这个机器的话是win 10家庭中文版的，然后还有就是对应的这样子的一些。



![](img/31590aa228067565953652604271e9be_23.png)

我们都可以在这个文件当中去查找是吧。

![](img/31590aa228067565953652604271e9be_25.png)

就是啊一个信息收集的一个提取的一个脚本，也是应该就是比较简单，主要的就是这一个命令的一个使用了，然后呃然后的话就是补丁信息，补丁包的一个玻璃呃，在这一个的话，这个应该前面在讲。

那个信息收集应该也是有讲对吧。

![](img/31590aa228067565953652604271e9be_27.png)

就是通过这个w mc，比如我在这边，我在这边执行这个命令，执行这个命令的话，他就会去列举出当前系统下面已经打过的，这样子的一些补丁包的一个名字，就这一些就是其实就是一个host fixed id。

在这里的话就是我们经常看到的这样子的，一些补丁号，然后这边的话他的这个命令的话，它有列出来，就是你的这个就是这个补丁对吧，他这边有这样子的一个，就是微软官方的这样子的一个信息。

就是对这个补丁的一个公告的一些信息对吧，然后还有的话就是像他的一个描述，就是像这种安全更新对吧，就表示的话，这个补丁的话是针对就是安全问题的这样子的，一个更新，以及它这边呃安装更新的这样子的一个时间啊。

4月15号。

![](img/31590aa228067565953652604271e9be_29.png)

![](img/31590aa228067565953652604271e9be_30.png)

然后的话就是呃过滤的话，其实就是用我们前面讲的这个在windows下面的，这个方式转的这个命令嘛，来去匹配嘛，然后杠11后面的话就是匹配，就是借我们要匹配的这样子的一个字符，像比如说你想要去找。

就是说你的这个系统下面，你指定的这样子的一个kb的，这个就是补丁号是吧，你要去查找当前这个系统下面，它是否有这样子的一个补丁，就是说如果说你找到有这个补丁，然后的话这个补丁它是针对某一个啊漏洞的。

这样子的一个啊防御对吧，就是它的这一个补丁的一个作用的话，就是去防止某一个漏洞，那么你找到它有这个补丁号的话，那么对应的这样子的一个漏洞的话，那么我们就无法去进行一个利用对吧，如果说没有找到的话。

那么我们就可以去进行一个尝试了，二还有的话就是获取杀软名，还有杀软的一个安装路径，这里的话呃，前面应该也讲了，这边的话就看一下效果。



![](img/31590aa228067565953652604271e9be_32.png)

好呃，这边的话可以看到，念出来就是有360火龙对吧，还有windows defend。

![](img/31590aa228067565953652604271e9be_34.png)

就是呃这个系统现在有装的以及。

![](img/31590aa228067565953652604271e9be_36.png)

以及呃上扰民，还有安装路径，这边的话我就不一的去呃给大家看了，大家自己课后的话去尝试好吧，然后还有的话就是其他的，我这边的话也列举了几个啊，像主账户啊，用户账户就是自启动的一个命令对吧。

然后的话还有操作系统，然后的话进程还有应用程序，这些话这些信息的话，其实都是我们通常会去进行一个收集的，这样子的一个信息，然而第二个的话就是这个sc的一个呃，命令行程序，这个sc啊。

这个sc的话它是用来与服务控制管理器，还有服务区进行一个通信的一个命令行程序，主要的话我们会用它来去进行一个，就是啊对我们的一个服务区进行一个控制，他会去检索和设置有关服务的一个控制信息。

然后的话我们像比如说，我们可以去检索服务的一个状态，对看他是不是处于一个运行的，或者说它是一个停止的一个状态，以及我们可以去进行一个就是启动，然后停止某一个服务，然后呃在这边看。

就是类似于我们控制面板管理工具服务，service的这样子的，就这一个，就是在在这边啊，这一个服务，就类似于我们这边就这边的这样子的一个呃，这个怎么说呢，就是这个sc的话。

它是可以通过命令行的方式去进行一个服务的，一个检索以及操作对吧，然后我们当前的这样子的一个界面的话，就是我们可以在这个界面去进行，对这样子的一些服务，对系统里面所运行的这样子的一些服务。

去做一个操作是吧，像比如说我随便选一个对吧，我可以右键，然后的话可以去进行一个启动以及停止暂停，对吧等等这样子的一个操作，啊然后我们在这边的这样子的一些操作的话。

其实我们都可以通过这个sc这个命令行程序，来进行来去实现，然后我这边的话以这个为例子。

![](img/31590aa228067565953652604271e9be_38.png)

获取系统注册服务的一个信息。

![](img/31590aa228067565953652604271e9be_40.png)

然后这一个面的话其实就是我们执行之后的话，它会获取到当前系统下面啊。

![](img/31590aa228067565953652604271e9be_42.png)

就是其实就是获取到了这边所有的这样的一些，服务的一个信息啊，就这边的，然后的话它是通过这样子的一个方法，这样子的一个形式去展示出来了，但比如说这边的一个seven name，就这个对吧。

以及这个seven name，它的就是啊，这个服务它的一个状态是他的个状态是running。

![](img/31590aa228067565953652604271e9be_44.png)

也就是正在运行的，这样子的一个状态。

![](img/31590aa228067565953652604271e9be_46.png)

好呃，第四个的话就是一些，自动信息收集的一个脚本啊，就跟前面的那个通过w m i c去进行一个，信息收集的一个呃脚本的话都是类似的，然后这边的话都是就是别人已经写好的。



![](img/31590aa228067565953652604271e9be_48.png)

在这里看一下。

![](img/31590aa228067565953652604271e9be_50.png)

![](img/31590aa228067565953652604271e9be_51.png)

你真的没有吗，然后大家可以去访问访问这边的，我这边给的这样子的地址，然后的话可以去查看啊，其实他的这样子的脚本，他信息的他收集了一些信息啊，其实我们在这边也能够去知道是吧，他像这种脚本的话。

其实你知道我们要去收集了一些信号，你自己也可以去写了是吧，像比如说这边的话，就是啊检测你安装了这些这样子的一个软件啊，然后在这边的话它是通过导出这边注册表，然后再导出的是这一个注册表下面的一个啊值。

然后导出到这样的一个文件当中是吧，然后的话在这一个文件当中去查找，我们想要的这样子的一些信息，然后的话把它做一个输出，然后我这边的话我就不一的那个，大家可以自己去尝试，然后去查看效果。

然后还有的话就是这个呃提权的，就是关于提权的这样子的一个信息。

![](img/31590aa228067565953652604271e9be_53.png)

收集的一个脚本，就是一个wpa s等于bp这个提出你的一个脚本。

![](img/31590aa228067565953652604271e9be_55.png)

就是这个这个脚本的话，它的一个收集的一个信息的话就比较多，有有很有很多这样的一个信息，然后这些信息的话就是我们可以用于，就说在我们去进行一个提前的时候，我们可会去用到的。

或者说需要去了解的这样子的一些信息。

![](img/31590aa228067565953652604271e9be_57.png)

这边的话可以执行一下，执行之后的话，他他就会去啊执行那个脚本，然后的话他会在这边去输出，和我这边的话要把它输出到一个文件当中，还有人说，我脸上。



![](img/31590aa228067565953652604271e9be_59.png)

然后我们可以在这边去查看它的一个信息，呃首先的话在这边乱码了。

![](img/31590aa228067565953652604271e9be_61.png)

![](img/31590aa228067565953652604271e9be_62.png)

首先在这里的话其实他就输出了，就是现在这边就是c什么info的一个信息嘛对吧，然后下面这边的话就是呃，当前系统的一些补丁嘛对吧，然后还有下面的这一些的话就是啊时间是吧，以及还有其他的这样子的一些信息啊。



![](img/31590aa228067565953652604271e9be_64.png)

![](img/31590aa228067565953652604271e9be_65.png)

有乱码。

![](img/31590aa228067565953652604271e9be_67.png)

好像在这边的话，就是我们刚刚的那个命令所实现的一个效果，对吧，就是去查看啊。

![](img/31590aa228067565953652604271e9be_69.png)

当年系统下面所存在的这样子的一些av对吧，还有等等的，其他那些东西的话，我就不一的淡淡的看了，然后大家自己去尝试吧，然后他这边的话，它是检索的一个线性的话比较多。



![](img/31590aa228067565953652604271e9be_71.png)

![](img/31590aa228067565953652604271e9be_72.png)

啊以及还有的话就是这个powerless。

![](img/31590aa228067565953652604271e9be_74.png)

它也同样的是一个类似的一个脚本啊，就是都都是差不多的，然后的话就是收集的这样的一些信息的话呃，都是差不多的，也就是我们所需要的这样的一些信息嘛是吧。



![](img/31590aa228067565953652604271e9be_76.png)

这边的话这个，这边的话这个我有执行了。

![](img/31590aa228067565953652604271e9be_78.png)

就是啊不是这个。

![](img/31590aa228067565953652604271e9be_80.png)

可以了，还有同样的是一个类似的这样的一个脚本啊，然后的话他会去检索参加的一个信息。

![](img/31590aa228067565953652604271e9be_82.png)

然后我们可以根据这些信息来去找到，我们所需要的这样的一些东西，是这样的话我就不考了，就是啊这边的话是我之前跑的呀。



![](img/31590aa228067565953652604271e9be_84.png)

呃呃下面第五个的话就是提取工具脚本，在这句话其实就是给大家介绍一下，就是常用一些常用的一些提前的一些工具，以及脚本，首先啊在这边的话就是给大家介绍了，介绍这一个啊，lotupotato，这个就是烂土豆。

就是他的一个呃别名的话就是烂土豆，然后呃这个工具的话用于提前的话，是用的比较多的一个提前的一个工具，然后它的它的一个作用的话，它可以将我们的一个服务账号，去做一个本地提取。

然后提取到我们的一个system的一个账号，然后通常我们的一个用法的话，就是我们通过这边得到的得到的shell对吧，我们通过前面像比如说m m sf所得到的一个shell。

我们得到这个shell之后的话，我们可以通过上传这样子的一个工具，上传到目标机上面去，然后的话去执行是吧，然后执行的话我们执行之后的话，我们可以尝试，就如果说它存在相对应的这样的一些，提权漏洞是吧。

那么我们就有可能把它提升到一个c什么的，一个用户，然后在这边看，就是你提前之后的话，它其实会有这样子的一个啊东西啊，就是有这样的一个token，就我们在去咨询之后的话。

他其实会就是说在当前的这个系统下面，它会有生成这样子的一个token，这个token的话，就是我们的一个system system权限的这样子的一个token，关于这一个token的话，大家看预习内容。

前额后面应该会讲，然后这边的话我也放到这边，就是这个token的一个窃取利用嗯，大家可以自己去尝试，呃在这里的话我是看的这个就是3g student，这位大佬的这个文章，然后的话我自己尝试。

然后写的笔记就是关于这个token窃取利用，然后在这边的话有就是列出了就是windows平台啊，msf啊，下面的它也有这样的工具，以及通过抛弃脚本的一个方式，来趋近相应的一个操作。

好我在这边的话呃大概介绍一下吧，后面后面呃后面可能啊，其实这个token窃取利用的话，其实大家看这篇文章，然后自己去操作一下，应该就理解了，然后大概的介绍一下。

就是windows下面的话有两种类型的一个token，就是我刚刚所说的这样的一个token，就token的话，他有这样的两种授权令牌，有模拟令牌，它的一个区别的话，就是呃这一个授权令牌的话。

就是用于交互的一个绘画登录像，比如说我们本地我们对吧，我这边直接远程登录到这这样子的，一个机器上面，那么你当你用你所使用的这样子的一个用户，你通过下面的桌面你去登录之后的话。

你登录的话使用的一个用户的啊，就是账号密码，你登录目标系统之后的话，他会去生成这样子的一个token，然后它是有这样的一个授权令牌，来去标识你的这样子的一个就是身份嘛对吧。

然后的话呃还有的话就是一个模拟令牌，impressionation token，这个的话就是用于非交互式的一个登录线，比如说我们通过net yours，是通过net use子去啊。

映射远程的一个目标机器上面的共享文件夹，对吧，这样子的一个操作的话，我们就，可以使用这样子的一个模拟的一个token，然，然后还有的话就是嗯这两种token的话，它会在只有在系就重启系统之后会清除。

也就是说如果你的你的这个目标机器上面，你有登录某一个系统好吧，你用某一个用用户，像比如说你用我的命这样子一个用户，你登录之后对吧，或者说你通过net柚子去登录之后的话，他会有这样子的一个token。

这是个令牌，然后的话我们可以去通过，就如果说我们拿下了这个机器对吧，拿下了这个机器的一个小，那么我们可以通过这样子的一个工具，就这一个这个工具来去窃取他的，这样子的一个token。

然后的话我们窃取到他这个token之后的话，我们就能够去以他的一个身份，也就是能够去得到他的这样子的这一个token，所对应的一个用户的一个权限，来去进行相应的一个操作，嗯更多的话大家看我这篇的笔记本。

然后看我ppt这边，而这边的话就是啊，以msf下面的这样子的一个操作为例，就msf下面的话它有集成这样子的一个模块，就是这个encore encore net这样子的一个模块好。

我们可以通过就是low的这个去加载它，然后呃它的一个使用的话就是呃list token，杠u的话，它就是可以列出当前的这样子的一个token，比如列出当前可以去使用的。

像呃这个授权令牌以及模拟令牌的这样子，一个token对吧，然后的话呃我们在这边用这一个，让土豆去提前的话，就是说他可以去利用它，可以就是说他去利用成功之后对吧，我们把这个工具上传到我们的这个机器上面去。

执行，执行之后的话，他会他就会去生成对应的这样子的一个token，就是你得到了它的一个，你通过这一个呃提前的一个工具对吧，你把它得到了一个system的一个权限，那么它会生成这样子的一个token。

我们就可以通过这个呃，这个模块下面的这个这个命令，来去窃取它的一个token，然后窃取到他的这个token之后的话，我们就能够去得到它的这样子的一个权限，然而这个命令的一个意思的话。

就是把这个把这边的这个token，这样子的一个就是这个token把它给添加到嗯，我们的一个模拟面板下面去，然后呃就是像这样子啊，我们执行之后，执行之后的话，它会创建这样的一个进程。

然后我们list token之后的话，我们就能够在这一个模拟那块下面，去找到对应的zz的一个啊c什么的一个token，然后的话我们就可以去进行一个模拟令牌，然后的话窃取他的一个token。

来去得到它的一个c什么的一个权限，这个它就是token的一个窃取啊，已经利用了，然后这边的话就是其实也是这一个工具，它的一个就是这个提前工具的一个用法，然后我在这边的话，就是说这个就是potato。

就是它是有一个家族的，就是土豆家族，然后他有其他的这样子的一些啊工具啊，就一些提前的一个脚本，然后这边的话大家自己一的去看吧，然后的话可以就是就是这些脚本的话，你可以就是做成自己的一个。

就是大家其实在去提前的时候，就是一般的话你收集到对应的一个信息对吧。

![](img/31590aa228067565953652604271e9be_86.png)

然后的话你找到对应的能够去进行利用的工具。