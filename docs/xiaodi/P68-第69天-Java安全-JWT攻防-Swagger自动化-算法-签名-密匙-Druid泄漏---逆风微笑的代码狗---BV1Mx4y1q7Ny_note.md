![](img/dab4fc6318f358f64a12ef655193e26c_1.png)

![](img/dab4fc6318f358f64a12ef655193e26c_3.png)

![](img/dab4fc6318f358f64a12ef655193e26c_5.png)

![](img/dab4fc6318f358f64a12ef655193e26c_7.png)

![](img/dab4fc6318f358f64a12ef655193e26c_9.png)

![](img/dab4fc6318f358f64a12ef655193e26c_11.png)

![](img/dab4fc6318f358f64a12ef655193e26c_13.png)

# è¯¾ç¨‹P68ï¼šJavaå®‰å…¨ä¹‹JWTæ”»é˜²ã€Swaggerè‡ªåŠ¨åŒ–ä¸Druidæ³„æ¼ ğŸ”

![](img/dab4fc6318f358f64a12ef655193e26c_15.png)

![](img/dab4fc6318f358f64a12ef655193e26c_17.png)

![](img/dab4fc6318f358f64a12ef655193e26c_19.png)

![](img/dab4fc6318f358f64a12ef655193e26c_21.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸‰ä¸ªå…³é”®çš„Javaå®‰å…¨çŸ¥è¯†ç‚¹ï¼šDruidç›‘æ§æ³„æ¼ã€Swaggeræ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ä»¥åŠJWTï¼ˆJSON Web Tokenï¼‰çš„æ”»å‡»ä¸é˜²å¾¡ã€‚æˆ‘ä»¬å°†ä»åŸç†ã€è¯†åˆ«æ–¹æ³•åˆ°å®æˆ˜åˆ©ç”¨è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œå†…å®¹åŠ›æ±‚ç®€å•ç›´ç™½ï¼Œè®©åˆå­¦è€…èƒ½å¤Ÿçœ‹æ‡‚ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_23.png)

![](img/dab4fc6318f358f64a12ef655193e26c_25.png)

![](img/dab4fc6318f358f64a12ef655193e26c_27.png)

![](img/dab4fc6318f358f64a12ef655193e26c_29.png)

![](img/dab4fc6318f358f64a12ef655193e26c_31.png)

![](img/dab4fc6318f358f64a12ef655193e26c_33.png)

![](img/dab4fc6318f358f64a12ef655193e26c_35.png)

## 1. Druidç›‘æ§æ³„æ¼ä¸æœªæˆæƒè®¿é—® ğŸ”

![](img/dab4fc6318f358f64a12ef655193e26c_37.png)

![](img/dab4fc6318f358f64a12ef655193e26c_39.png)

![](img/dab4fc6318f358f64a12ef655193e26c_41.png)

![](img/dab4fc6318f358f64a12ef655193e26c_43.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†Spring Boot Actuatorçš„ç›‘æ§ç«¯ç‚¹ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ä¸ªJavaä¸­å¸¸ç”¨çš„æ•°æ®åº“è¿æ¥æ± ç›‘æ§ç»„ä»¶â€”â€”Druidã€‚Druidæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾æ•°æ®åº“è¿æ¥æ± ï¼Œç”¨äºç›‘æ§æ•°æ®åº“æ€§èƒ½ã€‚å¦‚æœé…ç½®ä¸å½“ï¼Œå…¶å†…ç½®çš„ç›‘æ§é¡µé¢å¯èƒ½é€ æˆæœªæˆæƒè®¿é—®ï¼Œå¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_45.png)

![](img/dab4fc6318f358f64a12ef655193e26c_47.png)

![](img/dab4fc6318f358f64a12ef655193e26c_49.png)

![](img/dab4fc6318f358f64a12ef655193e26c_51.png)

![](img/dab4fc6318f358f64a12ef655193e26c_53.png)

### 1.1 Druidæ˜¯ä»€ä¹ˆï¼Ÿ
Druidæ˜¯Javaä¸­ä¸“é—¨ç”¨æ¥ç›‘æ§æ•°æ®åº“è¿æ¥æ± çš„ç»„ä»¶ã€‚å®ƒæä¾›äº†ä¸€ä¸ªWebç•Œé¢ï¼Œç”¨äºå±•ç¤ºSQLç›‘æ§ã€Webåº”ç”¨ç›‘æ§ã€URIç›‘æ§ã€Sessionç›‘æ§ç­‰ä¿¡æ¯ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_55.png)

![](img/dab4fc6318f358f64a12ef655193e26c_57.png)

![](img/dab4fc6318f358f64a12ef655193e26c_59.png)

![](img/dab4fc6318f358f64a12ef655193e26c_61.png)

![](img/dab4fc6318f358f64a12ef655193e26c_63.png)

![](img/dab4fc6318f358f64a12ef655193e26c_65.png)

### 1.2 å®‰å…¨é—®é¢˜æˆå› 
Druidç›‘æ§é¡µé¢çš„å®‰å…¨é—®é¢˜ä¸»è¦æºäºé…ç½®ä¸å½“ã€‚å¦‚æœåœ¨`application.properties`æˆ–`application.yml`é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰è®¾ç½®è®¿é—®è¯¥é¡µé¢çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ–è€…å®‰å…¨é…ç½®å­˜åœ¨ç¼ºé™·ï¼Œæ”»å‡»è€…å°±å¯ä»¥ç›´æ¥è®¿é—®ç›‘æ§é¡µé¢ï¼Œè·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€æ‰§è¡Œçš„SQLè¯­å¥ã€Webè¯·æ±‚è·¯å¾„ç­‰æ•æ„Ÿæ•°æ®ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_67.png)

![](img/dab4fc6318f358f64a12ef655193e26c_69.png)

![](img/dab4fc6318f358f64a12ef655193e26c_71.png)

![](img/dab4fc6318f358f64a12ef655193e26c_73.png)

![](img/dab4fc6318f358f64a12ef655193e26c_75.png)

![](img/dab4fc6318f358f64a12ef655193e26c_77.png)

**é…ç½®ç¤ºä¾‹ï¼ˆå­˜åœ¨é£é™©ï¼‰ï¼š**
```yaml
# å¯èƒ½ç¼ºå°‘ä»¥ä¸‹å®‰å…¨é…ç½®
spring.datasource.druid.stat-view-servlet.enabled=true
spring.datasource.druid.stat-view-servlet.url-pattern=/druid/*
# æœªè®¾ç½®loginUsernameå’ŒloginPassword
```

![](img/dab4fc6318f358f64a12ef655193e26c_79.png)

![](img/dab4fc6318f358f64a12ef655193e26c_81.png)

![](img/dab4fc6318f358f64a12ef655193e26c_83.png)

![](img/dab4fc6318f358f64a12ef655193e26c_85.png)

![](img/dab4fc6318f358f64a12ef655193e26c_87.png)

![](img/dab4fc6318f358f64a12ef655193e26c_89.png)

![](img/dab4fc6318f358f64a12ef655193e26c_91.png)

![](img/dab4fc6318f358f64a12ef655193e26c_93.png)

![](img/dab4fc6318f358f64a12ef655193e26c_95.png)

### 1.3 æ”»å‡»è€…è§†è§’ï¼šé»‘ç›’ä¸ç™½ç›’æµ‹è¯•
æ— è®ºæ˜¯é»‘ç›’æµ‹è¯•è¿˜æ˜¯ç™½ç›’æµ‹è¯•ï¼Œå‘ç°å’Œåˆ©ç”¨Druidæ³„æ¼çš„æ€è·¯æ˜¯ç›¸é€šçš„ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_97.png)

![](img/dab4fc6318f358f64a12ef655193e26c_99.png)

![](img/dab4fc6318f358f64a12ef655193e26c_101.png)

![](img/dab4fc6318f358f64a12ef655193e26c_103.png)

![](img/dab4fc6318f358f64a12ef655193e26c_105.png)

![](img/dab4fc6318f358f64a12ef655193e26c_107.png)

![](img/dab4fc6318f358f64a12ef655193e26c_109.png)

![](img/dab4fc6318f358f64a12ef655193e26c_111.png)

**ä»¥ä¸‹æ˜¯æ”»å‡»è€…å¸¸ç”¨çš„æ­¥éª¤ï¼š**
1.  **å‘ç°ç«¯ç‚¹**ï¼šå°è¯•è®¿é—®å¸¸è§çš„Druidç›‘æ§è·¯å¾„ï¼Œå¦‚ `/druid/index.html`ã€`/druid/weburi.html`ã€`/druid/sql.html` ç­‰ã€‚
2.  **ä¿¡æ¯æ”¶é›†**ï¼šå¦‚æœèƒ½å¤Ÿæœªæˆæƒè®¿é—®ï¼Œåˆ™å¯ä»¥ç›´æ¥æŸ¥çœ‹SQLç›‘æ§ã€URIç›‘æ§ç­‰ä¿¡æ¯ï¼Œè·å–æ•°æ®åº“ç»“æ„ã€åå°ç®¡ç†è·¯å¾„ç­‰ã€‚
3.  **æƒé™ç»•è¿‡å°è¯•**ï¼šå¦‚æœé¡µé¢éœ€è¦ç™»å½•ï¼Œå¯ä»¥å°è¯•ï¼š
    *   åˆ©ç”¨ç›‘æ§é¡µé¢æ³„éœ²çš„Sessionä¿¡æ¯ï¼Œå°†å…¶æ·»åŠ åˆ°è¯·æ±‚Cookieä¸­å†æ¬¡è®¿é—®ã€‚
    *   åˆ©ç”¨æ³„éœ²çš„URIè·¯å¾„ï¼Œç›´æ¥è®¿é—®è¿™äº›åå°åŠŸèƒ½ç‚¹ï¼Œæµ‹è¯•æ˜¯å¦å­˜åœ¨æœªæˆæƒè®¿é—®ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_113.png)

![](img/dab4fc6318f358f64a12ef655193e26c_115.png)

![](img/dab4fc6318f358f64a12ef655193e26c_117.png)

![](img/dab4fc6318f358f64a12ef655193e26c_119.png)

![](img/dab4fc6318f358f64a12ef655193e26c_121.png)

![](img/dab4fc6318f358f64a12ef655193e26c_123.png)

![](img/dab4fc6318f358f64a12ef655193e26c_125.png)

![](img/dab4fc6318f358f64a12ef655193e26c_127.png)

### 1.4 é˜²å¾¡æªæ–½
*   **ç™½ç›’ï¼ˆå¼€å‘é˜¶æ®µï¼‰**ï¼šåœ¨æºç ä¸­æœç´¢`druid`ç›¸å…³é…ç½®ï¼Œç¡®ä¿è®¾ç½®äº†å¼ºå¯†ç ã€‚
    ```properties
    spring.datasource.druid.stat-view-servlet.login-username=admin
    spring.datasource.druid.stat-view-servlet.login-password=StrongPassword123!
    ```
*   **é»‘ç›’ï¼ˆè¿ç»´é˜¶æ®µï¼‰**ï¼šå®šæœŸæ‰«æåº”ç”¨æ˜¯å¦å­˜åœ¨ `/druid/*` è·¯å¾„çš„æœªæˆæƒè®¿é—®ï¼Œå¹¶åŠæ—¶ä¿®å¤ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_129.png)

![](img/dab4fc6318f358f64a12ef655193e26c_131.png)

![](img/dab4fc6318f358f64a12ef655193e26c_133.png)

![](img/dab4fc6318f358f64a12ef655193e26c_135.png)

**æ€»ç»“**ï¼šDruidæ³„æ¼çš„æœ¬è´¨æ˜¯**æœªæˆæƒè®¿é—®å¯¼è‡´çš„ä¿¡æ¯æ³„éœ²**ã€‚å…¶å±å®³åœ¨äºæš´éœ²äº†æ•°æ®åº“æ“ä½œã€åº”ç”¨æ¥å£ç­‰å†…éƒ¨ä¿¡æ¯ï¼Œä¸ºåç»­æ”»å‡»æä¾›äº†ä¾¿åˆ©ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_137.png)

![](img/dab4fc6318f358f64a12ef655193e26c_139.png)

![](img/dab4fc6318f358f64a12ef655193e26c_141.png)

![](img/dab4fc6318f358f64a12ef655193e26c_143.png)

![](img/dab4fc6318f358f64a12ef655193e26c_145.png)

## 2. Swaggeræ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ä¸æ¼æ´å‘ç° âš™ï¸

![](img/dab4fc6318f358f64a12ef655193e26c_147.png)

![](img/dab4fc6318f358f64a12ef655193e26c_149.png)

![](img/dab4fc6318f358f64a12ef655193e26c_151.png)

![](img/dab4fc6318f358f64a12ef655193e26c_153.png)

![](img/dab4fc6318f358f64a12ef655193e26c_155.png)

![](img/dab4fc6318f358f64a12ef655193e26c_157.png)

![](img/dab4fc6318f358f64a12ef655193e26c_159.png)

![](img/dab4fc6318f358f64a12ef655193e26c_161.png)

![](img/dab4fc6318f358f64a12ef655193e26c_163.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬äº†è§£äº†ç›‘æ§ç»„ä»¶çš„é£é™©ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ©ç”¨å¼€å‘å·¥å…·è¿›è¡Œæ”»å‡»ã€‚Swaggerï¼ˆç°ç§°OpenAPIï¼‰æ˜¯ä¸€ä¸ªç”¨äºè®¾è®¡ã€æ„å»ºã€æ–‡æ¡£åŒ–å’Œä½¿ç”¨RESTful WebæœåŠ¡çš„å·¥å…·ã€‚åœ¨Javaé¡¹ç›®ä¸­ï¼Œå®ƒå¸¸è¢«é›†æˆç”¨äºåœ¨çº¿æµ‹è¯•APIæ¥å£ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_165.png)

![](img/dab4fc6318f358f64a12ef655193e26c_167.png)

![](img/dab4fc6318f358f64a12ef655193e26c_168.png)

![](img/dab4fc6318f358f64a12ef655193e26c_170.png)

![](img/dab4fc6318f358f64a12ef655193e26c_172.png)

### 2.1 Swaggeræ˜¯ä»€ä¹ˆï¼Ÿ
Swaggeræ˜¯ä¸€ä¸ªAPIæ¥å£æœåŠ¡æ–‡æ¡£å·¥å…·ï¼Œå½’ç±»äºRESTfulæ¥å£ã€‚é¡¹ç›®ä¸Šçº¿åï¼Œå¼€å‘æˆ–ç®¡ç†å‘˜ä¼šä½¿ç”¨Swaggerç•Œé¢åœ¨çº¿æµ‹è¯•æ¥å£çš„æ”¶å‘æ•°æ®æ˜¯å¦æ­£å¸¸ã€‚å®ƒä¼šå±•ç¤ºé¡¹ç›®ä¸­æ‰€æœ‰å¯è°ƒè¯•çš„APIåœ°å€å’Œå‚æ•°ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_174.png)

![](img/dab4fc6318f358f64a12ef655193e26c_176.png)

![](img/dab4fc6318f358f64a12ef655193e26c_178.png)

![](img/dab4fc6318f358f64a12ef655193e26c_180.png)

![](img/dab4fc6318f358f64a12ef655193e26c_182.png)

![](img/dab4fc6318f358f64a12ef655193e26c_184.png)

![](img/dab4fc6318f358f64a12ef655193e26c_186.png)

![](img/dab4fc6318f358f64a12ef655193e26c_188.png)

![](img/dab4fc6318f358f64a12ef655193e26c_190.png)

### 2.2 å®‰å…¨é—®é¢˜ï¼šæ”»å‡»è€…çš„â€œåœ°å›¾â€
Swaggeræœ¬æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¾¿åˆ©ï¼Œä½†ä¹Ÿä¸ºæ”»å‡»è€…æä¾›äº†ä¸€å¼ æ¸…æ™°çš„â€œæ”»å‡»åœ°å›¾â€ã€‚æ”»å‡»è€…å¯ä»¥ç›´æ¥çœ‹åˆ°æ‰€æœ‰APIç«¯ç‚¹ï¼Œå¹¶åˆ©ç”¨å…¶æµ‹è¯•åŠŸèƒ½ï¼Œæ‰¹é‡ã€è‡ªåŠ¨åŒ–åœ°æ¢æµ‹æ¼æ´ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_192.png)

![](img/dab4fc6318f358f64a12ef655193e26c_194.png)

![](img/dab4fc6318f358f64a12ef655193e26c_196.png)

![](img/dab4fc6318f358f64a12ef655193e26c_198.png)

![](img/dab4fc6318f358f64a12ef655193e26c_200.png)

![](img/dab4fc6318f358f64a12ef655193e26c_202.png)

![](img/dab4fc6318f358f64a12ef655193e26c_204.png)

![](img/dab4fc6318f358f64a12ef655193e26c_206.png)

![](img/dab4fc6318f358f64a12ef655193e26c_208.png)

![](img/dab4fc6318f358f64a12ef655193e26c_210.png)

![](img/dab4fc6318f358f64a12ef655193e26c_212.png)

![](img/dab4fc6318f358f64a12ef655193e26c_214.png)

![](img/dab4fc6318f358f64a12ef655193e26c_216.png)

![](img/dab4fc6318f358f64a12ef655193e26c_218.png)

**æ”»å‡»æ€è·¯å¦‚ä¸‹ï¼š**
1.  **å‘ç°Swagger UI**ï¼šè®¿é—®å¸¸è§çš„Swaggerè·¯å¾„ï¼Œå¦‚ `/swagger-ui.html`ã€`/v2/api-docs`ã€‚
2.  **ä¿¡æ¯æ”¶é›†**ï¼šæµè§ˆæ‰€æœ‰æ¥å£ï¼Œå¯»æ‰¾æ•æ„ŸåŠŸèƒ½ç‚¹ï¼ˆå¦‚ç”¨æˆ·ç®¡ç†ã€æ–‡ä»¶ä¸Šä¼ ã€ç³»ç»Ÿé…ç½®ï¼‰ã€‚
3.  **æ¼æ´æ¢æµ‹**ï¼šæ‰‹åŠ¨æˆ–åˆ©ç”¨å·¥å…·ï¼Œå¯¹æ¥å£è¿›è¡Œæ¼æ´æµ‹è¯•ï¼Œå¦‚ï¼š
    *   **æœªæˆæƒè®¿é—®**ï¼šç›´æ¥è°ƒç”¨æ ‡æ³¨ä¸ºéœ€è¦æƒé™çš„æ¥å£ã€‚
    *   **å‚æ•°æ³¨å…¥**ï¼šæµ‹è¯•SQLæ³¨å…¥ã€å‘½ä»¤æ³¨å…¥ç­‰ã€‚
    *   **æ–‡ä»¶ä¸Šä¼ **ï¼šæµ‹è¯•æ–‡ä»¶ä¸Šä¼ æ¼æ´ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_220.png)

![](img/dab4fc6318f358f64a12ef655193e26c_222.png)

![](img/dab4fc6318f358f64a12ef655193e26c_224.png)

![](img/dab4fc6318f358f64a12ef655193e26c_226.png)

### 2.3 è‡ªåŠ¨åŒ–è”åŠ¨æµ‹è¯•
ç”±äºæ¥å£å¯èƒ½æˆç™¾ä¸Šåƒï¼Œæ‰‹åŠ¨æµ‹è¯•æ•ˆç‡ä½ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥å°†Swaggerä¸è‡ªåŠ¨åŒ–å·¥å…·è”åŠ¨ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_228.png)

![](img/dab4fc6318f358f64a12ef655193e26c_230.png)

![](img/dab4fc6318f358f64a12ef655193e26c_232.png)

![](img/dab4fc6318f358f64a12ef655193e26c_234.png)

![](img/dab4fc6318f358f64a12ef655193e26c_236.png)

![](img/dab4fc6318f358f64a12ef655193e26c_238.png)

**ä»¥ä¸‹æ˜¯åˆ©ç”¨Postmanè¿›è¡Œæ‰¹é‡æµ‹è¯•çš„æ­¥éª¤ï¼š**
1.  **å¯¼å…¥æ¥å£**ï¼šåœ¨Postmanä¸­ï¼Œé€šè¿‡ `Import` -> `Link`ï¼Œè¾“å…¥Swaggerçš„APIæ–‡æ¡£åœ°å€ï¼ˆé€šå¸¸æ˜¯ `/v2/api-docs` æˆ– `/v3/api-docs`ï¼‰ã€‚
2.  **é…ç½®æµ‹è¯•**ï¼šå¯¼å…¥åï¼Œæ‰€æœ‰æ¥å£ä¼šè¢«æ•´ç†åˆ°é›†åˆä¸­ã€‚å¯ä»¥é€‰ä¸­é›†åˆï¼Œç‚¹å‡» `Run` è¿›è¡Œæ‰¹é‡è¯·æ±‚ã€‚
3.  **åˆ†æç»“æœ**ï¼šæŸ¥çœ‹è¿”å›çš„çŠ¶æ€ç ï¼ˆå¦‚200æˆåŠŸã€401æœªæˆæƒã€500æœåŠ¡å™¨é”™è¯¯ï¼‰ï¼Œå¿«é€Ÿå®šä½å¯èƒ½å­˜åœ¨é—®é¢˜çš„æ¥å£ã€‚

**è¿›é˜¶ï¼šè”åŠ¨æ¼æ´æ‰«æå™¨**
ä¸ºäº†æ›´æ·±å…¥åœ°æ£€æµ‹æ¼æ´ï¼Œå¯ä»¥å°†Postmançš„æµé‡è½¬å‘åˆ°ä¸“ä¸šæ¼æ´æ‰«æå™¨ï¼ˆå¦‚Burp Suiteã€Xrayï¼‰ã€‚
1.  åœ¨Postmanä¸­è®¾ç½®ä»£ç†ï¼Œå°†è¯·æ±‚å‘é€åˆ°Burp Suiteï¼ˆå¦‚ `127.0.0.1:8080`ï¼‰ã€‚
2.  åœ¨Burp Suiteä¸­é…ç½®ä¸Šæ¸¸ä»£ç†ï¼Œå°†æµé‡è½¬å‘ç»™Xrayè¿›è¡Œè¢«åŠ¨æ‰«æã€‚
3.  è¿™æ ·ï¼ŒPostmanæ‰¹é‡æµ‹è¯•çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡Xrayçš„æ¼æ´æ£€æµ‹å¼•æ“ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_240.png)

![](img/dab4fc6318f358f64a12ef655193e26c_242.png)

![](img/dab4fc6318f358f64a12ef655193e26c_244.png)

![](img/dab4fc6318f358f64a12ef655193e26c_245.png)

### 2.4 é˜²å¾¡ä¸å‘ç°
*   **ç™½ç›’å‘ç°**ï¼šåœ¨æºç ä¸­æœç´¢ `swagger`ã€`@EnableSwagger2` ç­‰æ³¨è§£æˆ–ä¾èµ–ã€‚
*   **é»‘ç›’å‘ç°**ï¼šä½¿ç”¨ç›®å½•æ‰«æå·¥å…·æ¢æµ‹ `/swagger-ui.html` ç­‰å¸¸è§è·¯å¾„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ**åŠ¡å¿…ç¦ç”¨Swagger UI**ï¼Œæˆ–å¯¹å…¶è®¿é—®æ–½åŠ ä¸¥æ ¼çš„IPç™½åå•å’Œèº«ä»½éªŒè¯ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_247.png)

![](img/dab4fc6318f358f64a12ef655193e26c_249.png)

![](img/dab4fc6318f358f64a12ef655193e26c_251.png)

![](img/dab4fc6318f358f64a12ef655193e26c_253.png)

![](img/dab4fc6318f358f64a12ef655193e26c_255.png)

![](img/dab4fc6318f358f64a12ef655193e26c_257.png)

![](img/dab4fc6318f358f64a12ef655193e26c_259.png)

**æ€»ç»“**ï¼šSwaggeræš´éœ²äº†åº”ç”¨çš„æ‰€æœ‰APIæ¥å£ï¼Œæå¤§åœ°é™ä½äº†æ”»å‡»è€…çš„æ¢æµ‹æˆæœ¬ã€‚å®‰å…¨æµ‹è¯•ä¸­ï¼Œå®ƒå¸¸ä½œä¸º**æ¥å£æœªæˆæƒã€è¶Šæƒã€æ³¨å…¥ç­‰æ¼æ´çš„å‘ç°å…¥å£**ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_261.png)

![](img/dab4fc6318f358f64a12ef655193e26c_263.png)

![](img/dab4fc6318f358f64a12ef655193e26c_265.png)

![](img/dab4fc6318f358f64a12ef655193e26c_267.png)

## 3. JWTï¼ˆJSON Web Tokenï¼‰æ”»å‡»ä¸é˜²å¾¡ ğŸ›¡ï¸

![](img/dab4fc6318f358f64a12ef655193e26c_269.png)

![](img/dab4fc6318f358f64a12ef655193e26c_271.png)

å‰é¢ä¸¤èŠ‚æˆ‘ä»¬è®¨è®ºäº†ä¿¡æ¯æ³„éœ²å’Œæ¥å£æš´éœ²çš„é£é™©ï¼Œæœ¬èŠ‚æˆ‘ä»¬æ·±å…¥ä¸€ä¸ªæ›´æ ¸å¿ƒçš„èº«ä»½éªŒè¯æœºåˆ¶â€”â€”JWTã€‚JWTæ˜¯ä¸€ç§ç”¨äºèº«ä»½éªŒè¯çš„å¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œå®ƒç”¨äºåœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ä½œä¸ºJSONå¯¹è±¡ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_273.png)

![](img/dab4fc6318f358f64a12ef655193e26c_274.png)

![](img/dab4fc6318f358f64a12ef655193e26c_276.png)

![](img/dab4fc6318f358f64a12ef655193e26c_278.png)

![](img/dab4fc6318f358f64a12ef655193e26c_280.png)

![](img/dab4fc6318f358f64a12ef655193e26c_282.png)

![](img/dab4fc6318f358f64a12ef655193e26c_284.png)

![](img/dab4fc6318f358f64a12ef655193e26c_286.png)

![](img/dab4fc6318f358f64a12ef655193e26c_288.png)

![](img/dab4fc6318f358f64a12ef655193e26c_290.png)

### 3.1 JWTæ˜¯ä»€ä¹ˆï¼Ÿä¸Sessionçš„å¯¹æ¯”
JWTæ—¨åœ¨å–ä»£ä¼ ç»Ÿçš„Cookie+Sessionèº«ä»½éªŒè¯æ–¹å¼ã€‚
*   **Session**ï¼šç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªSession IDå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¹¶è¿”å›ç»™æµè§ˆå™¨ä¸€ä¸ªCookieã€‚æµè§ˆå™¨åç»­è¯·æ±‚æºå¸¦æ­¤Cookieï¼ŒæœåŠ¡å™¨é€šè¿‡æ¯”å¯¹Sessionæ–‡ä»¶æ¥éªŒè¯ç”¨æˆ·èº«ä»½ã€‚
*   **JWT**ï¼šç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªJWTä»¤ç‰Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯åç»­è¯·æ±‚åœ¨Authorizationå¤´ä¸­æºå¸¦æ­¤ä»¤ç‰Œã€‚**æœåŠ¡å™¨æ— éœ€å­˜å‚¨ä¼šè¯çŠ¶æ€**ï¼Œåªéœ€éªŒè¯ä»¤ç‰Œçš„ç­¾åæ˜¯å¦æœ‰æ•ˆã€å†…å®¹æ˜¯å¦è¢«ç¯¡æ”¹å³å¯ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_292.png)

![](img/dab4fc6318f358f64a12ef655193e26c_293.png)

![](img/dab4fc6318f358f64a12ef655193e26c_295.png)

![](img/dab4fc6318f358f64a12ef655193e26c_297.png)

![](img/dab4fc6318f358f64a12ef655193e26c_299.png)

![](img/dab4fc6318f358f64a12ef655193e26c_301.png)

![](img/dab4fc6318f358f64a12ef655193e26c_303.png)

**JWTä»¤ç‰Œæ ¼å¼**ï¼š`Header.Payload.Signature`
*   **Headerï¼ˆå¤´éƒ¨ï¼‰**ï¼šåŒ…å«ä»¤ç‰Œç±»å‹ï¼ˆ`typ`ï¼‰å’Œç­¾åç®—æ³•ï¼ˆ`alg`ï¼‰ï¼Œå¦‚HMAC SHA256æˆ–RSAã€‚ç»è¿‡Base64Urlç¼–ç ã€‚
    ```json
    {
      "alg": "HS256",
      "typ": "JWT"
    }
    ```
*   **Payloadï¼ˆè´Ÿè½½ï¼‰**ï¼šåŒ…å«å£°æ˜ï¼ˆClaimsï¼‰ï¼Œå³éœ€è¦ä¼ é€’çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·IDï¼ˆ`sub`ï¼‰ã€ç”¨æˆ·åï¼ˆ`name`ï¼‰ã€è¿‡æœŸæ—¶é—´ï¼ˆ`exp`ï¼‰ç­‰ã€‚ç»è¿‡Base64Urlç¼–ç ã€‚
    ```json
    {
      "sub": "1234567890",
      "name": "John Doe",
      "exp": 1516239022
    }
    ```
*   **Signatureï¼ˆç­¾åï¼‰**ï¼šå¯¹ç¼–ç åçš„Headerå’ŒPayloadï¼Œä½¿ç”¨Headerä¸­æŒ‡å®šçš„ç®—æ³•å’Œä¸€ä¸ªå¯†é’¥ï¼ˆSecretï¼‰è¿›è¡Œç­¾åï¼Œç”¨äºéªŒè¯æ¶ˆæ¯åœ¨ä¼ é€’è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹ã€‚
    ```
    HMACSHA256(
      base64UrlEncode(header) + "." + base64UrlEncode(payload),
      secret)
    ```

![](img/dab4fc6318f358f64a12ef655193e26c_305.png)

![](img/dab4fc6318f358f64a12ef655193e26c_307.png)

![](img/dab4fc6318f358f64a12ef655193e26c_309.png)

![](img/dab4fc6318f358f64a12ef655193e26c_311.png)

![](img/dab4fc6318f358f64a12ef655193e26c_313.png)

![](img/dab4fc6318f358f64a12ef655193e26c_315.png)

**æœ€ç»ˆå½¢æ€ç¤ºä¾‹**ï¼š
`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`

![](img/dab4fc6318f358f64a12ef655193e26c_316.png)

![](img/dab4fc6318f358f64a12ef655193e26c_318.png)

![](img/dab4fc6318f358f64a12ef655193e26c_320.png)

![](img/dab4fc6318f358f64a12ef655193e26c_322.png)

![](img/dab4fc6318f358f64a12ef655193e26c_324.png)

![](img/dab4fc6318f358f64a12ef655193e26c_326.png)

![](img/dab4fc6318f358f64a12ef655193e26c_328.png)

![](img/dab4fc6318f358f64a12ef655193e26c_330.png)

![](img/dab4fc6318f358f64a12ef655193e26c_332.png)

### 3.2 å¦‚ä½•è¯†åˆ«JWTï¼Ÿ
1.  **äººå·¥è¯†åˆ«**ï¼šåœ¨HTTPè¯·æ±‚çš„ `Authorization` å¤´æˆ–Cookieä¸­ï¼Œå¯»æ‰¾ä»¥ `eyJ` å¼€å¤´ï¼Œå¹¶ç”±ä¸¤ä¸ªç‚¹ï¼ˆ`.`ï¼‰åˆ†éš”æˆä¸‰éƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€‚
2.  **å·¥å…·è¯†åˆ«**ï¼šä½¿ç”¨Burp Suiteæ’ä»¶ï¼ˆå¦‚ `JSON Web Tokens`ã€`AuthMatrix`ï¼‰æˆ–æ‰«æå™¨ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨é«˜äº®æ˜¾ç¤ºJWTä»¤ç‰Œã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_334.png)

![](img/dab4fc6318f358f64a12ef655193e26c_336.png)

![](img/dab4fc6318f358f64a12ef655193e26c_338.png)

![](img/dab4fc6318f358f64a12ef655193e26c_340.png)

![](img/dab4fc6318f358f64a12ef655193e26c_342.png)

![](img/dab4fc6318f358f64a12ef655193e26c_344.png)

![](img/dab4fc6318f358f64a12ef655193e26c_346.png)

![](img/dab4fc6318f358f64a12ef655193e26c_348.png)

### 3.3 JWTçš„å¸¸è§æ”»å‡»æ‰‹æ³•
JWTçš„å®‰å…¨ä¾èµ–äºç­¾åçš„å®Œæ•´æ€§ã€‚æ”»å‡»çš„æ ¸å¿ƒç›®æ ‡æ˜¯**ä¼ªé€ ä¸€ä¸ªèƒ½è¢«æœåŠ¡å™¨æ¥å—çš„åˆæ³•ä»¤ç‰Œ**ï¼Œä»è€Œå®ç°èº«ä»½ä¼ªé€ æˆ–è¶Šæƒã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_350.png)

![](img/dab4fc6318f358f64a12ef655193e26c_352.png)

![](img/dab4fc6318f358f64a12ef655193e26c_354.png)

**ä»¥ä¸‹æ˜¯å››ç§ä¸»è¦æ”»å‡»æ‰‹æ³•ï¼š**

![](img/dab4fc6318f358f64a12ef655193e26c_356.png)

![](img/dab4fc6318f358f64a12ef655193e26c_358.png)

![](img/dab4fc6318f358f64a12ef655193e26c_360.png)

![](img/dab4fc6318f358f64a12ef655193e26c_362.png)

![](img/dab4fc6318f358f64a12ef655193e26c_364.png)

![](img/dab4fc6318f358f64a12ef655193e26c_366.png)

![](img/dab4fc6318f358f64a12ef655193e26c_368.png)

![](img/dab4fc6318f358f64a12ef655193e26c_370.png)

![](img/dab4fc6318f358f64a12ef655193e26c_372.png)

#### æ”»å‡»1ï¼šç©ºåŠ å¯†ç®—æ³•ï¼ˆ`alg: none`ï¼‰
*   **åŸç†**ï¼šJWTè§„èŒƒæ”¯æŒå°†ç®—æ³•ï¼ˆ`alg`ï¼‰è®¾ç½®ä¸º `none`ï¼Œè¡¨ç¤ºä¸è¿›è¡Œç­¾åéªŒè¯ã€‚å¦‚æœæœåŠ¡å™¨é…ç½®ä¸å½“ï¼Œæ¥å—äº† `alg` ä¸º `none` çš„ä»¤ç‰Œï¼Œé‚£ä¹ˆæ”»å‡»è€…å¯ä»¥ä»»æ„ä¿®æ”¹Payloadéƒ¨åˆ†ï¼ŒæœåŠ¡å™¨éƒ½ä¼šä¿¡ä»»ã€‚
*   **åˆ©ç”¨**ï¼šå°†Headerä¸­çš„ `alg` æ”¹ä¸º `none`ï¼Œåˆ é™¤Signatureéƒ¨åˆ†ï¼ˆæˆ–ä¿ç•™ç©ºç­¾åï¼‰ï¼Œç„¶åä¿®æ”¹Payloadä¸­çš„ç”¨æˆ·èº«ä»½ï¼ˆå¦‚å°† `user` æ”¹ä¸º `admin`ï¼‰ã€‚
*   **å·¥å…·**ï¼šä½¿ç”¨ `jwt_tool` æˆ–Burpæ’ä»¶ `JSON Web Tokens` å¯ä»¥æ–¹ä¾¿åœ°æ„é€ è¿™ç§ä»¤ç‰Œã€‚
    ```bash
    python3 jwt_tool.py <åŸJWT> -X a
    ```

![](img/dab4fc6318f358f64a12ef655193e26c_374.png)

![](img/dab4fc6318f358f64a12ef655193e26c_376.png)

![](img/dab4fc6318f358f64a12ef655193e26c_377.png)

![](img/dab4fc6318f358f64a12ef655193e26c_379.png)

![](img/dab4fc6318f358f64a12ef655193e26c_381.png)

![](img/dab4fc6318f358f64a12ef655193e26c_383.png)

![](img/dab4fc6318f358f64a12ef655193e26c_385.png)

![](img/dab4fc6318f358f64a12ef655193e26c_387.png)

![](img/dab4fc6318f358f64a12ef655193e26c_388.png)

![](img/dab4fc6318f358f64a12ef655193e26c_390.png)

![](img/dab4fc6318f358f64a12ef655193e26c_392.png)

![](img/dab4fc6318f358f64a12ef655193e26c_393.png)

#### æ”»å‡»2ï¼šå¼±å¯†é’¥ï¼ˆWeak Secretï¼‰çˆ†ç ´
*   **åŸç†**ï¼šå¯¹äºä½¿ç”¨HMACï¼ˆå¦‚HS256ï¼‰ç­‰å¯¹ç§°åŠ å¯†ç®—æ³•çš„JWTï¼Œç­¾åå’ŒéªŒè¯ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ï¼ˆSecretï¼‰ã€‚å¦‚æœå¯†é’¥å¼ºåº¦å¼±ï¼ˆå¦‚`123456`ã€`secret`ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥æš´åŠ›ç ´è§£ã€‚
*   **åˆ©ç”¨**ï¼šä½¿ç”¨å­—å…¸å¯¹å¯†é’¥è¿›è¡Œçˆ†ç ´ï¼Œä¸€æ—¦ç ´è§£æˆåŠŸï¼Œå°±å¯ä»¥ç”¨è¯¥å¯†é’¥ç­¾å‘ä»»æ„Payloadçš„åˆæ³•ä»¤ç‰Œã€‚
*   **å·¥å…·**ï¼šä½¿ç”¨ `jwt_tool` æˆ– `hashcat`ã€‚
    ```bash
    python3 jwt_tool.py <åŸJWT> -C -d /path/to/wordlist.txt
    ```

![](img/dab4fc6318f358f64a12ef655193e26c_395.png)

![](img/dab4fc6318f358f64a12ef655193e26c_397.png)

![](img/dab4fc6318f358f64a12ef655193e26c_399.png)

![](img/dab4fc6318f358f64a12ef655193e26c_401.png)

![](img/dab4fc6318f358f64a12ef655193e26c_403.png)

![](img/dab4fc6318f358f64a12ef655193e26c_405.png)

![](img/dab4fc6318f358f64a12ef655193e26c_407.png)

![](img/dab4fc6318f358f64a12ef655193e26c_409.png)

![](img/dab4fc6318f358f64a12ef655193e26c_411.png)

![](img/dab4fc6318f358f64a12ef655193e26c_413.png)

#### æ”»å‡»3ï¼šç®—æ³•æ··æ·†ï¼ˆAlgorithm Confusionï¼‰
*   **åŸç†**ï¼šæœåŠ¡å™¨å¯èƒ½ä½¿ç”¨éå¯¹ç§°ç®—æ³•ï¼ˆå¦‚RS256ï¼‰éªŒè¯ç­¾åï¼ˆç”¨å…¬é’¥ï¼‰ï¼Œä½†ä»£ç é€»è¾‘å­˜åœ¨ç¼ºé™·ï¼Œæœªèƒ½ä¸¥æ ¼æ ¡éªŒHeaderä¸­çš„ `alg` å€¼ã€‚æ”»å‡»è€…å¯ä»¥å°† `alg` æ”¹ä¸ºå¯¹ç§°ç®—æ³•ï¼ˆå¦‚HS256ï¼‰ï¼Œç„¶åä½¿ç”¨æ³„éœ²çš„æˆ–çŒœæµ‹çš„**å…¬é’¥**ä½œä¸ºHMACçš„å¯†é’¥ï¼Œæ¥ä¼ªé€ ç­¾åã€‚
*   **å‰æ**ï¼šéœ€è¦è·å–åˆ°æœåŠ¡å™¨çš„å…¬é’¥ï¼ˆå¯èƒ½é€šè¿‡æºç æ³„éœ²ã€`/.well-known/jwks.json` ç«¯ç‚¹ç­‰ï¼‰ã€‚
*   **åˆ©ç”¨**ï¼šç”¨å…¬é’¥ä½œä¸ºHS256çš„å¯†é’¥ï¼Œé‡æ–°ç­¾åä¸€ä¸ªä¿®æ”¹è¿‡çš„Payloadã€‚
    ```python
    # ç¤ºä¾‹æ€è·¯
    import jwt
    forged_token = jwt.encode({"user": "admin"}, public_key, algorithm="HS256")
    ```

![](img/dab4fc6318f358f64a12ef655193e26c_415.png)

![](img/dab4fc6318f358f64a12ef655193e26c_417.png)

![](img/dab4fc6318f358f64a12ef655193e26c_419.png)

![](img/dab4fc6318f358f64a12ef655193e26c_421.png)

![](img/dab4fc6318f358f64a12ef655193e26c_423.png)

![](img/dab4fc6318f358f64a12ef655193e26c_425.png)

![](img/dab4fc6318f358f64a12ef655193e26c_427.png)

![](img/dab4fc6318f358f64a12ef655193e26c_429.png)

![](img/dab4fc6318f358f64a12ef655193e26c_430.png)

#### æ”»å‡»4ï¼šKIDï¼ˆKey IDï¼‰è·¯å¾„æ³¨å…¥
*   **åŸç†**ï¼šJWT Headerä¸­å¯èƒ½åŒ…å« `kid`ï¼ˆå¯†é’¥IDï¼‰å‚æ•°ï¼Œç”¨äºæŒ‡ç¤ºæœåŠ¡å™¨ä½¿ç”¨å“ªä¸ªå¯†é’¥æ¥éªŒè¯ã€‚å¦‚æœæœåŠ¡å™¨æœªå¯¹ `kid` è¿›è¡Œè¿‡æ»¤ï¼Œæ”»å‡»è€…å¯ä»¥å°è¯•è·¯å¾„éå†ã€SQLæ³¨å…¥ç­‰ï¼ŒæŒ‡å‘ä¸€ä¸ªæ”»å‡»è€…å¯æ§çš„æ–‡ä»¶æˆ–æ•°æ®åº“æ¡ç›®ï¼Œä»è€Œæ§åˆ¶éªŒè¯å¯†é’¥ã€‚
*   **ç¤ºä¾‹**ï¼šè®¾ç½® `"kid": "../../../dev/null"`ï¼Œå¯èƒ½ä½¿æœåŠ¡å™¨ä½¿ç”¨ç©ºå¯†é’¥è¿›è¡ŒéªŒè¯ï¼Œä»è€Œç»•è¿‡ç­¾åã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_432.png)

![](img/dab4fc6318f358f64a12ef655193e26c_434.png)

![](img/dab4fc6318f358f64a12ef655193e26c_436.png)

![](img/dab4fc6318f358f64a12ef655193e26c_438.png)

![](img/dab4fc6318f358f64a12ef655193e26c_440.png)

![](img/dab4fc6318f358f64a12ef655193e26c_442.png)

![](img/dab4fc6318f358f64a12ef655193e26c_444.png)

![](img/dab4fc6318f358f64a12ef655193e26c_446.png)

![](img/dab4fc6318f358f64a12ef655193e26c_448.png)

![](img/dab4fc6318f358f64a12ef655193e26c_450.png)

### 3.4 JWTæ”»å‡»å®æˆ˜æµç¨‹ï¼ˆé»‘ç›’ï¼‰
1.  **è·å–ä»¤ç‰Œ**ï¼šé€šè¿‡æ­£å¸¸ç™»å½•æˆ–ä¿¡æ¯æ³„éœ²ï¼Œè·å–ä¸€ä¸ªæœ‰æ•ˆçš„JWTã€‚
2.  **è§£ç åˆ†æ**ï¼šä½¿ç”¨ [jwt.io](https://jwt.io) æˆ–æ’ä»¶è§£ç ï¼ŒæŸ¥çœ‹ `alg`ã€`kid` åŠPayloadå†…å®¹ã€‚
3.  **é¡ºåºæµ‹è¯•**ï¼š
    a. æµ‹è¯•**ç©ºç®—æ³•ç»•è¿‡**ï¼ˆ`alg:none`ï¼‰ã€‚
    b. æµ‹è¯•**åˆ é™¤ç­¾å**ï¼ˆç›´æ¥å»æ‰ç¬¬ä¸‰éƒ¨åˆ†ï¼‰ï¼Œçœ‹æœåŠ¡å™¨æ˜¯å¦åªéªŒè¯å‰ä¸¤éƒ¨åˆ†ã€‚
    c. è¿›è¡Œ**å¼±å¯†é’¥çˆ†ç ´**ï¼ˆé’ˆå¯¹HS256ç­‰ï¼‰ã€‚
    d. æ£€æŸ¥æ˜¯å¦æœ‰ `kid` ç­‰å‚æ•°ï¼Œå°è¯•**æ³¨å…¥æ”»å‡»**ã€‚
    e. å¦‚æœå‘ç°æ˜¯RS256ç­‰éå¯¹ç§°ç®—æ³•ï¼Œå¯»æ‰¾**å…¬é’¥æ³„éœ²**çš„å¯èƒ½æ€§ï¼Œå°è¯•**ç®—æ³•æ··æ·†**ã€‚
4.  **é‡ç»„å‘é€**ï¼šåˆ©ç”¨æˆåŠŸçš„æ–¹æ³•ï¼Œä¼ªé€ ä¸€ä¸ªä»¥ç›®æ ‡ç”¨æˆ·ï¼ˆå¦‚`admin`ï¼‰èº«ä»½ç­¾åçš„JWTï¼Œå‘é€ç»™åº”ç”¨ï¼Œæµ‹è¯•è¶Šæƒã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_452.png)

![](img/dab4fc6318f358f64a12ef655193e26c_454.png)

![](img/dab4fc6318f358f64a12ef655193e26c_456.png)

![](img/dab4fc6318f358f64a12ef655193e26c_458.png)

### 3.5 é˜²å¾¡æªæ–½
*   **ä½¿ç”¨å¼ºç®—æ³•**ï¼šä¼˜å…ˆä½¿ç”¨éå¯¹ç§°ç®—æ³•ï¼ˆå¦‚RS256ã€ES256ï¼‰ã€‚
*   **éªŒè¯ `alg` å­—æ®µ**ï¼šåœ¨ä»£ç ä¸­ä¸¥æ ¼æ ¡éªŒæ¥æ”¶åˆ°çš„JWTçš„ `alg` å¤´æ˜¯å¦ä¸é¢„æœŸä¸€è‡´ã€‚
*   **ä½¿ç”¨å¼ºå¯†é’¥**ï¼šç¡®ä¿å¯¹ç§°åŠ å¯†çš„å¯†é’¥è¶³å¤Ÿå¤æ‚ï¼Œæ— æ³•è¢«çˆ†ç ´ã€‚
*   **è®¾ç½®åˆç†çš„æœ‰æ•ˆæœŸ**ï¼šPayloadä¸­åŠ¡å¿…ä½¿ç”¨ `exp`ï¼ˆè¿‡æœŸæ—¶é—´ï¼‰å’Œ `nbf`ï¼ˆç”Ÿæ•ˆæ—¶é—´ï¼‰å£°æ˜ã€‚
*   **é¿å…æ•æ„Ÿä¿¡æ¯**ï¼šä¸è¦åœ¨Payloadä¸­å­˜æ”¾å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºå®ƒæ˜¯Base64ç¼–ç ï¼Œå¹¶éåŠ å¯†ã€‚
*   **éªŒè¯KID**ï¼šå¦‚æœä½¿ç”¨ `kid`ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œä¸¥æ ¼çš„ç™½åå•æ ¡éªŒï¼Œé˜²æ­¢è·¯å¾„éå†æˆ–æ³¨å…¥ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_460.png)

![](img/dab4fc6318f358f64a12ef655193e26c_462.png)

![](img/dab4fc6318f358f64a12ef655193e26c_464.png)

![](img/dab4fc6318f358f64a12ef655193e26c_466.png)

![](img/dab4fc6318f358f64a12ef655193e26c_468.png)

![](img/dab4fc6318f358f64a12ef655193e26c_470.png)

![](img/dab4fc6318f358f64a12ef655193e26c_472.png)

![](img/dab4fc6318f358f64a12ef655193e26c_474.png)

![](img/dab4fc6318f358f64a12ef655193e26c_476.png)

![](img/dab4fc6318f358f64a12ef655193e26c_478.png)

**æ€»ç»“**ï¼šJWTæ”»å‡»çš„æ ¸å¿ƒæ˜¯**ç­¾åç»•è¿‡å’Œå¯†é’¥ç ´è§£**ï¼Œæœ€ç»ˆç›®çš„æ˜¯**ä¼ªé€ ç”¨æˆ·èº«ä»½**ã€‚å…¶å±å®³ç›´æ¥å¯¼è‡´**èº«ä»½éªŒè¯å¤±æ•ˆ**ï¼Œé€ æˆè¶Šæƒè®¿é—®ã€‚åœ¨å®¡è®¡å’Œæµ‹è¯•ä¸­ï¼ŒJWTæ˜¯éœ€è¦é‡ç‚¹å…³æ³¨çš„è®¤è¯æœºåˆ¶ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_480.png)

![](img/dab4fc6318f358f64a12ef655193e26c_482.png)

![](img/dab4fc6318f358f64a12ef655193e26c_484.png)

![](img/dab4fc6318f358f64a12ef655193e26c_486.png)

---
**æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†**ï¼š
1.  **Druidç›‘æ§æ³„æ¼**ï¼šå› é…ç½®ä¸å½“å¯¼è‡´çš„æœªæˆæƒè®¿é—®å’Œä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚
2.  **Swaggeræ¥å£æš´éœ²**ï¼šå¼€å‘æ¥å£æ–‡æ¡£å·¥å…·æš´éœ²å…¨éƒ¨APIï¼Œæˆä¸ºæ”»å‡»è€…çš„çªç ´å£ï¼Œå¹¶å­¦ä¹ äº†å¦‚ä½•ä¸Postmanã€Burp Suiteã€Xrayè”åŠ¨è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚
3.  **JWTæ”»é˜²**ï¼šæ·±å…¥ç†è§£äº†JWTçš„ç»“æ„å’ŒåŸç†ï¼ŒæŒæ¡äº†ç©ºç®—æ³•ç»•è¿‡ã€å¼±å¯†é’¥çˆ†ç ´ã€ç®—æ³•æ··æ·†ã€KIDæ³¨å…¥ç­‰å››ç§ä¸»è¦æ”»å‡»æ‰‹æ³•åŠå…¶é˜²å¾¡æ–¹æ³•ã€‚

![](img/dab4fc6318f358f64a12ef655193e26c_488.png)

![](img/dab4fc6318f358f64a12ef655193e26c_490.png)

![](img/dab4fc6318f358f64a12ef655193e26c_492.png)

![](img/dab4fc6318f358f64a12ef655193e26c_494.png)

![](img/dab4fc6318f358f64a12ef655193e26c_496.png)

è¿™äº›çŸ¥è¯†ç‚¹æ¶µç›–äº†ä»ä¿¡æ¯æ”¶é›†ã€æ¥å£æµ‹è¯•åˆ°æ ¸å¿ƒèº«ä»½éªŒè¯æœºåˆ¶æ”»é˜²çš„å®Œæ•´é“¾æ¡ï¼Œæ˜¯Javaåº”ç”¨å®‰å…¨æµ‹è¯•ä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚