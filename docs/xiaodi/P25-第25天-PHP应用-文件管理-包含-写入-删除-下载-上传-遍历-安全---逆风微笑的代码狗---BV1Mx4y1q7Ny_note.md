![](img/904fd02281e1e71091f9fb6d5cca52ae_1.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_3.png)

# ğŸ“ PHPåº”ç”¨å¼€å‘ä¸å®‰å…¨å®è·µ - ç¬¬25å¤©ï¼šæ–‡ä»¶ç®¡ç†æ¨¡å—è¯¦è§£

![](img/904fd02281e1e71091f9fb6d5cca52ae_5.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_7.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_9.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_11.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_13.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_15.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_17.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_19.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ PHPæ–‡ä»¶ç®¡ç†æ¨¡å—çš„å¼€å‘ï¼ŒåŒ…æ‹¬æ–‡ä»¶åŒ…å«ã€å†™å…¥ã€åˆ é™¤ã€ä¸‹è½½ã€ä¸Šä¼ ã€ç›®å½•éå†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æˆ‘ä»¬å°†ä»å¼€å‘è€…çš„è§’åº¦ç¼–å†™è¿™äº›åŠŸèƒ½ï¼Œå¹¶åˆ†æåœ¨å®ç°è¿‡ç¨‹ä¸­å¯èƒ½å¼•å…¥çš„å®‰å…¨é—®é¢˜ï¼Œå¸®åŠ©åˆå­¦è€…ç†è§£æ¼æ´äº§ç”Ÿçš„æ ¹æºã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_21.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_23.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_25.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_27.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_29.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_31.png)

---

![](img/904fd02281e1e71091f9fb6d5cca52ae_33.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_35.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_37.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_39.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_41.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_43.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_45.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_47.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_49.png)

## ğŸ§© æ–‡ä»¶åŒ…å«ï¼ˆIncludeï¼‰åŠŸèƒ½

![](img/904fd02281e1e71091f9fb6d5cca52ae_51.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_53.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_55.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†æ–‡ä»¶ä¸Šä¼ å’Œç›®å½•éå†ï¼Œæœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹æ–‡ä»¶åŒ…å«åŠŸèƒ½ã€‚æ–‡ä»¶åŒ…å«æ˜¯PHPä¸­ä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸åœ¨ä¸€ä¸ªè„šæœ¬ä¸­å¼•å…¥å¹¶æ‰§è¡Œå¦ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_57.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_59.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_61.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_63.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_65.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_67.png)

PHPä¸­æœ‰å››ä¸ªä¸»è¦çš„åŒ…å«å‡½æ•°ï¼š
*   `include`
*   `require`
*   `include_once`
*   `require_once`

![](img/904fd02281e1e71091f9fb6d5cca52ae_69.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_71.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_73.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_75.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_77.png)

å®ƒä»¬çš„ä¸»è¦å·®å¼‚åœ¨äºé”™è¯¯å¤„ç†å’Œé‡å¤åŒ…å«çš„è¡Œä¸ºï¼š
*   `include` åœ¨åŒ…å«å¤±è´¥æ—¶ä¼šäº§ç”Ÿè­¦å‘Šä½†è„šæœ¬ä¼šç»§ç»­æ‰§è¡Œã€‚
*   `require` åœ¨åŒ…å«å¤±è´¥æ—¶ä¼šäº§ç”Ÿè‡´å‘½é”™è¯¯å¹¶åœæ­¢è„šæœ¬ã€‚
*   å¸¦æœ‰ `_once` åç¼€çš„å‡½æ•°ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²è¢«åŒ…å«è¿‡ï¼Œå¦‚æœæ˜¯åˆ™ä¸ä¼šå†æ¬¡åŒ…å«ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_79.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_81.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_83.png)

**åŒ…å«çš„åŸºæœ¬è¯­æ³•ç¤ºä¾‹ï¼š**
```php
include 'header.php';
// æˆ–è€…ä½¿ç”¨å˜é‡åŠ¨æ€åŒ…å«ï¼ˆå±é™©ï¼ï¼‰
include $_GET['page'];
```

![](img/904fd02281e1e71091f9fb6d5cca52ae_85.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_87.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_89.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_91.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_93.png)

æ–‡ä»¶åŒ…å«çš„æ„ä¹‰åœ¨äºæé«˜ä»£ç å¤ç”¨æ€§å’Œå¼€å‘æ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ–‡ä»¶ä¸Šä¼ çš„HTMLè¡¨å•é¡µé¢ï¼ˆ`upload.html`ï¼‰å’ŒPHPå¤„ç†é€»è¾‘ï¼ˆ`upload.php`ï¼‰åˆ†å¼€ï¼Œç„¶ååœ¨ä¸»æ–‡ä»¶ä¸­åŒ…å«å®ƒä»¬ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_95.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_97.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_99.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_101.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_103.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_104.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_106.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_108.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_110.png)

ç„¶è€Œï¼Œå¦‚æœåŒ…å«çš„æ–‡ä»¶è·¯å¾„ç”±ç”¨æˆ·å¯æ§ï¼ˆä¾‹å¦‚é€šè¿‡ `$_GET` å‚æ•°ä¼ é€’ï¼‰ï¼Œå¹¶ä¸”æœªåšä¸¥æ ¼è¿‡æ»¤ï¼Œå°±ä¼šå¯¼è‡´**æ–‡ä»¶åŒ…å«æ¼æ´**ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ­¤æ¼æ´åŒ…å«å¹¶æ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„ä»»æ„æ–‡ä»¶ï¼ˆå¦‚ç³»ç»Ÿé…ç½®æ–‡ä»¶ã€æœ¨é©¬è„šæœ¬ç­‰ï¼‰ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_112.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_114.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_116.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_118.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_120.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_122.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_124.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_126.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_128.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_129.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_131.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_133.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_135.png)

**æ¼æ´äº§ç”Ÿçš„æ ¸å¿ƒåŸå› å¯ä»¥æ€»ç»“ä¸ºä¸¤ç‚¹ï¼š**
1.  å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç”±ç”¨æˆ·æ§åˆ¶çš„å˜é‡ï¼ˆè¾“å…¥ï¼‰ã€‚
2.  è¯¥å˜é‡è¢«ä¼ é€’ç»™äº†ä¸€ä¸ªå…·æœ‰ç‰¹å®šåŠŸèƒ½çš„å‡½æ•°ï¼ˆå¦‚ `include`ï¼‰ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_137.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_139.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_141.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_143.png)

---

![](img/904fd02281e1e71091f9fb6d5cca52ae_145.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_147.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_149.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_151.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_153.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_155.png)

## ğŸ› ï¸ æ–‡ä»¶ç®¡ç†æ¨¡å—å¼€å‘å®æˆ˜

![](img/904fd02281e1e71091f9fb6d5cca52ae_157.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_159.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_161.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_163.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åŠ¨æ‰‹å®ç°ä¸€ä¸ªå…·å¤‡å®Œæ•´åŠŸèƒ½çš„æ–‡ä»¶ç®¡ç†æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—å°†å±•ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¹¶æä¾›æ‰“å¼€ã€ç¼–è¾‘ã€ä¸‹è½½ã€åˆ é™¤ç­‰æ“ä½œã€‚

### ç¬¬ä¸€æ­¥ï¼šé¡µé¢å¸ƒå±€ä¸æ ·å¼

é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŸºç¡€çš„HTMLè¡¨æ ¼ç»“æ„æ¥å±•ç¤ºæ–‡ä»¶åˆ—è¡¨ã€‚å‰ç«¯æ ·å¼è®¾è®¡ä¸æ˜¯æœ¬è¯¾ç¨‹çš„é‡ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¸€ä¸ªç®€æ´çš„è¡¨æ ¼æ¨¡æ¿ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_165.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_167.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_169.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_171.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_173.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_175.png)

**æ ¸å¿ƒHTMLç»“æ„ï¼š**
```html
<table border="1">
    <tr>
        <th>å›¾æ ‡</th>
        <th>åç§°</th>
        <th>ä¿®æ”¹æ—¥æœŸ</th>
        <th>å¤§å°</th>
        <th>è·¯å¾„</th>
        <th>æ“ä½œ</th>
    </tr>
    <!-- PHPä»£ç å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆè¡Œ -->
</table>
```
æˆ‘ä»¬å‡†å¤‡äº†ä¸¤ä¸ªå›¾æ ‡ï¼š`list.png`ï¼ˆä»£è¡¨æ–‡ä»¶å¤¹ï¼‰å’Œ `file.png`ï¼ˆä»£è¡¨æ–‡ä»¶ï¼‰ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_177.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_179.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_181.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_183.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_185.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_187.png)

### ç¬¬äºŒæ­¥ï¼šè·å–å¹¶éå†ç›®å½•å†…å®¹

![](img/904fd02281e1e71091f9fb6d5cca52ae_189.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_191.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_193.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_195.png)

æˆ‘ä»¬éœ€è¦ç¼–å†™PHPä»£ç æ¥è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„å†…å®¹ï¼Œå¹¶å°†æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ†ç±»ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_197.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_199.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_201.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_203.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_205.png)

ä»¥ä¸‹æ˜¯å®ç°æ­¤åŠŸèƒ½çš„å…³é”®æ­¥éª¤ï¼š

![](img/904fd02281e1e71091f9fb6d5cca52ae_207.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_209.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_211.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_213.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_215.png)

1.  **è·å–ç›®æ ‡è·¯å¾„ï¼š** é€šè¿‡ `$_GET['path']` æ¥æ”¶ç”¨æˆ·æƒ³è¦æµè§ˆçš„è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’åˆ™é»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼ˆ`.`ï¼‰ã€‚
2.  **æ‰“å¼€å¹¶è¯»å–ç›®å½•ï¼š** ä½¿ç”¨ `opendir()` å’Œ `readdir()` å‡½æ•°ã€‚
3.  **è¿‡æ»¤ç‰¹æ®Šæ¡ç›®ï¼š** å¿½ç•¥å½“å‰ç›®å½•ï¼ˆ`.`ï¼‰å’Œä¸Šçº§ç›®å½•ï¼ˆ`..`ï¼‰ã€‚
4.  **åŒºåˆ†æ–‡ä»¶ä¸æ–‡ä»¶å¤¹ï¼š** ä½¿ç”¨ `filetype()` å‡½æ•°åˆ¤æ–­æ¯ä¸ªæ¡ç›®æ˜¯æ–‡ä»¶ï¼ˆ`file`ï¼‰è¿˜æ˜¯ç›®å½•ï¼ˆ`dir`ï¼‰ã€‚
5.  **ç»„ç»‡æ•°æ®ï¼š** å°†æ–‡ä»¶ä¿¡æ¯ï¼ˆåç§°ã€ç±»å‹ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ã€å®Œæ•´è·¯å¾„ï¼‰å­˜å‚¨åˆ°æ•°ç»„ä¸­ï¼Œä¾¿äºåç»­æ˜¾ç¤ºã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_217.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_219.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_221.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_223.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_225.png)

**å…³é”®ä»£ç ç‰‡æ®µï¼š**
```php
$path = isset($_GET['path']) ? $_GET['path'] : '.';
if ($handle = opendir($path)) {
    $fileList = array('dir' => array(), 'file' => array()); // åˆå§‹åŒ–æ•°ç»„ç”¨äºåˆ†ç±»å­˜å‚¨
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fullPath = $path . '/' . $file;
            $type = filetype($fullPath);
            $fileInfo = array(
                'name' => $file,
                'type' => $type,
                'size' => ($type == 'file') ? filesize($fullPath) : '-',
                'time' => date("Y-m-d H:i:s", filemtime($fullPath)),
                'path' => $fullPath
            );
            $fileList[$type][] = $fileInfo; // æ ¹æ®ç±»å‹å­˜å…¥ä¸åŒæ•°ç»„
        }
    }
    closedir($handle);
}
```

![](img/904fd02281e1e71091f9fb6d5cca52ae_227.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_229.png)

### ç¬¬ä¸‰æ­¥ï¼šåŠ¨æ€ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨

![](img/904fd02281e1e71091f9fb6d5cca52ae_231.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_233.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_235.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_237.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_239.png)

ä½¿ç”¨ `foreach` å¾ªç¯éå†æˆ‘ä»¬æ•´ç†å¥½çš„ `$fileList['dir']` å’Œ `$fileList['file']` æ•°ç»„ï¼Œå°†æ•°æ®å¡«å……åˆ°HTMLè¡¨æ ¼çš„è¡Œä¸­ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_241.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_243.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_245.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_247.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_249.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_251.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_253.png)

**åœ¨è¡¨æ ¼ä¸­å¾ªç¯è¾“å‡ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼š**
```php
<?php foreach ($fileList['dir'] as $item): ?>
<tr>
    <td><img src="images/list.png" width="20"></td>
    <td><?php echo $item['name']; ?></td>
    <td><?php echo $item['time']; ?></td>
    <td><?php echo $item['size']; ?></td>
    <td><?php echo $item['path']; ?></td>
    <td><!-- æ“ä½œæŒ‰é’® --></td>
</tr>
<?php endforeach; ?>
<!-- ç±»ä¼¼åœ°å¾ªç¯è¾“å‡º $fileList['file'] -->
```

![](img/904fd02281e1e71091f9fb6d5cca52ae_255.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_257.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_259.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_261.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_263.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_265.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_267.png)

### ç¬¬å››æ­¥ï¼šå®ç°å„é¡¹æ“ä½œåŠŸèƒ½

![](img/904fd02281e1e71091f9fb6d5cca52ae_269.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_271.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_273.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_275.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_277.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_279.png)

ç°åœ¨ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªæ–‡ä»¶æ¡ç›®æ·»åŠ â€œæ‰“å¼€â€ã€â€œç¼–è¾‘â€ã€â€œä¸‹è½½â€ã€â€œåˆ é™¤â€æŒ‰é’®ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_281.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_283.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_285.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_287.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_289.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_291.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_293.png)

**ä»¥ä¸‹æ˜¯å„ä¸ªåŠŸèƒ½çš„å®ç°æ€è·¯ï¼š**

![](img/904fd02281e1e71091f9fb6d5cca52ae_295.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_297.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_299.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_301.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_303.png)

1.  **æ‰“å¼€æ–‡ä»¶å¤¹ï¼š**
    *   ä¸ºæ–‡ä»¶å¤¹çš„â€œæ‰“å¼€â€æŒ‰é’®åˆ›å»ºä¸€ä¸ªé“¾æ¥ï¼ŒæŒ‡å‘å½“å‰é¡µé¢ï¼Œå¹¶ä¼ é€’æ–°çš„è·¯å¾„å‚æ•° `?path=<?php echo $item['path']; ?>`ã€‚
    *   é¡µé¢æ¥æ”¶åˆ°æ–°çš„ `path` å‚æ•°åï¼Œä¼šé‡æ–°æ‰§è¡Œç›®å½•éå†ä»£ç ï¼Œæ˜¾ç¤ºå­ç›®å½•å†…å®¹ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_305.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_307.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_309.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_311.png)

2.  **åˆ é™¤æ–‡ä»¶ï¼š**
    *   â€œåˆ é™¤â€é“¾æ¥ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šåŠ¨ä½œæ ‡è¯† `action=delete` å’Œæ–‡ä»¶å `file=<?php echo $item['path']; ?>`ã€‚
    *   åç«¯PHPä»£ç åˆ¤æ–­ `$_GET['action']` æ˜¯å¦ä¸º `'delete'`ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä½¿ç”¨ `unlink($_GET['file'])` å‡½æ•°åˆ é™¤æŒ‡å®šæ–‡ä»¶ã€‚
    *   **å®‰å…¨è­¦å‘Šï¼š** æ­¤å¤„å¿…é¡»éªŒè¯ `$_GET['file']` æ˜¯å¦åœ¨å…è®¸çš„ç›®å½•èŒƒå›´å†…ï¼Œå¦åˆ™ä¼šå¯¼è‡´**ä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´**ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_313.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_315.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_317.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_319.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_321.png)

3.  **ä¸‹è½½æ–‡ä»¶ï¼š**
    *   â€œä¸‹è½½â€é“¾æ¥ä¼ é€’åŠ¨ä½œæ ‡è¯† `action=download` å’Œæ–‡ä»¶åã€‚
    *   åç«¯ä»£ç è®¾ç½®HTTPå“åº”å¤´ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ä»¥é™„ä»¶å½¢å¼å¤„ç†è¯¥æ–‡ä»¶ï¼Œç„¶åè¯»å–æ–‡ä»¶å†…å®¹å¹¶è¾“å‡ºã€‚
    ```php
    if ($_GET['action'] == 'download') {
        $file = $_GET['file'];
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename="' . basename($file) . '"');
        readfile($file);
        exit;
    }
    ```

![](img/904fd02281e1e71091f9fb6d5cca52ae_323.png)

4.  **ç¼–è¾‘æ–‡ä»¶ï¼š**
    *   â€œç¼–è¾‘â€é“¾æ¥ä¼ é€’åŠ¨ä½œæ ‡è¯† `action=edit` å’Œæ–‡ä»¶åã€‚
    *   è¿›å…¥ç¼–è¾‘é¡µé¢åï¼Œä½¿ç”¨ `file_get_contents()` è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶æ˜¾ç¤ºåœ¨ä¸€ä¸ª `<textarea>` æ–‡æœ¬æ¡†ä¸­ã€‚
    *   æä¾›ä¸€ä¸ªè¡¨å•ï¼Œç”¨äºæäº¤ä¿®æ”¹åçš„å†…å®¹ã€‚è¡¨å•æäº¤åï¼Œä½¿ç”¨ `file_put_contents()` æˆ– `fopen()` + `fwrite()` å°†æ–°å†…å®¹å†™å›åŸæ–‡ä»¶ã€‚
    *   **å®‰å…¨è­¦å‘Šï¼š** æ­¤åŠŸèƒ½å¯èƒ½å¯¼è‡´**ä»»æ„æ–‡ä»¶è¯»å–/å†™å…¥æ¼æ´**ï¼Œå¿…é¡»å¯¹å¯ç¼–è¾‘çš„æ–‡ä»¶è·¯å¾„è¿›è¡Œä¸¥æ ¼é™åˆ¶ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_325.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_327.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_329.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_331.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_333.png)

---

![](img/904fd02281e1e71091f9fb6d5cca52ae_335.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_337.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_339.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_341.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_343.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_345.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_347.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_349.png)

## âš ï¸ å¼€å‘ä¸­çš„å®‰å…¨éšæ‚£ä¸é˜²æŠ¤

![](img/904fd02281e1e71091f9fb6d5cca52ae_351.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_353.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_355.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_357.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_359.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_361.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_363.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_365.png)

åœ¨å®ç°ä¸Šè¿°åŠŸèƒ½æ—¶ï¼Œå¦‚æœä¸å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼æ§åˆ¶å’Œè¿‡æ»¤ï¼Œä¼šå¼•å…¥ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_367.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_369.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_371.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_373.png)

**ä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹é—®é¢˜åŠé˜²æŠ¤å»ºè®®ï¼š**

![](img/904fd02281e1e71091f9fb6d5cca52ae_375.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_377.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_379.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_381.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_383.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_385.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_387.png)

1.  **è·¯å¾„éå†ï¼ˆDirectory Traversalï¼‰ï¼š**
    *   **é—®é¢˜ï¼š** æ”»å‡»è€…é€šè¿‡æ„é€ ç±»ä¼¼ `../../../etc/passwd` çš„è·¯å¾„ï¼Œå¯ä»¥è®¿é—®æˆ–æ“ä½œç³»ç»Ÿä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚
    *   **é˜²æŠ¤ï¼š** ä½¿ç”¨ `basename()` å‡½æ•°æ¸…é™¤è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†ï¼Œæˆ–ä½¿ç”¨ `realpath()` æ£€æŸ¥è§£æåçš„è·¯å¾„æ˜¯å¦åœ¨å…è®¸çš„ç›®å½•èŒƒå›´å†…ã€‚ä¹Ÿå¯ä»¥åœ¨PHPé…ç½®ä¸­è®¾ç½® `open_basedir` æ¥é™åˆ¶PHPå¯è®¿é—®çš„ç›®å½•ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_389.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_391.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_393.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_395.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_397.png)

2.  **å‘½ä»¤æ³¨å…¥ï¼ˆCommand Injectionï¼‰ï¼š**
    *   **é—®é¢˜ï¼š** å¦‚æœåœ¨åˆ é™¤æ–‡ä»¶æ—¶ä½¿ç”¨äº†ç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚ `system('del ' . $_GET['file'])`ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡è¾“å…¥ `file.txt & whoami` æ¥æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ã€‚
    *   **é˜²æŠ¤ï¼š** ä¼˜å…ˆä½¿ç”¨PHPå†…ç½®çš„æ–‡ä»¶æ“ä½œå‡½æ•°ï¼ˆå¦‚ `unlink`ï¼‰ï¼Œè€Œéç³»ç»Ÿå‘½ä»¤ã€‚å¦‚æœå¿…é¡»ä½¿ç”¨å‘½ä»¤ï¼ŒåŠ¡å¿…å¯¹è¾“å…¥è¿›è¡Œè½¬ä¹‰ï¼ˆå¦‚ä½¿ç”¨ `escapeshellarg()`ï¼‰ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_399.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_401.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_403.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_405.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_407.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_409.png)

3.  **æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„å»¶ä¼¸æ€è€ƒï¼š**
    *   æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½çš„å®‰å…¨ä¸ä»…å–å†³äºåç¼€åè¿‡æ»¤ã€‚æ¶æ„è®¾è®¡ä¹Ÿè‡³å…³é‡è¦ï¼š
        *   **ä¸Šä¼ åˆ°åº”ç”¨æœåŠ¡å™¨ï¼š** æ–‡ä»¶ä¸Webæºç åœ¨åŒä¸€ç¯å¢ƒï¼Œé£é™©æœ€é«˜ï¼Œéœ€è¦ä¸¥æ ¼è¿‡æ»¤ã€‚
        *   **ä¸Šä¼ åˆ°ç‹¬ç«‹å­˜å‚¨æœåŠ¡ï¼ˆå¦‚OSSï¼‰ï¼š** æ–‡ä»¶ä»…ä½œä¸ºé™æ€èµ„æºå­˜å‚¨ï¼Œæ— æ³•è¢«è§£ææ‰§è¡Œï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚ä½†éœ€æ³¨æ„ä¸è¦åœ¨å‰ç«¯ä»£ç ä¸­æ³„éœ²å­˜å‚¨æœåŠ¡çš„è®¿é—®å¯†é’¥ï¼ˆAccessKeyï¼‰ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_411.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_413.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_415.png)

---

![](img/904fd02281e1e71091f9fb6d5cca52ae_417.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_419.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_421.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_423.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_425.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_427.png)

## ğŸ“š æœ¬èŠ‚è¯¾æ€»ç»“

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†PHPæ–‡ä»¶ç®¡ç†æ¨¡å—çš„æ ¸å¿ƒå¼€å‘æŠ€æœ¯ï¼š

*   **æ–‡ä»¶åŒ…å«çš„åŸç†ä¸é£é™©ï¼š** ç†è§£äº† `include`, `require` ç­‰å‡½æ•°çš„ä½¿ç”¨åŠå…¶å¯èƒ½å¼•å‘çš„æ–‡ä»¶åŒ…å«æ¼æ´ã€‚
*   **ç›®å½•éå†ä¸å±•ç¤ºï¼š** æŒæ¡äº†ä½¿ç”¨ `opendir()`, `readdir()`, `filetype()` ç­‰å‡½æ•°è·å–å¹¶åˆ†ç±»æ˜¾ç¤ºç›®å½•å†…å®¹çš„æ–¹æ³•ã€‚
*   **æ–‡ä»¶æ“ä½œå®ç°ï¼š** é€æ­¥å®ç°äº†æ–‡ä»¶çš„æ‰“å¼€ï¼ˆæµè§ˆï¼‰ã€åˆ é™¤ï¼ˆ`unlink`ï¼‰ã€ä¸‹è½½ï¼ˆè®¾ç½®HTTPå¤´ï¼‰ã€ç¼–è¾‘ï¼ˆè¯»å–ä¸å†™å…¥ï¼‰ç­‰åŠŸèƒ½ã€‚
*   **å®‰å…¨æ€ç»´åŸ¹å…»ï¼š** é‡ç‚¹åˆ†æäº†åœ¨å¼€å‘ä¸Šè¿°åŠŸèƒ½æ—¶ï¼Œç”±äºå¯¹ç”¨æˆ·è¾“å…¥æ§åˆ¶ä¸å½“å¯èƒ½å¼•å‘çš„**è·¯å¾„éå†**ã€**ä»»æ„æ–‡ä»¶åˆ é™¤/è¯»å–/å†™å…¥**ã€**å‘½ä»¤æ³¨å…¥**ç­‰å®‰å…¨æ¼æ´ï¼Œå¹¶äº†è§£äº†åŸºæœ¬çš„é˜²æŠ¤æ€è·¯ã€‚

![](img/904fd02281e1e71091f9fb6d5cca52ae_429.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_431.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_433.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_435.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_437.png)

![](img/904fd02281e1e71091f9fb6d5cca52ae_438.png)

é€šè¿‡ä»å¼€å‘è€…è§†è§’æ„å»ºåŠŸèƒ½ï¼Œæˆ‘ä»¬æ·±åˆ»ä½“ä¼šåˆ°ï¼š**å¤§å¤šæ•°Webæ¼æ´æºäºâ€œç”¨æˆ·å¯æ§çš„è¾“å…¥â€ä¸â€œå…·æœ‰ç‰¹å®šåŠŸèƒ½çš„å‡½æ•°/å‚æ•°â€çš„ä¸å®‰å…¨ç»“åˆ**ã€‚ç†è§£å¼€å‘é€»è¾‘ï¼Œæ˜¯ç†è§£å’Œé˜²å¾¡å®‰å…¨æ¼æ´çš„åŸºçŸ³ã€‚åœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ¢ç´¢å…¶ä»–PHPåŠŸèƒ½æ¨¡å—ä¸å®‰å…¨é—®é¢˜çš„å…³è”ã€‚