![](img/10f4cda3cf20f6480f7f4ce58b505ff1_1.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_3.png)

# ğŸ§  Javaå®‰å…¨å¼€å‘è¯¾ç¨‹ P34ï¼šåå°„æœºåˆ¶è¯¦è§£ä¸åº”ç”¨

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_5.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_7.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ Javaåå°„æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µã€ä»£ç å®ç°åŠå…¶åœ¨å®‰å…¨é¢†åŸŸï¼ˆç‰¹åˆ«æ˜¯ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨ï¼‰ä¸­çš„é‡è¦æ€§ã€‚åå°„æ˜¯Javaç¨‹åºåœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œæ“ä½œç±»ã€å¯¹è±¡ã€æˆå‘˜å˜é‡ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„èƒ½åŠ›ï¼Œæ˜¯ç†è§£Javaé«˜çº§å®‰å…¨é—®é¢˜çš„åŸºçŸ³ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_9.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_11.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_13.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_15.png)

## ğŸ“– åå°„æœºåˆ¶æ¦‚è¿°

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_17.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_19.png)

åå°„æ˜¯Javaç¨‹åºçš„ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒå…è®¸Javaç¨‹åºåœ¨è¿è¡Œæ—¶å¯¹è‡ªèº«è¿›è¡Œæ£€æŸ¥æˆ–è‡ªå®¡ã€‚ç¨‹åºè¿è¡Œä¸­ï¼Œå¯¹ä»»ä½•ä¸€ä¸ªç±»ï¼Œèƒ½çŸ¥é“è¯¥ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»ä½•æ–¹æ³•å’Œå±æ€§ã€‚è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºåå°„æœºåˆ¶ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_21.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_22.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_24.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_26.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_28.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_29.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_31.png)

ç®€å•æ¥è¯´ï¼ŒJavaåå°„å°±æ˜¯åˆ©ç”¨å®˜æ–¹æä¾›çš„åå°„APIï¼ˆåŒ…å«`Class`ã€`Field`ã€`Method`å’Œ`Constructor`ç­‰ç±»åº“ï¼‰ï¼Œå¯¹ç±»çš„æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„ä¿¡æ¯è¿›è¡Œç¼–ç¨‹æ“ä½œã€‚

## ğŸ” ä¸ºä»€ä¹ˆéœ€è¦åå°„ï¼Ÿ

ä»å¼€å‘è§’åº¦çœ‹ï¼Œåå°„å®ç°äº†ä»â€œé™æ€ç¼–è¯‘â€åˆ°â€œåŠ¨æ€ç¼–è¯‘â€çš„è½¬å˜ã€‚JavaåŸç”Ÿæ˜¯é™æ€ç¼–è¯‘è¯­è¨€ï¼Œä»£ç åœ¨ç¼–è¯‘æ—¶å°±éœ€è¦ç¡®å®šæ‰€æœ‰ç±»å‹ã€‚åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºã€ä¿®æ”¹ã€è°ƒç”¨æˆ–è·å–å¯¹è±¡çš„å±æ€§ï¼Œè€Œæ— éœ€åœ¨ç¼–è¯‘æ—¶çŸ¥é“å…·ä½“çš„ç±»ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_33.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_35.png)

ä»å®‰å…¨è§’åº¦çœ‹ï¼Œåå°„æ˜¯ç†è§£å’Œåˆ©ç”¨Javaååºåˆ—åŒ–æ¼æ´çš„å…³é”®ã€‚è®¸å¤šååºåˆ—åŒ–æ¼æ´çš„åˆ©ç”¨é“¾ï¼ˆPayload/POCï¼‰éƒ½ä¾èµ–äºåå°„æœºåˆ¶æ¥åŠ¨æ€è°ƒç”¨å±é™©ç±»å’Œæ–¹æ³•ï¼Œä»è€Œå®ç°å‘½ä»¤æ‰§è¡Œç­‰æ”»å‡»ç›®çš„ã€‚å­¦ä¹ åå°„ï¼Œå°±æ˜¯ä¸ºäº†èƒ½å¤Ÿæ“ä½œå…¶ä»–ç±»ä¸­çš„æˆå‘˜ï¼Œä¸ºåç»­çš„å®‰å…¨åˆ†ææ‰“ä¸‹åŸºç¡€ã€‚

## ğŸ› ï¸ åå°„æ ¸å¿ƒæ“ä½œå®æˆ˜

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_37.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_39.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_41.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_43.png)

ä¸ºäº†æ·±å…¥ç†è§£åå°„ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ª`User`ç±»æ¥æ¼”ç¤ºæ‰€æœ‰æ ¸å¿ƒæ“ä½œã€‚è¿™ä¸ªç±»åŒ…å«äº†æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•å’Œæ„é€ æ–¹æ³•ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_45.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_47.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_49.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_51.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_53.png)

```java
public class User {
    // æˆå‘˜å˜é‡ - å…·æœ‰ä¸åŒè®¿é—®æƒé™
    public String name = "å°è¿ª";
    public int age = 31;
    private String gender = "man";
    protected String job = "SEC";

    // æ„é€ æ–¹æ³•
    public User() {
        System.out.println("æ— å‚æ„é€ ");
    }
    public User(String name) {
        System.out.println(name);
    }
    private User(String name, int age) {
        System.out.println(name + " " + age);
    }

    // æˆå‘˜æ–¹æ³•
    public void userInfo(String name, int age, String gender, String job) {
        // æ–¹æ³•ä½“
    }
    private void users(String name, String gender) {
        System.out.println(name + " " + gender);
    }
}
```

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_55.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_57.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_59.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_61.png)

### ç¬¬ä¸€æ­¥ï¼šè·å–Classå¯¹è±¡ ğŸ¯

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_63.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_65.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_67.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_69.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_71.png)

è¦å¯¹ä¸€ä¸ªç±»è¿›è¡Œåå°„æ“ä½œï¼Œç¬¬ä¸€æ­¥æ˜¯è·å–è¯¥ç±»çš„`Class`å¯¹è±¡ã€‚æœ‰å››ç§å¸¸è§æ–¹å¼ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_73.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_75.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_77.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_79.png)

ä»¥ä¸‹æ˜¯è·å–Classå¯¹è±¡çš„å‡ ç§æ–¹æ³•ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_81.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_83.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_85.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_87.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_89.png)

1.  **`Class.forName("å…¨é™å®šç±»å")`**ï¼šæ ¹æ®ç±»çš„å…¨é™å®šåè·å–ã€‚
    ```java
    Class aClass = Class.forName("com.example.User");
    ```
2.  **`ç±»å.class`**ï¼šç›´æ¥é€šè¿‡ç±»åè·å–ã€‚
    ```java
    Class userClass = User.class;
    ```
3.  **`å¯¹è±¡.getClass()`**ï¼šé€šè¿‡å·²æœ‰å¯¹è±¡å®ä¾‹è·å–ã€‚
    ```java
    User user = new User();
    Class aClass1 = user.getClass();
    ```
4.  **é€šè¿‡ç±»åŠ è½½å™¨è·å–**ï¼šä½¿ç”¨å½“å‰ç±»çš„ç±»åŠ è½½å™¨ã€‚
    ```java
    Class aClass2 = this.getClass().getClassLoader().loadClass("com.example.User");
    ```

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_91.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_93.png)

æœ€å¸¸ç”¨çš„æ˜¯ç¬¬ä¸€ç§`Class.forName()`æ–¹å¼ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_95.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_97.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_99.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_101.png)

### ç¬¬äºŒæ­¥ï¼šæ“ä½œæˆå‘˜å˜é‡ï¼ˆFieldï¼‰ ğŸ“Š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_103.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_105.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_107.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_109.png)

è·å–Classå¯¹è±¡åï¼Œå¯ä»¥æ“ä½œå…¶æˆå‘˜å˜é‡ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_111.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_113.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_115.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_117.png)

ä»¥ä¸‹æ˜¯æ“ä½œæˆå‘˜å˜é‡çš„æ ¸å¿ƒæ–¹æ³•ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_119.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_121.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_123.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_125.png)

1.  **è·å–æ‰€æœ‰å…¬å…±æˆå‘˜å˜é‡**ï¼š`getFields()`è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚
    ```java
    Field[] fields = aClass.getFields();
    for (Field fd : fields) {
        System.out.println(fd);
    }
    ```
2.  **è·å–æ‰€æœ‰æˆå‘˜å˜é‡ï¼ˆåŒ…æ‹¬ç§æœ‰å’Œä¿æŠ¤ï¼‰**ï¼š`getDeclaredFields()`ã€‚
    ```java
    Field[] allFields = aClass.getDeclaredFields();
    ```
3.  **è·å–å•ä¸ªå…¬å…±æˆå‘˜å˜é‡**ï¼š`getField("å˜é‡å")`ã€‚
    ```java
    Field nameField = aClass.getField("name");
    ```
4.  **è·å–å•ä¸ªæˆå‘˜å˜é‡ï¼ˆå¯æŒ‡å®šç§æœ‰ï¼‰**ï¼š`getDeclaredField("å˜é‡å")`ã€‚
    ```java
    Field genderField = aClass.getDeclaredField("gender");
    ```
5.  **å¯¹æˆå‘˜å˜é‡è¿›è¡Œå–å€¼å’Œèµ‹å€¼**ï¼š
    ```java
    User user = new User();
    // è·å–ageå­—æ®µå¹¶å–å€¼
    Field ageField = aClass.getField("age");
    int ageValue = (int) ageField.get(user);
    System.out.println(ageValue); // è¾“å‡º: 31

    // å¯¹ageå­—æ®µè¿›è¡Œèµ‹å€¼
    ageField.set(user, 32);
    int newAgeValue = (int) ageField.get(user);
    System.out.println(newAgeValue); // è¾“å‡º: 32
    ```
    å¯¹äºç§æœ‰å˜é‡ï¼Œéœ€è¦å…ˆè°ƒç”¨`field.setAccessible(true)`æ¥ä¸´æ—¶å¼€å¯è®¿é—®æƒé™ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_127.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_129.png)

### ç¬¬ä¸‰æ­¥ï¼šæ“ä½œæ„é€ æ–¹æ³•ï¼ˆConstructorï¼‰ ğŸ”¨

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_131.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_133.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_135.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_137.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ“ä½œç±»çš„æ„é€ æ–¹æ³•ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_139.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_141.png)

ä»¥ä¸‹æ˜¯æ“ä½œæ„é€ æ–¹æ³•çš„æ ¸å¿ƒæ–¹æ³•ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_143.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_145.png)

1.  **è·å–æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•**ï¼š`getConstructors()`ã€‚
    ```java
    Constructor[] constructors = aClass.getConstructors();
    for (Constructor cn : constructors) {
        System.out.println(cn);
    }
    ```
2.  **è·å–æ‰€æœ‰æ„é€ æ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰ï¼‰**ï¼š`getDeclaredConstructors()`ã€‚
3.  **è·å–å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•**ï¼š`getConstructor(å‚æ•°ç±»å‹.class, ...)`ã€‚
    ```java
    Constructor con1 = aClass.getConstructor(String.class);
    ```
4.  **è·å–å•ä¸ªæ„é€ æ–¹æ³•ï¼ˆå¯æŒ‡å®šç§æœ‰ï¼‰**ï¼š`getDeclaredConstructor(å‚æ•°ç±»å‹.class, ...)`ã€‚
    ```java
    Constructor con2 = aClass.getDeclaredConstructor(String.class, int.class);
    ```
5.  **åˆ©ç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡**ï¼š
    ```java
    // è·å–ç§æœ‰æ„é€ æ–¹æ³•
    Constructor privateCon = aClass.getDeclaredConstructor(String.class, int.class);
    // ä¸´æ—¶å¼€å¯è®¿é—®æƒé™
    privateCon.setAccessible(true);
    // åˆ›å»ºå¯¹è±¡å¹¶ä¼ å…¥å‚æ•°
    Object userObj = privateCon.newInstance("å°è¿ªSEC", 30);
    ```

### ç¬¬å››æ­¥ï¼šæ“ä½œæˆå‘˜æ–¹æ³•ï¼ˆMethodï¼‰ âš™ï¸

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_147.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_149.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_151.png)

æœ€åï¼Œæˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•æ“ä½œç±»çš„æˆå‘˜æ–¹æ³•ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_153.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_155.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_157.png)

ä»¥ä¸‹æ˜¯æ“ä½œæˆå‘˜æ–¹æ³•çš„æ ¸å¿ƒæ–¹æ³•ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_159.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_161.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_163.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_165.png)

1.  **è·å–æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰**ï¼š`getMethods()`ã€‚
    ```java
    Method[] methods = aClass.getMethods();
    for (Method method : methods) {
        System.out.println(method);
    }
    ```
2.  **è·å–æœ¬ç±»æ‰€æœ‰æˆå‘˜æ–¹æ³•ï¼ˆä¸åŒ…æ‹¬ç»§æ‰¿ï¼‰**ï¼š`getDeclaredMethods()`ã€‚
3.  **è·å–å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•**ï¼š`getMethod("æ–¹æ³•å", å‚æ•°ç±»å‹.class, ...)`ã€‚
    ```java
    Method method1 = aClass.getMethod("userInfo", String.class, int.class, String.class, String.class);
    ```
4.  **è·å–å•ä¸ªæˆå‘˜æ–¹æ³•ï¼ˆå¯æŒ‡å®šç§æœ‰ï¼‰**ï¼š`getDeclaredMethod("æ–¹æ³•å", å‚æ•°ç±»å‹.class, ...)`ã€‚
    ```java
    Method method2 = aClass.getDeclaredMethod("users", String.class, String.class);
    method2.setAccessible(true);
    ```
5.  **è°ƒç”¨æˆå‘˜æ–¹æ³•**ï¼šä½¿ç”¨`invoke()`æ–¹æ³•ã€‚
    ```java
    User user = new User();
    Method privateMethod = aClass.getDeclaredMethod("users", String.class, String.class);
    privateMethod.setAccessible(true);
    // è°ƒç”¨æ–¹æ³•ï¼Œä¼ å…¥å¯¹è±¡å®ä¾‹å’Œå‚æ•°
    privateMethod.invoke(user, "å°è¿ª", "gay1");
    ```

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_167.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_169.png)

## âš”ï¸ åå°„åœ¨å®‰å…¨ä¸­çš„åº”ç”¨ï¼šå®ç°å‘½ä»¤æ‰§è¡Œ

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_171.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_173.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_175.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_177.png)

ç†è§£åå°„æœºåˆ¶åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®‰å…¨ç›¸å…³çš„ç»å…¸ç¤ºä¾‹ï¼šå¦‚ä½•é€šè¿‡åå°„æœºåˆ¶å®ç°å‘½ä»¤æ‰§è¡Œï¼Œè¿™æ˜¯è®¸å¤šååºåˆ—åŒ–æ¼æ´åˆ©ç”¨çš„æ ¸å¿ƒã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_179.png)

åŸç”Ÿçš„å‘½ä»¤æ‰§è¡Œæ–¹å¼å¾ˆç®€å•ï¼š
```java
Runtime.getRuntime().exec("calc");
```

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_181.png)

ä½†å¦‚æœæ— æ³•ç›´æ¥è°ƒç”¨`Runtime`ç±»ï¼Œæˆ–è€…éœ€è¦åŠ¨æ€ä»å…¶ä»–ç±»åº“ä¸­è°ƒç”¨ï¼Œå°±éœ€è¦ç”¨åˆ°åå°„ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_183.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_185.png)

ä»¥ä¸‹æ˜¯åˆ©ç”¨åå°„å®ç°å‘½ä»¤æ‰§è¡Œçš„æ­¥éª¤ï¼š

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_187.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_189.png)

1.  **è·å–Runtimeç±»çš„Classå¯¹è±¡**ï¼š
    ```java
    Class clazz = Class.forName("java.lang.Runtime");
    ```
2.  **è·å–getRuntimeæ–¹æ³•**ï¼š
    ```java
    Method getRuntimeMethod = clazz.getMethod("getRuntime");
    ```
3.  **è°ƒç”¨getRuntimeæ–¹æ³•è·å–Runtimeå®ä¾‹**ï¼š
    ```java
    Object runtimeInstance = getRuntimeMethod.invoke(null);
    ```
4.  **è·å–execæ–¹æ³•**ï¼š
    ```java
    Method execMethod = clazz.getMethod("exec", String.class);
    ```
5.  **è°ƒç”¨execæ–¹æ³•æ‰§è¡Œå‘½ä»¤**ï¼š
    ```java
    execMethod.invoke(runtimeInstance, "calc");
    ```

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_191.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_193.png)

å°†ä»¥ä¸Šæ­¥éª¤æ•´åˆï¼Œå°±æ„æˆäº†ä¸€ä¸ªä¸ç›´æ¥å‡ºç°`Runtime`å’Œ`exec`å­—æ ·çš„å‘½ä»¤æ‰§è¡Œä»£ç ï¼Œè¿™åœ¨ç»•è¿‡æŸäº›å®‰å…¨æ£€æµ‹æˆ–æ„é€ ç‰¹å®šååºåˆ—åŒ–åˆ©ç”¨é“¾æ—¶éå¸¸æœ‰ç”¨ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_195.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_197.png)

## ğŸ”— åå°„ä¸ååºåˆ—åŒ–æ¼æ´

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_199.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_201.png)

ååºåˆ—åŒ–æ¼æ´æ˜¯Javaå®‰å…¨ä¸­æœ€å¸¸è§ã€æœ€é‡è¦çš„æ¼æ´ç±»å‹ä¹‹ä¸€ã€‚æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œåœ¨ç›®æ ‡ç³»ç»Ÿååºåˆ—åŒ–æ—¶è§¦å‘ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆè¾¾åˆ°æ‰§è¡Œä»»æ„ä»£ç çš„ç›®çš„ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_203.png)

è®¸å¤šååºåˆ—åŒ–æ¼æ´çš„åˆ©ç”¨é“¾ï¼ˆGadget Chainï¼‰éƒ½ä¸¥é‡ä¾èµ–åå°„æœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œè‘—åçš„ååºåˆ—åŒ–åˆ©ç”¨å·¥å…·ysoserialä¸­å°±åŒ…å«äº†å¤§é‡é’ˆå¯¹ä¸åŒç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Commons-Collectionsã€Fastjsonç­‰ï¼‰çš„åˆ©ç”¨é“¾ã€‚è¿™äº›åˆ©ç”¨é“¾çš„æœ¬è´¨ï¼Œå°±æ˜¯é€šè¿‡åå°„åŠ¨æ€æŸ¥æ‰¾å’Œè°ƒç”¨ç›®æ ‡ç±»åº“ä¸­å­˜åœ¨çš„å±é™©æ–¹æ³•ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_205.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_207.png)

å› æ­¤ï¼ŒæŒæ¡åå°„æ˜¯åˆ†æã€ç†è§£å’Œç¼–å†™ååºåˆ—åŒ–åˆ©ç”¨ä»£ç çš„åŸºç¡€ã€‚åªæœ‰æ¸…æ¥šäº†å¦‚ä½•é€šè¿‡åå°„è·å–ç±»ã€è°ƒç”¨æ–¹æ³•ã€ä¿®æ”¹å­—æ®µï¼Œæ‰èƒ½çœ‹æ‡‚é‚£äº›å¤æ‚çš„åˆ©ç”¨é“¾æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ç»„è£…èµ·æ¥çš„ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_209.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_211.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_213.png)

## ğŸ“ è¯¾ç¨‹æ€»ç»“

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_215.png)

æœ¬èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·æ·±å…¥å­¦ä¹ äº†Javaçš„åå°„æœºåˆ¶ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_217.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_219.png)

æˆ‘ä»¬é¦–å…ˆäº†è§£äº†åå°„çš„å®šä¹‰å’Œæ ¸å¿ƒä»·å€¼ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€æ“ä½œç±»ä¿¡æ¯ã€‚æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡å®Œæ•´çš„ä»£ç æ¼”ç¤ºï¼Œé€æ­¥å­¦ä¹ äº†åå°„çš„å››å¤§æ ¸å¿ƒæ“ä½œï¼šè·å–Classå¯¹è±¡ã€æ“ä½œæˆå‘˜å˜é‡ï¼ˆFieldï¼‰ã€æ“ä½œæ„é€ æ–¹æ³•ï¼ˆConstructorï¼‰ä»¥åŠæ“ä½œæˆå‘˜æ–¹æ³•ï¼ˆMethodï¼‰ã€‚æœ€åï¼Œæˆ‘ä»¬å°†åå°„çŸ¥è¯†ä¸å®‰å…¨å®æˆ˜ç»“åˆï¼Œæ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡åå°„æœºåˆ¶å®ç°å‘½ä»¤æ‰§è¡Œï¼Œå¹¶é˜è¿°äº†åå°„åœ¨Javaååºåˆ—åŒ–æ¼æ´åˆ©ç”¨ä¸­çš„å…³é”®ä½œç”¨ã€‚

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_221.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_223.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_225.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_227.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_229.png)

![](img/10f4cda3cf20f6480f7f4ce58b505ff1_231.png)

åå°„æ˜¯Javaå®‰å…¨ï¼Œç‰¹åˆ«æ˜¯ååºåˆ—åŒ–é¢†åŸŸçš„åŸºçŸ³çŸ¥è¯†ã€‚è™½ç„¶åˆå­¦å¯èƒ½è§‰å¾—æŠ½è±¡ï¼Œä½†å®ƒæ˜¯é€šå¾€é«˜çº§Javaå®‰å…¨ç ”ç©¶çš„å¿…ç»ä¹‹è·¯ã€‚ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†å¼€å§‹å­¦ä¹ ååºåˆ—åŒ–æ¼æ´çš„åŸç†ï¼Œå±Šæ—¶ä½ ä¼šæ›´æ¸…æ™°åœ°çœ‹åˆ°åå°„çŸ¥è¯†æ˜¯å¦‚ä½•è¢«åº”ç”¨åˆ°å®é™…æ¼æ´åˆ©ç”¨ä¸­çš„ã€‚